092ebd1eb5886cabcaedcf3ffbb42119
/**
 * Bridge Layer Testing Utilities
 * Specialized utilities for testing bridge layer hooks and their integration with business layer
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    BridgeLayerTestUtils: function() {
        return BridgeLayerTestUtils;
    },
    BridgePerformanceUtils: function() {
        return BridgePerformanceUtils;
    },
    WorkflowTestUtils: function() {
        return WorkflowTestUtils;
    },
    /**
 * Default export
 */ default: function() {
        return _default;
    },
    renderBridgeHook: function() {
        return renderBridgeHook;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactquerytestutils = require("./react-query-test-utils");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
/**
 * Default configuration for bridge layer testing
 */ const DEFAULT_BRIDGE_CONFIG = {
    queryClientConfig: {
        defaultOptions: {
            queries: {
                retry: false,
                gcTime: 0
            },
            mutations: {
                retry: false
            }
        }
    },
    disableRetries: true,
    disableCache: true,
    onError: ()=>{},
    mockToast: true,
    mockFileAPIs: true,
    mockFetch: true,
    initialWorkflowState: null
};
class BridgeLayerTestUtils extends _reactquerytestutils.MutationTestUtils {
    constructor(config = {}){
        const finalConfig = {
            ...DEFAULT_BRIDGE_CONFIG,
            ...config
        };
        super(finalConfig), this.mocks = {};
        this.config = finalConfig;
        this.setupMocks();
    }
    /**
   * Setup mocks for bridge layer testing
   */ setupMocks() {
        // Mock fetch if enabled
        if (this.config.mockFetch && !this.mocks.fetch) {
            this.mocks.fetch = jest.fn();
            global.fetch = this.mocks.fetch;
        }
        // Mock FileReader if enabled
        if (this.config.mockFileAPIs && !this.mocks.fileReader) {
            this.mocks.fileReader = jest.fn().mockImplementation(()=>({
                    readAsDataURL: jest.fn(),
                    result: null,
                    onload: null,
                    onerror: null
                }));
            global.FileReader = this.mocks.fileReader;
        }
        // Mock URL.createObjectURL if enabled
        if (this.config.mockFileAPIs && !this.mocks.URL) {
            this.mocks.URL = jest.fn().mockReturnValue('mock-url://test-file');
            global.URL.createObjectURL = this.mocks.URL;
            global.URL.revokeObjectURL = jest.fn();
        }
        // Mock toast if enabled
        if (this.config.mockToast && !this.mocks.toast) {
            this.mocks.toast = jest.fn();
        }
    }
    /**
   * Get mock functions for inspection
   */ getMocks() {
        return this.mocks;
    }
    /**
   * Reset all mocks
   */ resetMocks() {
        Object.values(this.mocks).forEach((mock)=>{
            if (mock && typeof mock.mockClear === 'function') {
                mock.mockClear();
            }
        });
    }
    /**
   * Setup successful API response mock
   */ mockSuccessfulApiCall(response = {
        img_generated: 'mock-generated-image-data'
    }, delay = 0) {
        if (this.mocks.fetch) {
            this.mocks.fetch.mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve(response)
                        }), delay)));
        }
    }
    /**
   * Setup API error response mock
   */ mockApiError(error = 'Test API error', status = 500, delay = 0) {
        if (this.mocks.fetch) {
            this.mocks.fetch.mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: false,
                            status,
                            json: ()=>Promise.resolve({
                                    error
                                })
                        }), delay)));
        }
    }
    /**
   * Setup API timeout mock
   */ mockApiTimeout(timeoutMs = 1000) {
        if (this.mocks.fetch) {
            this.mocks.fetch.mockImplementation(()=>new Promise((_, reject)=>setTimeout(()=>reject(new Error('AbortError')), timeoutMs)));
        }
    }
    /**
   * Mock file reading operation
   */ mockFileRead(result = 'data:image/jpeg;base64,mock-file-data', delay = 0) {
        if (this.mocks.fileReader) {
            this.mocks.fileReader.mockImplementation(()=>{
                const reader = {
                    readAsDataURL: jest.fn((file)=>{
                        setTimeout(()=>{
                            reader.result = result;
                            if (reader.onload) reader.onload({
                                target: reader
                            });
                        }, delay);
                    }),
                    result: null,
                    onload: null,
                    onerror: null
                };
                return reader;
            });
        }
    }
    /**
   * Mock file read error
   */ mockFileReadError(error = 'File read error') {
        if (this.mocks.fileReader) {
            this.mocks.fileReader.mockImplementation(()=>{
                const reader = {
                    readAsDataURL: jest.fn(()=>{
                        setTimeout(()=>{
                            if (reader.onerror) reader.onerror(new Error(error));
                        }, 0);
                    }),
                    result: null,
                    onload: null,
                    onerror: null
                };
                return reader;
            });
        }
    }
    /**
   * Create wrapper with bridge layer providers
   */ createBridgeWrapper() {
        const queryClient = this.getQueryClient();
        return function BridgeTestWrapper({ children }) {
            return /*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquerytestutils.TestProviders, {
                queryClient: queryClient,
                children: children
            });
        };
    }
    /**
   * Clean up after tests
   */ cleanup() {
        this.resetState();
        this.resetMocks();
    }
}
function renderBridgeHook(hook, options = {}) {
    const { initialProps, bridgeConfig = {}, renderOptions = {} } = options;
    const testUtils = new BridgeLayerTestUtils(bridgeConfig);
    const wrapper = testUtils.createBridgeWrapper();
    const result = (0, _react1.renderHook)(hook, {
        initialProps,
        wrapper,
        ...renderOptions
    });
    /**
   * Wait for workflow state to match predicate
   */ const waitForWorkflow = async (predicate, timeout = 5000)=>{
        await (0, _react1.waitFor)(()=>{
            if (!predicate(result.current)) {
                throw new Error('Workflow state not yet matching predicate');
            }
        }, {
            timeout
        });
    };
    return {
        ...result,
        testUtils,
        waitForWorkflow
    };
}
class WorkflowTestUtils {
    /**
   * Create mock files for testing
   */ static createMockFiles() {
        return {
            userImage: _reactquerytestutils.MockUtils.createMockFile('user-image-data', 'user.jpg', 'image/jpeg'),
            apparelImage: _reactquerytestutils.MockUtils.createMockFile('apparel-image-data', 'apparel.jpg', 'image/jpeg'),
            invalidFile: _reactquerytestutils.MockUtils.createMockFile('invalid-data', 'document.txt', 'text/plain'),
            largeFile: _reactquerytestutils.MockUtils.createMockFile('x'.repeat(15 * 1024 * 1024), 'large.jpg', 'image/jpeg')
        };
    }
    /**
   * Create mock image URLs
   */ static createMockImageUrls() {
        return {
            userImage: _reactquerytestutils.MockUtils.createMockImageUrl('user-image-data'),
            apparelImage: _reactquerytestutils.MockUtils.createMockImageUrl('apparel-image-data'),
            generatedImage: _reactquerytestutils.MockUtils.createMockImageUrl('generated-image-data')
        };
    }
    /**
   * Create mock workflow state
   */ static createMockWorkflowState(overrides = {}) {
        return {
            isCapturing: false,
            leftCardImage: null,
            rightCardImage: null,
            showPolaroid: false,
            userImageFile: null,
            apparelImageFile: null,
            generatedImage: null,
            hasError: false,
            progress: 0,
            error: null,
            ...overrides
        };
    }
    /**
   * Simulate complete workflow
   */ static async simulateCompleteWorkflow(testUtils, mockFiles) {
        // Setup successful responses
        testUtils.mockFileRead('data:image/jpeg;base64,user-image-data');
        testUtils.mockSuccessfulApiCall();
        return {
            userFile: mockFiles.userImage,
            apparelFile: mockFiles.apparelImage,
            expectedResult: 'mock-generated-image-data'
        };
    }
}
class BridgePerformanceUtils {
    /**
   * Start performance measurement
   */ startMeasurement(label) {
        this.performanceMarks.set(label, performance.now());
    }
    /**
   * End performance measurement
   */ endMeasurement(label) {
        const startTime = this.performanceMarks.get(label);
        if (!startTime) {
            throw new Error(`No start time found for label: ${label}`);
        }
        const duration = performance.now() - startTime;
        this.performanceMarks.delete(label);
        return duration;
    }
    /**
   * Measure hook render time
   */ async measureHookRender(hookFn, label = 'hook-render') {
        this.startMeasurement(label);
        const result = hookFn();
        const duration = this.endMeasurement(label);
        return {
            result,
            duration
        };
    }
    /**
   * Assert performance threshold
   */ assertPerformance(duration, maxDuration, operation) {
        if (duration > maxDuration) {
            throw new Error(`Performance assertion failed: ${operation} took ${duration}ms, expected < ${maxDuration}ms`);
        }
    }
    constructor(){
        this.performanceMarks = new Map();
    }
}
const _default = {
    BridgeLayerTestUtils,
    WorkflowTestUtils,
    BridgePerformanceUtils,
    renderBridgeHook
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL3Rlc3QtdXRpbHMvYnJpZGdlLWxheWVyLXRlc3QtdXRpbHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQnJpZGdlIExheWVyIFRlc3RpbmcgVXRpbGl0aWVzXG4gKiBTcGVjaWFsaXplZCB1dGlsaXRpZXMgZm9yIHRlc3RpbmcgYnJpZGdlIGxheWVyIGhvb2tzIGFuZCB0aGVpciBpbnRlZ3JhdGlvbiB3aXRoIGJ1c2luZXNzIGxheWVyXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlckhvb2ssIFJlbmRlckhvb2tPcHRpb25zLCBSZW5kZXJIb29rUmVzdWx0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IFxuICBIb29rVGVzdFV0aWxzLCBcbiAgTXV0YXRpb25UZXN0VXRpbHMsIFxuICBNb2NrVXRpbHMsIFxuICBUZXN0UHJvdmlkZXJzLFxuICB0eXBlIFF1ZXJ5VGVzdENvbmZpZyBcbn0gZnJvbSAnLi9yZWFjdC1xdWVyeS10ZXN0LXV0aWxzJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGZvciBicmlkZ2UgbGF5ZXIgdGVzdGluZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEJyaWRnZUxheWVyVGVzdENvbmZpZyBleHRlbmRzIFF1ZXJ5VGVzdENvbmZpZyB7XG4gIC8qKiBNb2NrIHRvYXN0IG5vdGlmaWNhdGlvbnMgKi9cbiAgbW9ja1RvYXN0PzogYm9vbGVhbjtcbiAgLyoqIE1vY2sgZmlsZSBBUElzICovXG4gIG1vY2tGaWxlQVBJcz86IGJvb2xlYW47XG4gIC8qKiBNb2NrIGZldGNoIGZvciBBUEkgY2FsbHMgKi9cbiAgbW9ja0ZldGNoPzogYm9vbGVhbjtcbiAgLyoqIEluaXRpYWwgc3RhdGUgZm9yIHdvcmtmbG93IHRlc3RpbmcgKi9cbiAgaW5pdGlhbFdvcmtmbG93U3RhdGU/OiBhbnk7XG59XG5cbi8qKlxuICogRGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciBicmlkZ2UgbGF5ZXIgdGVzdGluZ1xuICovXG5jb25zdCBERUZBVUxUX0JSSURHRV9DT05GSUc6IFJlcXVpcmVkPEJyaWRnZUxheWVyVGVzdENvbmZpZz4gPSB7XG4gIHF1ZXJ5Q2xpZW50Q29uZmlnOiB7XG4gICAgZGVmYXVsdE9wdGlvbnM6IHtcbiAgICAgIHF1ZXJpZXM6IHsgcmV0cnk6IGZhbHNlLCBnY1RpbWU6IDAgfSxcbiAgICAgIG11dGF0aW9uczogeyByZXRyeTogZmFsc2UgfSxcbiAgICB9LFxuICB9LFxuICBkaXNhYmxlUmV0cmllczogdHJ1ZSxcbiAgZGlzYWJsZUNhY2hlOiB0cnVlLFxuICBvbkVycm9yOiAoKSA9PiB7fSxcbiAgbW9ja1RvYXN0OiB0cnVlLFxuICBtb2NrRmlsZUFQSXM6IHRydWUsXG4gIG1vY2tGZXRjaDogdHJ1ZSxcbiAgaW5pdGlhbFdvcmtmbG93U3RhdGU6IG51bGwsXG59O1xuXG4vKipcbiAqIEJyaWRnZSBsYXllciB0ZXN0aW5nIHV0aWxpdGllc1xuICovXG5leHBvcnQgY2xhc3MgQnJpZGdlTGF5ZXJUZXN0VXRpbHMgZXh0ZW5kcyBNdXRhdGlvblRlc3RVdGlscyB7XG4gIHByaXZhdGUgY29uZmlnOiBSZXF1aXJlZDxCcmlkZ2VMYXllclRlc3RDb25maWc+O1xuICBwcml2YXRlIG1vY2tzOiB7XG4gICAgZmV0Y2g/OiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBmZXRjaD47XG4gICAgdG9hc3Q/OiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPGFueT47XG4gICAgZmlsZVJlYWRlcj86IGplc3QuTW9ja2VkRnVuY3Rpb248YW55PjtcbiAgICBVUkw/OiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPGFueT47XG4gIH0gPSB7fTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEJyaWRnZUxheWVyVGVzdENvbmZpZyA9IHt9KSB7XG4gICAgY29uc3QgZmluYWxDb25maWcgPSB7IC4uLkRFRkFVTFRfQlJJREdFX0NPTkZJRywgLi4uY29uZmlnIH07XG4gICAgc3VwZXIoZmluYWxDb25maWcpO1xuICAgIHRoaXMuY29uZmlnID0gZmluYWxDb25maWc7XG4gICAgdGhpcy5zZXR1cE1vY2tzKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgbW9ja3MgZm9yIGJyaWRnZSBsYXllciB0ZXN0aW5nXG4gICAqL1xuICBwcml2YXRlIHNldHVwTW9ja3MoKTogdm9pZCB7XG4gICAgLy8gTW9jayBmZXRjaCBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuY29uZmlnLm1vY2tGZXRjaCAmJiAhdGhpcy5tb2Nrcy5mZXRjaCkge1xuICAgICAgdGhpcy5tb2Nrcy5mZXRjaCA9IGplc3QuZm4oKSBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBmZXRjaD47XG4gICAgICBnbG9iYWwuZmV0Y2ggPSB0aGlzLm1vY2tzLmZldGNoO1xuICAgIH1cblxuICAgIC8vIE1vY2sgRmlsZVJlYWRlciBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuY29uZmlnLm1vY2tGaWxlQVBJcyAmJiAhdGhpcy5tb2Nrcy5maWxlUmVhZGVyKSB7XG4gICAgICB0aGlzLm1vY2tzLmZpbGVSZWFkZXIgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgICAgIHJlYWRBc0RhdGFVUkw6IGplc3QuZm4oKSxcbiAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICBvbmxvYWQ6IG51bGwsXG4gICAgICAgIG9uZXJyb3I6IG51bGwsXG4gICAgICB9KSk7XG4gICAgICBnbG9iYWwuRmlsZVJlYWRlciA9IHRoaXMubW9ja3MuZmlsZVJlYWRlcjtcbiAgICB9XG5cbiAgICAvLyBNb2NrIFVSTC5jcmVhdGVPYmplY3RVUkwgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLmNvbmZpZy5tb2NrRmlsZUFQSXMgJiYgIXRoaXMubW9ja3MuVVJMKSB7XG4gICAgICB0aGlzLm1vY2tzLlVSTCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ21vY2stdXJsOi8vdGVzdC1maWxlJyk7XG4gICAgICBnbG9iYWwuVVJMLmNyZWF0ZU9iamVjdFVSTCA9IHRoaXMubW9ja3MuVVJMO1xuICAgICAgZ2xvYmFsLlVSTC5yZXZva2VPYmplY3RVUkwgPSBqZXN0LmZuKCk7XG4gICAgfVxuXG4gICAgLy8gTW9jayB0b2FzdCBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuY29uZmlnLm1vY2tUb2FzdCAmJiAhdGhpcy5tb2Nrcy50b2FzdCkge1xuICAgICAgdGhpcy5tb2Nrcy50b2FzdCA9IGplc3QuZm4oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1vY2sgZnVuY3Rpb25zIGZvciBpbnNwZWN0aW9uXG4gICAqL1xuICBnZXRNb2NrcygpIHtcbiAgICByZXR1cm4gdGhpcy5tb2NrcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBhbGwgbW9ja3NcbiAgICovXG4gIHJlc2V0TW9ja3MoKTogdm9pZCB7XG4gICAgT2JqZWN0LnZhbHVlcyh0aGlzLm1vY2tzKS5mb3JFYWNoKG1vY2sgPT4ge1xuICAgICAgaWYgKG1vY2sgJiYgdHlwZW9mIG1vY2subW9ja0NsZWFyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG1vY2subW9ja0NsZWFyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgc3VjY2Vzc2Z1bCBBUEkgcmVzcG9uc2UgbW9ja1xuICAgKi9cbiAgbW9ja1N1Y2Nlc3NmdWxBcGlDYWxsKFxuICAgIHJlc3BvbnNlOiBhbnkgPSB7IGltZ19nZW5lcmF0ZWQ6ICdtb2NrLWdlbmVyYXRlZC1pbWFnZS1kYXRhJyB9LFxuICAgIGRlbGF5OiBudW1iZXIgPSAwXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vY2tzLmZldGNoKSB7XG4gICAgICB0aGlzLm1vY2tzLmZldGNoLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IFxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXNwb25zZSksXG4gICAgICAgICAgfSBhcyBSZXNwb25zZSksIGRlbGF5KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBBUEkgZXJyb3IgcmVzcG9uc2UgbW9ja1xuICAgKi9cbiAgbW9ja0FwaUVycm9yKFxuICAgIGVycm9yOiBzdHJpbmcgPSAnVGVzdCBBUEkgZXJyb3InLFxuICAgIHN0YXR1czogbnVtYmVyID0gNTAwLFxuICAgIGRlbGF5OiBudW1iZXIgPSAwXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vY2tzLmZldGNoKSB7XG4gICAgICB0aGlzLm1vY2tzLmZldGNoLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IFxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBlcnJvciB9KSxcbiAgICAgICAgICB9IGFzIFJlc3BvbnNlKSwgZGVsYXkpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIEFQSSB0aW1lb3V0IG1vY2tcbiAgICovXG4gIG1vY2tBcGlUaW1lb3V0KHRpbWVvdXRNczogbnVtYmVyID0gMTAwMCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vY2tzLmZldGNoKSB7XG4gICAgICB0aGlzLm1vY2tzLmZldGNoLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ0Fib3J0RXJyb3InKSksIHRpbWVvdXRNcylcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW9jayBmaWxlIHJlYWRpbmcgb3BlcmF0aW9uXG4gICAqL1xuICBtb2NrRmlsZVJlYWQoXG4gICAgcmVzdWx0OiBzdHJpbmcgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxtb2NrLWZpbGUtZGF0YScsXG4gICAgZGVsYXk6IG51bWJlciA9IDBcbiAgKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9ja3MuZmlsZVJlYWRlcikge1xuICAgICAgdGhpcy5tb2Nrcy5maWxlUmVhZGVyLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHtcbiAgICAgICAgICByZWFkQXNEYXRhVVJMOiBqZXN0LmZuKChmaWxlOiBGaWxlKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgcmVhZGVyLnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgaWYgKHJlYWRlci5vbmxvYWQpIHJlYWRlci5vbmxvYWQoeyB0YXJnZXQ6IHJlYWRlciB9IGFzIGFueSk7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICAgIG9ubG9hZDogbnVsbCxcbiAgICAgICAgICBvbmVycm9yOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVhZGVyO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgZmlsZSByZWFkIGVycm9yXG4gICAqL1xuICBtb2NrRmlsZVJlYWRFcnJvcihlcnJvcjogc3RyaW5nID0gJ0ZpbGUgcmVhZCBlcnJvcicpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tb2Nrcy5maWxlUmVhZGVyKSB7XG4gICAgICB0aGlzLm1vY2tzLmZpbGVSZWFkZXIubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0ge1xuICAgICAgICAgIHJlYWRBc0RhdGFVUkw6IGplc3QuZm4oKCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZWFkZXIub25lcnJvcikgcmVhZGVyLm9uZXJyb3IobmV3IEVycm9yKGVycm9yKSBhcyBhbnkpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICAgIG9ubG9hZDogbnVsbCxcbiAgICAgICAgICBvbmVycm9yOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVhZGVyO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB3cmFwcGVyIHdpdGggYnJpZGdlIGxheWVyIHByb3ZpZGVyc1xuICAgKi9cbiAgY3JlYXRlQnJpZGdlV3JhcHBlcigpIHtcbiAgICBjb25zdCBxdWVyeUNsaWVudCA9IHRoaXMuZ2V0UXVlcnlDbGllbnQoKTtcbiAgICBcbiAgICByZXR1cm4gZnVuY3Rpb24gQnJpZGdlVGVzdFdyYXBwZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRlc3RQcm92aWRlcnMgcXVlcnlDbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBhZnRlciB0ZXN0c1xuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc2V0U3RhdGUoKTtcbiAgICB0aGlzLnJlc2V0TW9ja3MoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbmRlciBob29rIHdpdGggYnJpZGdlIGxheWVyIHByb3ZpZGVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQnJpZGdlSG9vazxUUHJvcHMsIFRSZXN1bHQ+KFxuICBob29rOiAocHJvcHM6IFRQcm9wcykgPT4gVFJlc3VsdCxcbiAgb3B0aW9uczoge1xuICAgIGluaXRpYWxQcm9wcz86IFRQcm9wcztcbiAgICBicmlkZ2VDb25maWc/OiBCcmlkZ2VMYXllclRlc3RDb25maWc7XG4gICAgcmVuZGVyT3B0aW9ucz86IE9taXQ8UmVuZGVySG9va09wdGlvbnM8VFByb3BzPiwgJ3dyYXBwZXInPjtcbiAgfSA9IHt9XG4pOiBSZW5kZXJIb29rUmVzdWx0PFRSZXN1bHQsIFRQcm9wcz4gJiB7IFxuICB0ZXN0VXRpbHM6IEJyaWRnZUxheWVyVGVzdFV0aWxzO1xuICB3YWl0Rm9yV29ya2Zsb3c6IChwcmVkaWNhdGU6IChyZXN1bHQ6IFRSZXN1bHQpID0+IGJvb2xlYW4sIHRpbWVvdXQ/OiBudW1iZXIpID0+IFByb21pc2U8dm9pZD47XG59IHtcbiAgY29uc3QgeyBpbml0aWFsUHJvcHMsIGJyaWRnZUNvbmZpZyA9IHt9LCByZW5kZXJPcHRpb25zID0ge30gfSA9IG9wdGlvbnM7XG4gIFxuICBjb25zdCB0ZXN0VXRpbHMgPSBuZXcgQnJpZGdlTGF5ZXJUZXN0VXRpbHMoYnJpZGdlQ29uZmlnKTtcbiAgY29uc3Qgd3JhcHBlciA9IHRlc3RVdGlscy5jcmVhdGVCcmlkZ2VXcmFwcGVyKCk7XG5cbiAgY29uc3QgcmVzdWx0ID0gcmVuZGVySG9vayhob29rLCB7XG4gICAgaW5pdGlhbFByb3BzLFxuICAgIHdyYXBwZXIsXG4gICAgLi4ucmVuZGVyT3B0aW9ucyxcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFdhaXQgZm9yIHdvcmtmbG93IHN0YXRlIHRvIG1hdGNoIHByZWRpY2F0ZVxuICAgKi9cbiAgY29uc3Qgd2FpdEZvcldvcmtmbG93ID0gYXN5bmMgKFxuICAgIHByZWRpY2F0ZTogKHJlc3VsdDogVFJlc3VsdCkgPT4gYm9vbGVhbixcbiAgICB0aW1lb3V0OiBudW1iZXIgPSA1MDAwXG4gICk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgaWYgKCFwcmVkaWNhdGUocmVzdWx0LmN1cnJlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ya2Zsb3cgc3RhdGUgbm90IHlldCBtYXRjaGluZyBwcmVkaWNhdGUnKTtcbiAgICAgIH1cbiAgICB9LCB7IHRpbWVvdXQgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5yZXN1bHQsXG4gICAgdGVzdFV0aWxzLFxuICAgIHdhaXRGb3JXb3JrZmxvdyxcbiAgfTtcbn1cblxuLyoqXG4gKiBXb3JrZmxvdyB0ZXN0aW5nIHV0aWxpdGllc1xuICovXG5leHBvcnQgY2xhc3MgV29ya2Zsb3dUZXN0VXRpbHMge1xuICAvKipcbiAgICogQ3JlYXRlIG1vY2sgZmlsZXMgZm9yIHRlc3RpbmdcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVNb2NrRmlsZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJJbWFnZTogTW9ja1V0aWxzLmNyZWF0ZU1vY2tGaWxlKCd1c2VyLWltYWdlLWRhdGEnLCAndXNlci5qcGcnLCAnaW1hZ2UvanBlZycpLFxuICAgICAgYXBwYXJlbEltYWdlOiBNb2NrVXRpbHMuY3JlYXRlTW9ja0ZpbGUoJ2FwcGFyZWwtaW1hZ2UtZGF0YScsICdhcHBhcmVsLmpwZycsICdpbWFnZS9qcGVnJyksXG4gICAgICBpbnZhbGlkRmlsZTogTW9ja1V0aWxzLmNyZWF0ZU1vY2tGaWxlKCdpbnZhbGlkLWRhdGEnLCAnZG9jdW1lbnQudHh0JywgJ3RleHQvcGxhaW4nKSxcbiAgICAgIGxhcmdlRmlsZTogTW9ja1V0aWxzLmNyZWF0ZU1vY2tGaWxlKCd4Jy5yZXBlYXQoMTUgKiAxMDI0ICogMTAyNCksICdsYXJnZS5qcGcnLCAnaW1hZ2UvanBlZycpLCAvLyAxNU1CXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbW9jayBpbWFnZSBVUkxzXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTW9ja0ltYWdlVXJscygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlckltYWdlOiBNb2NrVXRpbHMuY3JlYXRlTW9ja0ltYWdlVXJsKCd1c2VyLWltYWdlLWRhdGEnKSxcbiAgICAgIGFwcGFyZWxJbWFnZTogTW9ja1V0aWxzLmNyZWF0ZU1vY2tJbWFnZVVybCgnYXBwYXJlbC1pbWFnZS1kYXRhJyksXG4gICAgICBnZW5lcmF0ZWRJbWFnZTogTW9ja1V0aWxzLmNyZWF0ZU1vY2tJbWFnZVVybCgnZ2VuZXJhdGVkLWltYWdlLWRhdGEnKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBtb2NrIHdvcmtmbG93IHN0YXRlXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTW9ja1dvcmtmbG93U3RhdGUob3ZlcnJpZGVzOiBhbnkgPSB7fSkge1xuICAgIHJldHVybiB7XG4gICAgICBpc0NhcHR1cmluZzogZmFsc2UsXG4gICAgICBsZWZ0Q2FyZEltYWdlOiBudWxsLFxuICAgICAgcmlnaHRDYXJkSW1hZ2U6IG51bGwsXG4gICAgICBzaG93UG9sYXJvaWQ6IGZhbHNlLFxuICAgICAgdXNlckltYWdlRmlsZTogbnVsbCxcbiAgICAgIGFwcGFyZWxJbWFnZUZpbGU6IG51bGwsXG4gICAgICBnZW5lcmF0ZWRJbWFnZTogbnVsbCxcbiAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAuLi5vdmVycmlkZXMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW11bGF0ZSBjb21wbGV0ZSB3b3JrZmxvd1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIHNpbXVsYXRlQ29tcGxldGVXb3JrZmxvdyhcbiAgICB0ZXN0VXRpbHM6IEJyaWRnZUxheWVyVGVzdFV0aWxzLFxuICAgIG1vY2tGaWxlczogUmV0dXJuVHlwZTx0eXBlb2YgV29ya2Zsb3dUZXN0VXRpbHMuY3JlYXRlTW9ja0ZpbGVzPlxuICApIHtcbiAgICAvLyBTZXR1cCBzdWNjZXNzZnVsIHJlc3BvbnNlc1xuICAgIHRlc3RVdGlscy5tb2NrRmlsZVJlYWQoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsdXNlci1pbWFnZS1kYXRhJyk7XG4gICAgdGVzdFV0aWxzLm1vY2tTdWNjZXNzZnVsQXBpQ2FsbCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJGaWxlOiBtb2NrRmlsZXMudXNlckltYWdlLFxuICAgICAgYXBwYXJlbEZpbGU6IG1vY2tGaWxlcy5hcHBhcmVsSW1hZ2UsXG4gICAgICBleHBlY3RlZFJlc3VsdDogJ21vY2stZ2VuZXJhdGVkLWltYWdlLWRhdGEnLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQZXJmb3JtYW5jZSB0ZXN0aW5nIHV0aWxpdGllcyBmb3IgYnJpZGdlIGxheWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBCcmlkZ2VQZXJmb3JtYW5jZVV0aWxzIHtcbiAgcHJpdmF0ZSBwZXJmb3JtYW5jZU1hcmtzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuXG4gIC8qKlxuICAgKiBTdGFydCBwZXJmb3JtYW5jZSBtZWFzdXJlbWVudFxuICAgKi9cbiAgc3RhcnRNZWFzdXJlbWVudChsYWJlbDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wZXJmb3JtYW5jZU1hcmtzLnNldChsYWJlbCwgcGVyZm9ybWFuY2Uubm93KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuZCBwZXJmb3JtYW5jZSBtZWFzdXJlbWVudFxuICAgKi9cbiAgZW5kTWVhc3VyZW1lbnQobGFiZWw6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gdGhpcy5wZXJmb3JtYW5jZU1hcmtzLmdldChsYWJlbCk7XG4gICAgaWYgKCFzdGFydFRpbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gc3RhcnQgdGltZSBmb3VuZCBmb3IgbGFiZWw6ICR7bGFiZWx9YCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgdGhpcy5wZXJmb3JtYW5jZU1hcmtzLmRlbGV0ZShsYWJlbCk7XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lYXN1cmUgaG9vayByZW5kZXIgdGltZVxuICAgKi9cbiAgYXN5bmMgbWVhc3VyZUhvb2tSZW5kZXI8VD4oXG4gICAgaG9va0ZuOiAoKSA9PiBULFxuICAgIGxhYmVsOiBzdHJpbmcgPSAnaG9vay1yZW5kZXInXG4gICk6IFByb21pc2U8eyByZXN1bHQ6IFQ7IGR1cmF0aW9uOiBudW1iZXIgfT4ge1xuICAgIHRoaXMuc3RhcnRNZWFzdXJlbWVudChsYWJlbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gaG9va0ZuKCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLmVuZE1lYXN1cmVtZW50KGxhYmVsKTtcbiAgICBcbiAgICByZXR1cm4geyByZXN1bHQsIGR1cmF0aW9uIH07XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IHBlcmZvcm1hbmNlIHRocmVzaG9sZFxuICAgKi9cbiAgYXNzZXJ0UGVyZm9ybWFuY2UoXG4gICAgZHVyYXRpb246IG51bWJlcixcbiAgICBtYXhEdXJhdGlvbjogbnVtYmVyLFxuICAgIG9wZXJhdGlvbjogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGlmIChkdXJhdGlvbiA+IG1heER1cmF0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBQZXJmb3JtYW5jZSBhc3NlcnRpb24gZmFpbGVkOiAke29wZXJhdGlvbn0gdG9vayAke2R1cmF0aW9ufW1zLCBleHBlY3RlZCA8ICR7bWF4RHVyYXRpb259bXNgXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4cG9ydCB1dGlsaXRpZXNcbiAqL1xuZXhwb3J0IHtcbiAgQnJpZGdlTGF5ZXJUZXN0VXRpbHMsXG4gIFdvcmtmbG93VGVzdFV0aWxzLFxuICBCcmlkZ2VQZXJmb3JtYW5jZVV0aWxzLFxuICByZW5kZXJCcmlkZ2VIb29rLFxufTtcblxuLyoqXG4gKiBEZWZhdWx0IGV4cG9ydFxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIEJyaWRnZUxheWVyVGVzdFV0aWxzLFxuICBXb3JrZmxvd1Rlc3RVdGlscyxcbiAgQnJpZGdlUGVyZm9ybWFuY2VVdGlscyxcbiAgcmVuZGVyQnJpZGdlSG9vayxcbn07Il0sIm5hbWVzIjpbIkJyaWRnZUxheWVyVGVzdFV0aWxzIiwiQnJpZGdlUGVyZm9ybWFuY2VVdGlscyIsIldvcmtmbG93VGVzdFV0aWxzIiwicmVuZGVyQnJpZGdlSG9vayIsIkRFRkFVTFRfQlJJREdFX0NPTkZJRyIsInF1ZXJ5Q2xpZW50Q29uZmlnIiwiZGVmYXVsdE9wdGlvbnMiLCJxdWVyaWVzIiwicmV0cnkiLCJnY1RpbWUiLCJtdXRhdGlvbnMiLCJkaXNhYmxlUmV0cmllcyIsImRpc2FibGVDYWNoZSIsIm9uRXJyb3IiLCJtb2NrVG9hc3QiLCJtb2NrRmlsZUFQSXMiLCJtb2NrRmV0Y2giLCJpbml0aWFsV29ya2Zsb3dTdGF0ZSIsIk11dGF0aW9uVGVzdFV0aWxzIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJmaW5hbENvbmZpZyIsIm1vY2tzIiwic2V0dXBNb2NrcyIsImZldGNoIiwiamVzdCIsImZuIiwiZ2xvYmFsIiwiZmlsZVJlYWRlciIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInJlYWRBc0RhdGFVUkwiLCJyZXN1bHQiLCJvbmxvYWQiLCJvbmVycm9yIiwiRmlsZVJlYWRlciIsIlVSTCIsIm1vY2tSZXR1cm5WYWx1ZSIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsInRvYXN0IiwiZ2V0TW9ja3MiLCJyZXNldE1vY2tzIiwiT2JqZWN0IiwidmFsdWVzIiwiZm9yRWFjaCIsIm1vY2siLCJtb2NrQ2xlYXIiLCJtb2NrU3VjY2Vzc2Z1bEFwaUNhbGwiLCJyZXNwb25zZSIsImltZ19nZW5lcmF0ZWQiLCJkZWxheSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIm9rIiwianNvbiIsIm1vY2tBcGlFcnJvciIsImVycm9yIiwic3RhdHVzIiwibW9ja0FwaVRpbWVvdXQiLCJ0aW1lb3V0TXMiLCJfIiwicmVqZWN0IiwiRXJyb3IiLCJtb2NrRmlsZVJlYWQiLCJyZWFkZXIiLCJmaWxlIiwidGFyZ2V0IiwibW9ja0ZpbGVSZWFkRXJyb3IiLCJjcmVhdGVCcmlkZ2VXcmFwcGVyIiwicXVlcnlDbGllbnQiLCJnZXRRdWVyeUNsaWVudCIsIkJyaWRnZVRlc3RXcmFwcGVyIiwiY2hpbGRyZW4iLCJUZXN0UHJvdmlkZXJzIiwiY2xlYW51cCIsInJlc2V0U3RhdGUiLCJob29rIiwib3B0aW9ucyIsImluaXRpYWxQcm9wcyIsImJyaWRnZUNvbmZpZyIsInJlbmRlck9wdGlvbnMiLCJ0ZXN0VXRpbHMiLCJ3cmFwcGVyIiwicmVuZGVySG9vayIsIndhaXRGb3JXb3JrZmxvdyIsInByZWRpY2F0ZSIsInRpbWVvdXQiLCJ3YWl0Rm9yIiwiY3VycmVudCIsImNyZWF0ZU1vY2tGaWxlcyIsInVzZXJJbWFnZSIsIk1vY2tVdGlscyIsImNyZWF0ZU1vY2tGaWxlIiwiYXBwYXJlbEltYWdlIiwiaW52YWxpZEZpbGUiLCJsYXJnZUZpbGUiLCJyZXBlYXQiLCJjcmVhdGVNb2NrSW1hZ2VVcmxzIiwiY3JlYXRlTW9ja0ltYWdlVXJsIiwiZ2VuZXJhdGVkSW1hZ2UiLCJjcmVhdGVNb2NrV29ya2Zsb3dTdGF0ZSIsIm92ZXJyaWRlcyIsImlzQ2FwdHVyaW5nIiwibGVmdENhcmRJbWFnZSIsInJpZ2h0Q2FyZEltYWdlIiwic2hvd1BvbGFyb2lkIiwidXNlckltYWdlRmlsZSIsImFwcGFyZWxJbWFnZUZpbGUiLCJoYXNFcnJvciIsInByb2dyZXNzIiwic2ltdWxhdGVDb21wbGV0ZVdvcmtmbG93IiwibW9ja0ZpbGVzIiwidXNlckZpbGUiLCJhcHBhcmVsRmlsZSIsImV4cGVjdGVkUmVzdWx0Iiwic3RhcnRNZWFzdXJlbWVudCIsImxhYmVsIiwicGVyZm9ybWFuY2VNYXJrcyIsInNldCIsInBlcmZvcm1hbmNlIiwibm93IiwiZW5kTWVhc3VyZW1lbnQiLCJzdGFydFRpbWUiLCJnZXQiLCJkdXJhdGlvbiIsImRlbGV0ZSIsIm1lYXN1cmVIb29rUmVuZGVyIiwiaG9va0ZuIiwiYXNzZXJ0UGVyZm9ybWFuY2UiLCJtYXhEdXJhdGlvbiIsIm9wZXJhdGlvbiIsIk1hcCJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7Ozs7Ozs7OztJQTZaQ0Esb0JBQW9CO2VBQXBCQTs7SUFFQUMsc0JBQXNCO2VBQXRCQTs7SUFEQUMsaUJBQWlCO2VBQWpCQTs7SUFLRjs7Q0FFQyxHQUNELE9BS0U7ZUFMRjs7SUFORUMsZ0JBQWdCO2VBQWhCQTs7Ozs4REE5WmdCO3dCQUM4QztxQ0FTekQ7Ozs7OztBQWdCUDs7Q0FFQyxHQUNELE1BQU1DLHdCQUF5RDtJQUM3REMsbUJBQW1CO1FBQ2pCQyxnQkFBZ0I7WUFDZEMsU0FBUztnQkFBRUMsT0FBTztnQkFBT0MsUUFBUTtZQUFFO1lBQ25DQyxXQUFXO2dCQUFFRixPQUFPO1lBQU07UUFDNUI7SUFDRjtJQUNBRyxnQkFBZ0I7SUFDaEJDLGNBQWM7SUFDZEMsU0FBUyxLQUFPO0lBQ2hCQyxXQUFXO0lBQ1hDLGNBQWM7SUFDZEMsV0FBVztJQUNYQyxzQkFBc0I7QUFDeEI7QUFLTyxNQUFNakIsNkJBQTZCa0Isc0NBQWlCO0lBU3pEQyxZQUFZQyxTQUFnQyxDQUFDLENBQUMsQ0FBRTtRQUM5QyxNQUFNQyxjQUFjO1lBQUUsR0FBR2pCLHFCQUFxQjtZQUFFLEdBQUdnQixNQUFNO1FBQUM7UUFDMUQsS0FBSyxDQUFDQyxtQkFUQUMsUUFLSixDQUFD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
{"version":3,"sources":["/Users/willstreeter/WebstormProjects/vibe-coding/those-people/The-Sus-Fit-gp/__tests__/bridge-layer/usePageComponentState.test.tsx"],"sourcesContent":["/**\n * @jest-environment jsdom\n */\nimport { act, waitFor } from '@testing-library/react';\nimport { \n  renderBridgeHook, \n  MockAPIUtils, \n  WorkflowTestUtils,\n  setupTestEnvironment \n} from '@test/index';\nimport { usePageComponentState } from '@/hooks/useBackwardCompatibility';\n\n// Mock business layer dependencies\njest.mock('../../src/business-layer', () => ({\n  useTryonMutation: jest.fn(() => ({\n    mutate: jest.fn(),\n    mutateAsync: jest.fn(),\n    data: undefined,\n    error: null,\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    reset: jest.fn(),\n  })),\n  useImageProcessing: jest.fn(() => ({\n    processImage: jest.fn(),\n    isProcessing: false,\n    error: null,\n  })),\n}));\n\n// Setup test environment\nsetupTestEnvironment();\n\ndescribe('usePageComponentState', () => {\n  // Setup MSW server hooks at describe level\n  MockAPIUtils.setupServer();\n\n  describe('Initialization', () => {\n    it('should initialize with correct default state', () => {\n      const { result } = renderBridgeHook(() => usePageComponentState());\n\n      expect(result.current.isCapturing).toBe(false);\n      expect(result.current.leftCardImage).toBeNull();\n      expect(result.current.rightCardImage).toBeNull();\n      expect(result.current.showPolaroid).toBe(false);\n      expect(result.current.userImageFile).toBeNull();\n      expect(result.current.apparelImageFile).toBeNull();\n      expect(result.current.generatedImage).toBeNull();\n      expect(result.current.hasError).toBe(false);\n    });\n\n    it('should provide all required handler functions', () => {\n      const { result } = renderBridgeHook(() => usePageComponentState());\n\n      expect(typeof result.current.handleUserFileUpload).toBe('function');\n      expect(typeof result.current.handleApparelFileUpload).toBe('function');\n      expect(typeof result.current.handleLeftCardImageUpload).toBe('function');\n      expect(typeof result.current.handleRightCardImageUpload).toBe('function');\n      expect(typeof result.current.handleCameraButtonClick).toBe('function');\n      expect(typeof result.current.handleGenerationStart).toBe('function');\n      expect(typeof result.current.handleGenerationComplete).toBe('function');\n      expect(typeof result.current.handleClosePolaroid).toBe('function');\n      expect(typeof result.current.handleRetryGeneration).toBe('function');\n    });\n  });\n\n  describe('File Upload Handling', () => {\n    it('should handle user file upload correctly', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Mock file reading\n      testUtils.mockFileRead('data:image/jpeg;base64,user-image-data');\n\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n      });\n    });\n\n    it('should handle apparel file upload correctly', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Mock file reading\n      testUtils.mockFileRead('data:image/jpeg;base64,apparel-image-data');\n\n      act(() => {\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n    });\n\n    it('should handle left card image upload', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockImageUrl = 'data:image/jpeg;base64,left-card-image';\n\n      // Mock file reading and URL creation\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-left-image');\n\n      act(() => {\n        result.current.handleLeftCardImageUpload(mockImageUrl);\n      });\n\n      await waitFor(() => {\n        expect(result.current.leftCardImage).toBeTruthy();\n      });\n    });\n\n    it('should handle right card image upload', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockImageUrl = 'data:image/jpeg;base64,right-card-image';\n\n      // Mock file reading and URL creation\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-right-image');\n\n      act(() => {\n        result.current.handleRightCardImageUpload(mockImageUrl);\n      });\n\n      await waitFor(() => {\n        expect(result.current.rightCardImage).toBeTruthy();\n      });\n    });\n  });\n\n  describe('Try-on Generation Workflow', () => {\n    it('should handle complete try-on workflow successfully', async () => {\n      const { result, testUtils, waitForWorkflow } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Setup successful API response\n      testUtils.mockSuccessfulApiCall({\n        img_generated: 'data:image/jpeg;base64,generated-image-data'\n      });\n\n      // Mock file reading\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n\n      // Upload files\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      // Wait for files to be uploaded\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n\n      // Start generation\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      // Wait for capturing state\n      await waitFor(() => {\n        expect(result.current.isCapturing).toBe(true);\n        expect(result.current.showPolaroid).toBe(true);\n      });\n\n      // Wait for generation completion\n      await waitFor(() => {\n        expect(result.current.isCapturing).toBe(false);\n        expect(result.current.generatedImage).toBeTruthy();\n      }, { timeout: 10000 });\n    });\n\n    it('should handle API errors gracefully', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Setup API error response\n      testUtils.mockApiError('Server error', 500);\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n\n      // Upload files\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n\n      // Start generation\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      // Wait for error state\n      await waitFor(() => {\n        expect(result.current.hasError).toBe(true);\n        expect(result.current.isCapturing).toBe(false);\n      }, { timeout: 10000 });\n    });\n\n    it('should handle retry generation', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // First attempt fails\n      testUtils.mockApiError('Server error', 500);\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n\n      // Upload files and generate (will fail)\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      await waitFor(() => {\n        expect(result.current.hasError).toBe(true);\n      });\n\n      // Setup successful retry\n      testUtils.mockSuccessfulApiCall({\n        img_generated: 'data:image/jpeg;base64,retry-generated-image'\n      });\n\n      // Retry generation\n      act(() => {\n        result.current.handleRetryGeneration();\n      });\n\n      await waitFor(() => {\n        expect(result.current.hasError).toBe(false);\n        expect(result.current.generatedImage).toBeTruthy();\n      }, { timeout: 10000 });\n    });\n  });\n\n  describe('Modal State Management', () => {\n    it('should handle polaroid close correctly', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n\n      // Setup successful generation first\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n      testUtils.mockSuccessfulApiCall();\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n\n      // Complete workflow\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      await waitFor(() => {\n        expect(result.current.showPolaroid).toBe(true);\n      });\n\n      // Close polaroid\n      act(() => {\n        result.current.handleClosePolaroid();\n      });\n\n      await waitFor(() => {\n        expect(result.current.showPolaroid).toBe(false);\n      });\n    });\n\n    it('should handle generation callbacks correctly', async () => {\n      const { result } = renderBridgeHook(() => usePageComponentState());\n\n      // Test generation start callback\n      act(() => {\n        result.current.handleGenerationStart();\n      });\n\n      // Test generation complete callback\n      act(() => {\n        result.current.handleGenerationComplete('mock-image-url');\n      });\n\n      // These are legacy callbacks that should not throw errors\n      expect(true).toBe(true); // Test passes if no errors thrown\n    });\n  });\n\n  describe('Error Scenarios', () => {\n    it('should handle file upload without both images', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Upload only user image\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n      \n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n      });\n\n      // Try to generate without apparel image\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      // Should not start capturing without both images\n      expect(result.current.isCapturing).toBe(false);\n      expect(result.current.showPolaroid).toBe(false);\n    });\n\n    it('should handle API timeout gracefully', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Setup timeout\n      testUtils.mockApiTimeout(1000);\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n\n      // Upload files\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n\n      // Start generation\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      // Wait for timeout error\n      await waitFor(() => {\n        expect(result.current.hasError).toBe(true);\n        expect(result.current.isCapturing).toBe(false);\n      }, { timeout: 15000 });\n    });\n\n    it('should handle file reading errors', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Mock file read error\n      testUtils.mockFileReadError('File read failed');\n\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n      });\n\n      // File should not be set due to read error\n      await waitFor(() => {\n        // The error should be handled gracefully\n        expect(result.current.userImageFile).toBeNull();\n      });\n    });\n  });\n\n  describe('State Consistency', () => {\n    it('should maintain state consistency throughout workflow', async () => {\n      const { result, testUtils } = renderBridgeHook(() => usePageComponentState());\n      const mockFiles = WorkflowTestUtils.createMockFiles();\n\n      // Track state changes\n      const stateChanges: any[] = [];\n      \n      // Initial state\n      stateChanges.push({\n        step: 'initial',\n        isCapturing: result.current.isCapturing,\n        hasFiles: !!result.current.userImageFile && !!result.current.apparelImageFile,\n        showPolaroid: result.current.showPolaroid,\n        hasResult: !!result.current.generatedImage,\n        hasError: result.current.hasError,\n      });\n\n      testUtils.mockSuccessfulApiCall();\n      testUtils.mockFileRead('data:image/jpeg;base64,processed-image');\n\n      // Upload files\n      act(() => {\n        result.current.handleUserFileUpload(mockFiles.userImage);\n        result.current.handleApparelFileUpload(mockFiles.apparelImage);\n      });\n\n      await waitFor(() => {\n        expect(result.current.userImageFile).toBe(mockFiles.userImage);\n        expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);\n      });\n\n      stateChanges.push({\n        step: 'files-uploaded',\n        isCapturing: result.current.isCapturing,\n        hasFiles: !!result.current.userImageFile && !!result.current.apparelImageFile,\n        showPolaroid: result.current.showPolaroid,\n        hasResult: !!result.current.generatedImage,\n        hasError: result.current.hasError,\n      });\n\n      // Start generation\n      act(() => {\n        result.current.handleCameraButtonClick();\n      });\n\n      await waitFor(() => {\n        expect(result.current.isCapturing).toBe(true);\n        expect(result.current.showPolaroid).toBe(true);\n      });\n\n      stateChanges.push({\n        step: 'generation-started',\n        isCapturing: result.current.isCapturing,\n        hasFiles: !!result.current.userImageFile && !!result.current.apparelImageFile,\n        showPolaroid: result.current.showPolaroid,\n        hasResult: !!result.current.generatedImage,\n        hasError: result.current.hasError,\n      });\n\n      // Wait for completion\n      await waitFor(() => {\n        expect(result.current.isCapturing).toBe(false);\n        expect(result.current.generatedImage).toBeTruthy();\n      }, { timeout: 10000 });\n\n      stateChanges.push({\n        step: 'generation-complete',\n        isCapturing: result.current.isCapturing,\n        hasFiles: !!result.current.userImageFile && !!result.current.apparelImageFile,\n        showPolaroid: result.current.showPolaroid,\n        hasResult: !!result.current.generatedImage,\n        hasError: result.current.hasError,\n      });\n\n      // Verify state progression\n      expect(stateChanges[0]).toEqual({\n        step: 'initial',\n        isCapturing: false,\n        hasFiles: false,\n        showPolaroid: false,\n        hasResult: false,\n        hasError: false,\n      });\n\n      expect(stateChanges[1]).toEqual({\n        step: 'files-uploaded',\n        isCapturing: false,\n        hasFiles: true,\n        showPolaroid: false,\n        hasResult: false,\n        hasError: false,\n      });\n\n      expect(stateChanges[2]).toEqual({\n        step: 'generation-started',\n        isCapturing: true,\n        hasFiles: true,\n        showPolaroid: true,\n        hasResult: false,\n        hasError: false,\n      });\n\n      expect(stateChanges[3]).toEqual({\n        step: 'generation-complete',\n        isCapturing: false,\n        hasFiles: true,\n        showPolaroid: true,\n        hasResult: true,\n        hasError: false,\n      });\n    });\n  });\n});"],"names":["jest","mock","useTryonMutation","fn","mutate","mutateAsync","data","undefined","error","isError","isSuccess","isLoading","reset","useImageProcessing","processImage","isProcessing","setupTestEnvironment","describe","MockAPIUtils","setupServer","it","result","renderBridgeHook","usePageComponentState","expect","current","isCapturing","toBe","leftCardImage","toBeNull","rightCardImage","showPolaroid","userImageFile","apparelImageFile","generatedImage","hasError","handleUserFileUpload","handleApparelFileUpload","handleLeftCardImageUpload","handleRightCardImageUpload","handleCameraButtonClick","handleGenerationStart","handleGenerationComplete","handleClosePolaroid","handleRetryGeneration","testUtils","mockFiles","WorkflowTestUtils","createMockFiles","mockFileRead","act","userImage","waitFor","apparelImage","mockImageUrl","toBeTruthy","waitForWorkflow","mockSuccessfulApiCall","img_generated","timeout","mockApiError","mockApiTimeout","mockFileReadError","stateChanges","push","step","hasFiles","hasResult","toEqual"],"mappings":"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"}
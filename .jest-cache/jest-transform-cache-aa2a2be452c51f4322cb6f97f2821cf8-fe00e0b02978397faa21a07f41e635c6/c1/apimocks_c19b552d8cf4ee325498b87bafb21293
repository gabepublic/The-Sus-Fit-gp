ffb99267d8f9cb9f0742595ec48fa209
/**
 * API Mocks using MSW (Mock Service Worker)
 * Comprehensive mocking strategies for external API calls
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    API_ENDPOINTS: function() {
        return API_ENDPOINTS;
    },
    DEFAULT_MOCK_RESPONSES: function() {
        return DEFAULT_MOCK_RESPONSES;
    },
    MockAPIUtils: function() {
        return MockAPIUtils;
    },
    /**
 * Default export
 */ default: function() {
        return _default;
    },
    errorHandlers: function() {
        return errorHandlers;
    },
    handlers: function() {
        return handlers;
    },
    openAIMocks: function() {
        return openAIMocks;
    },
    performanceHandlers: function() {
        return performanceHandlers;
    },
    server: function() {
        return server;
    }
});
const _msw = require("msw");
const _node = require("msw/node");
const DEFAULT_MOCK_RESPONSES = {
    success: {
        img_generated: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAAAAAAAMockGeneratedImageData==',
        metadata: {
            processingTime: 2500,
            modelVersion: 'v1.2.0',
            timestamp: new Date().toISOString()
        }
    },
    error: {
        error: 'Internal Server Error',
        details: 'Failed to process try-on request',
        code: 'PROCESSING_ERROR'
    },
    validation: {
        error: 'Validation Error',
        details: 'Invalid image format or size',
        code: 'VALIDATION_ERROR'
    },
    timeout: {
        error: 'Request Timeout',
        details: 'Processing took too long',
        code: 'TIMEOUT_ERROR'
    },
    rateLimit: {
        error: 'Too Many Requests',
        details: 'Rate limit exceeded',
        code: 'RATE_LIMIT_ERROR'
    }
};
const API_ENDPOINTS = {
    tryon: '/api/tryon',
    health: '/api/health',
    upload: '/api/upload'
};
/**
 * MSW request handlers
 */ const handlers = [
    // Try-on API endpoint - success case
    _msw.http.post(API_ENDPOINTS.tryon, async ({ request })=>{
        const body = await request.json();
        // Validate request structure
        if (!body.modelImage || !body.apparelImages || !Array.isArray(body.apparelImages)) {
            return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.validation, {
                status: 400
            });
        }
        // Simulate processing delay
        await (0, _msw.delay)(100);
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.success);
    }),
    // Health check endpoint
    _msw.http.get(API_ENDPOINTS.health, ()=>{
        return _msw.HttpResponse.json({
            status: 'ok',
            timestamp: new Date().toISOString()
        });
    }),
    // File upload endpoint
    _msw.http.post(API_ENDPOINTS.upload, async ({ request })=>{
        const formData = await request.formData();
        const file = formData.get('file');
        if (!file) {
            return _msw.HttpResponse.json({
                error: 'No file provided'
            }, {
                status: 400
            });
        }
        return _msw.HttpResponse.json({
            url: `mock-url://uploaded-${file.name}`,
            size: file.size,
            type: file.type
        });
    })
];
/**
 * Error scenario handlers
 */ const errorHandlers = {
    // Server error (500)
    serverError: _msw.http.post(API_ENDPOINTS.tryon, ()=>{
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.error, {
            status: 500
        });
    }),
    // Validation error (400)
    validationError: _msw.http.post(API_ENDPOINTS.tryon, ()=>{
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.validation, {
            status: 400
        });
    }),
    // Timeout simulation
    timeout: _msw.http.post(API_ENDPOINTS.tryon, async ()=>{
        await (0, _msw.delay)(30000); // Simulate very slow response
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.timeout, {
            status: 408
        });
    }),
    // Rate limiting (429)
    rateLimit: _msw.http.post(API_ENDPOINTS.tryon, ()=>{
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.rateLimit, {
            status: 429
        });
    }),
    // Network error
    networkError: _msw.http.post(API_ENDPOINTS.tryon, ()=>{
        return _msw.HttpResponse.error();
    }),
    // Invalid JSON response
    invalidJson: _msw.http.post(API_ENDPOINTS.tryon, ()=>{
        return new _msw.HttpResponse('invalid json response', {
            status: 200,
            headers: {
                'Content-Type': 'application/json'
            }
        });
    }),
    // Missing required fields in response
    incompleteResponse: _msw.http.post(API_ENDPOINTS.tryon, ()=>{
        return _msw.HttpResponse.json({
            metadata: {
                processingTime: 1000
            }
        }, {
            status: 200
        });
    })
};
/**
 * Performance scenario handlers
 */ const performanceHandlers = {
    // Fast response (< 100ms)
    fast: _msw.http.post(API_ENDPOINTS.tryon, async ()=>{
        await (0, _msw.delay)(50);
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.success);
    }),
    // Slow response (> 5s)
    slow: _msw.http.post(API_ENDPOINTS.tryon, async ()=>{
        await (0, _msw.delay)(5000);
        return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.success);
    }),
    // Variable response times
    variable: _msw.http.post(API_ENDPOINTS.tryon, async ()=>{
        const delays = [
            100,
            500,
            1000,
            2000,
            3000
        ];
        const randomDelay = delays[Math.floor(Math.random() * delays.length)];
        await (0, _msw.delay)(randomDelay);
        return _msw.HttpResponse.json({
            ...DEFAULT_MOCK_RESPONSES.success,
            metadata: {
                ...DEFAULT_MOCK_RESPONSES.success.metadata,
                processingTime: randomDelay
            }
        });
    })
};
/**
 * Test server setup
 */ const server = (0, _node.setupServer)(...handlers);
/**
 * Mock API utilities
 */ class MockAPIUtils {
    /**
   * Setup MSW server for tests
   */ static setupServer() {
        // Enable API mocking before all tests
        beforeAll(()=>server.listen({
                onUnhandledRequest: 'error'
            }));
        // Reset handlers after each test
        afterEach(()=>server.resetHandlers());
        // Clean up after all tests
        afterAll(()=>server.close());
    }
    /**
   * Use specific error scenario
   */ static useErrorScenario(scenario) {
        server.use(errorHandlers[scenario]);
    }
    /**
   * Use specific performance scenario
   */ static usePerformanceScenario(scenario) {
        server.use(performanceHandlers[scenario]);
    }
    /**
   * Use custom handler
   */ static useCustomHandler(handler) {
        server.use(handler);
    }
    /**
   * Create custom try-on response
   */ static createCustomTryonHandler(response, options = {}) {
        const { status = 200, delay: delayMs = 0, shouldFail = false } = options;
        return _msw.http.post(API_ENDPOINTS.tryon, async ()=>{
            if (delayMs > 0) {
                await (0, _msw.delay)(delayMs);
            }
            if (shouldFail) {
                return _msw.HttpResponse.json(DEFAULT_MOCK_RESPONSES.error, {
                    status: 500
                });
            }
            const fullResponse = {
                ...DEFAULT_MOCK_RESPONSES.success,
                ...response
            };
            return _msw.HttpResponse.json(fullResponse, {
                status
            });
        });
    }
    /**
   * Verify API calls
   */ static getApiCalls() {
        // Note: This would require implementing call tracking in the handlers
        // For now, return empty array - could be enhanced with call tracking
        return [];
    }
    /**
   * Reset all mocks and call history
   */ static reset() {
        server.resetHandlers();
    }
    /**
   * Create mock file upload handler
   */ static createFileUploadHandler(response = {
        url: 'mock-upload-url'
    }, options = {}) {
        const { status = 200, delay: delayMs = 0 } = options;
        return _msw.http.post(API_ENDPOINTS.upload, async ({ request })=>{
            if (delayMs > 0) {
                await (0, _msw.delay)(delayMs);
            }
            const formData = await request.formData();
            const file = formData.get('file');
            return _msw.HttpResponse.json({
                ...response,
                originalName: file?.name,
                size: file?.size,
                type: file?.type
            }, {
                status
            });
        });
    }
}
/**
 * OpenAI API mocks (if needed for testing external integrations)
 */ const openAIMocks = {
    // Mock OpenAI API responses
    completion: _msw.http.post('https://api.openai.com/v1/completions', ()=>{
        return _msw.HttpResponse.json({
            id: 'cmpl-mock',
            object: 'text_completion',
            created: Date.now(),
            model: 'gpt-3.5-turbo',
            choices: [
                {
                    text: 'Mock completion response',
                    index: 0,
                    logprobs: null,
                    finish_reason: 'stop'
                }
            ]
        });
    }),
    // Mock image generation
    imageGeneration: _msw.http.post('https://api.openai.com/v1/images/generations', ()=>{
        return _msw.HttpResponse.json({
            created: Date.now(),
            data: [
                {
                    url: 'https://mock-image-url.com/generated-image.png'
                }
            ]
        });
    })
};
const _default = {
    server,
    handlers,
    errorHandlers,
    performanceHandlers,
    MockAPIUtils,
    openAIMocks,
    DEFAULT_MOCK_RESPONSES,
    API_ENDPOINTS
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL3Rlc3QtdXRpbHMvYXBpLW1vY2tzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQVBJIE1vY2tzIHVzaW5nIE1TVyAoTW9jayBTZXJ2aWNlIFdvcmtlcilcbiAqIENvbXByZWhlbnNpdmUgbW9ja2luZyBzdHJhdGVnaWVzIGZvciBleHRlcm5hbCBBUEkgY2FsbHNcbiAqL1xuXG5pbXBvcnQgeyBodHRwLCBIdHRwUmVzcG9uc2UsIGRlbGF5IH0gZnJvbSAnbXN3JztcbmltcG9ydCB7IHNldHVwU2VydmVyIH0gZnJvbSAnbXN3L25vZGUnO1xuXG4vKipcbiAqIE1vY2sgcmVzcG9uc2UgdHlwZXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNb2NrVHJ5b25SZXNwb25zZSB7XG4gIGltZ19nZW5lcmF0ZWQ6IHN0cmluZztcbiAgbWV0YWRhdGE/OiB7XG4gICAgcHJvY2Vzc2luZ1RpbWU6IG51bWJlcjtcbiAgICBtb2RlbFZlcnNpb246IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2NrRXJyb3JSZXNwb25zZSB7XG4gIGVycm9yOiBzdHJpbmc7XG4gIGRldGFpbHM/OiBzdHJpbmc7XG4gIGNvZGU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogRGVmYXVsdCBtb2NrIHJlc3BvbnNlc1xuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9NT0NLX1JFU1BPTlNFUyA9IHtcbiAgc3VjY2Vzczoge1xuICAgIGltZ19nZW5lcmF0ZWQ6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUVBQUFBQUFBTW9ja0dlbmVyYXRlZEltYWdlRGF0YT09JyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgcHJvY2Vzc2luZ1RpbWU6IDI1MDAsXG4gICAgICBtb2RlbFZlcnNpb246ICd2MS4yLjAnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSxcbiAgfSBhcyBNb2NrVHJ5b25SZXNwb25zZSxcbiAgXG4gIGVycm9yOiB7XG4gICAgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLFxuICAgIGRldGFpbHM6ICdGYWlsZWQgdG8gcHJvY2VzcyB0cnktb24gcmVxdWVzdCcsXG4gICAgY29kZTogJ1BST0NFU1NJTkdfRVJST1InLFxuICB9IGFzIE1vY2tFcnJvclJlc3BvbnNlLFxuICBcbiAgdmFsaWRhdGlvbjoge1xuICAgIGVycm9yOiAnVmFsaWRhdGlvbiBFcnJvcicsXG4gICAgZGV0YWlsczogJ0ludmFsaWQgaW1hZ2UgZm9ybWF0IG9yIHNpemUnLFxuICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgfSBhcyBNb2NrRXJyb3JSZXNwb25zZSxcbiAgXG4gIHRpbWVvdXQ6IHtcbiAgICBlcnJvcjogJ1JlcXVlc3QgVGltZW91dCcsXG4gICAgZGV0YWlsczogJ1Byb2Nlc3NpbmcgdG9vayB0b28gbG9uZycsXG4gICAgY29kZTogJ1RJTUVPVVRfRVJST1InLFxuICB9IGFzIE1vY2tFcnJvclJlc3BvbnNlLFxuICBcbiAgcmF0ZUxpbWl0OiB7XG4gICAgZXJyb3I6ICdUb28gTWFueSBSZXF1ZXN0cycsXG4gICAgZGV0YWlsczogJ1JhdGUgbGltaXQgZXhjZWVkZWQnLFxuICAgIGNvZGU6ICdSQVRFX0xJTUlUX0VSUk9SJyxcbiAgfSBhcyBNb2NrRXJyb3JSZXNwb25zZSxcbn07XG5cbi8qKlxuICogQVBJIGVuZHBvaW50IGNvbmZpZ3VyYXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBBUElfRU5EUE9JTlRTID0ge1xuICB0cnlvbjogJy9hcGkvdHJ5b24nLFxuICBoZWFsdGg6ICcvYXBpL2hlYWx0aCcsXG4gIHVwbG9hZDogJy9hcGkvdXBsb2FkJyxcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogTVNXIHJlcXVlc3QgaGFuZGxlcnNcbiAqL1xuY29uc3QgaGFuZGxlcnMgPSBbXG4gIC8vIFRyeS1vbiBBUEkgZW5kcG9pbnQgLSBzdWNjZXNzIGNhc2VcbiAgaHR0cC5wb3N0KEFQSV9FTkRQT0lOVFMudHJ5b24sIGFzeW5jICh7IHJlcXVlc3QgfSkgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKSBhcyBhbnk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVxdWVzdCBzdHJ1Y3R1cmVcbiAgICBpZiAoIWJvZHkubW9kZWxJbWFnZSB8fCAhYm9keS5hcHBhcmVsSW1hZ2VzIHx8ICFBcnJheS5pc0FycmF5KGJvZHkuYXBwYXJlbEltYWdlcykpIHtcbiAgICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbihERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnZhbGlkYXRpb24sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNpbXVsYXRlIHByb2Nlc3NpbmcgZGVsYXlcbiAgICBhd2FpdCBkZWxheSgxMDApO1xuICAgIFxuICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbihERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnN1Y2Nlc3MpO1xuICB9KSxcblxuICAvLyBIZWFsdGggY2hlY2sgZW5kcG9pbnRcbiAgaHR0cC5nZXQoQVBJX0VORFBPSU5UUy5oZWFsdGgsICgpID0+IHtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oeyBzdGF0dXM6ICdvaycsIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pO1xuICB9KSxcblxuICAvLyBGaWxlIHVwbG9hZCBlbmRwb2ludFxuICBodHRwLnBvc3QoQVBJX0VORFBPSU5UUy51cGxvYWQsIGFzeW5jICh7IHJlcXVlc3QgfSkgPT4ge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ZpbGUnKSBhcyBGaWxlO1xuICAgIFxuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIEh0dHBSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyBmaWxlIHByb3ZpZGVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oe1xuICAgICAgdXJsOiBgbW9jay11cmw6Ly91cGxvYWRlZC0ke2ZpbGUubmFtZX1gLFxuICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgIH0pO1xuICB9KSxcbl07XG5cbi8qKlxuICogRXJyb3Igc2NlbmFyaW8gaGFuZGxlcnNcbiAqL1xuY29uc3QgZXJyb3JIYW5kbGVycyA9IHtcbiAgLy8gU2VydmVyIGVycm9yICg1MDApXG4gIHNlcnZlckVycm9yOiBodHRwLnBvc3QoQVBJX0VORFBPSU5UUy50cnlvbiwgKCkgPT4ge1xuICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbihERUZBVUxUX01PQ0tfUkVTUE9OU0VTLmVycm9yLCB7IHN0YXR1czogNTAwIH0pO1xuICB9KSxcblxuICAvLyBWYWxpZGF0aW9uIGVycm9yICg0MDApXG4gIHZhbGlkYXRpb25FcnJvcjogaHR0cC5wb3N0KEFQSV9FTkRQT0lOVFMudHJ5b24sICgpID0+IHtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oREVGQVVMVF9NT0NLX1JFU1BPTlNFUy52YWxpZGF0aW9uLCB7IHN0YXR1czogNDAwIH0pO1xuICB9KSxcblxuICAvLyBUaW1lb3V0IHNpbXVsYXRpb25cbiAgdGltZW91dDogaHR0cC5wb3N0KEFQSV9FTkRQT0lOVFMudHJ5b24sIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkZWxheSgzMDAwMCk7IC8vIFNpbXVsYXRlIHZlcnkgc2xvdyByZXNwb25zZVxuICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbihERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnRpbWVvdXQsIHsgc3RhdHVzOiA0MDggfSk7XG4gIH0pLFxuXG4gIC8vIFJhdGUgbGltaXRpbmcgKDQyOSlcbiAgcmF0ZUxpbWl0OiBodHRwLnBvc3QoQVBJX0VORFBPSU5UUy50cnlvbiwgKCkgPT4ge1xuICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbihERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnJhdGVMaW1pdCwgeyBzdGF0dXM6IDQyOSB9KTtcbiAgfSksXG5cbiAgLy8gTmV0d29yayBlcnJvclxuICBuZXR3b3JrRXJyb3I6IGh0dHAucG9zdChBUElfRU5EUE9JTlRTLnRyeW9uLCAoKSA9PiB7XG4gICAgcmV0dXJuIEh0dHBSZXNwb25zZS5lcnJvcigpO1xuICB9KSxcblxuICAvLyBJbnZhbGlkIEpTT04gcmVzcG9uc2VcbiAgaW52YWxpZEpzb246IGh0dHAucG9zdChBUElfRU5EUE9JTlRTLnRyeW9uLCAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBIdHRwUmVzcG9uc2UoJ2ludmFsaWQganNvbiByZXNwb25zZScsIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgfSk7XG4gIH0pLFxuXG4gIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzIGluIHJlc3BvbnNlXG4gIGluY29tcGxldGVSZXNwb25zZTogaHR0cC5wb3N0KEFQSV9FTkRQT0lOVFMudHJ5b24sICgpID0+IHtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oeyBtZXRhZGF0YTogeyBwcm9jZXNzaW5nVGltZTogMTAwMCB9IH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gIH0pLFxufTtcblxuLyoqXG4gKiBQZXJmb3JtYW5jZSBzY2VuYXJpbyBoYW5kbGVyc1xuICovXG5jb25zdCBwZXJmb3JtYW5jZUhhbmRsZXJzID0ge1xuICAvLyBGYXN0IHJlc3BvbnNlICg8IDEwMG1zKVxuICBmYXN0OiBodHRwLnBvc3QoQVBJX0VORFBPSU5UUy50cnlvbiwgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGRlbGF5KDUwKTtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oREVGQVVMVF9NT0NLX1JFU1BPTlNFUy5zdWNjZXNzKTtcbiAgfSksXG5cbiAgLy8gU2xvdyByZXNwb25zZSAoPiA1cylcbiAgc2xvdzogaHR0cC5wb3N0KEFQSV9FTkRQT0lOVFMudHJ5b24sIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkZWxheSg1MDAwKTtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oREVGQVVMVF9NT0NLX1JFU1BPTlNFUy5zdWNjZXNzKTtcbiAgfSksXG5cbiAgLy8gVmFyaWFibGUgcmVzcG9uc2UgdGltZXNcbiAgdmFyaWFibGU6IGh0dHAucG9zdChBUElfRU5EUE9JTlRTLnRyeW9uLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZGVsYXlzID0gWzEwMCwgNTAwLCAxMDAwLCAyMDAwLCAzMDAwXTtcbiAgICBjb25zdCByYW5kb21EZWxheSA9IGRlbGF5c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkZWxheXMubGVuZ3RoKV07XG4gICAgYXdhaXQgZGVsYXkocmFuZG9tRGVsYXkpO1xuICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbih7XG4gICAgICAuLi5ERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnN1Y2Nlc3MsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICAuLi5ERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnN1Y2Nlc3MubWV0YWRhdGEhLFxuICAgICAgICBwcm9jZXNzaW5nVGltZTogcmFuZG9tRGVsYXksXG4gICAgICB9LFxuICAgIH0pO1xuICB9KSxcbn07XG5cbi8qKlxuICogVGVzdCBzZXJ2ZXIgc2V0dXBcbiAqL1xuY29uc3Qgc2VydmVyID0gc2V0dXBTZXJ2ZXIoLi4uaGFuZGxlcnMpO1xuXG4vKipcbiAqIE1vY2sgQVBJIHV0aWxpdGllc1xuICovXG5jbGFzcyBNb2NrQVBJVXRpbHMge1xuICAvKipcbiAgICogU2V0dXAgTVNXIHNlcnZlciBmb3IgdGVzdHNcbiAgICovXG4gIHN0YXRpYyBzZXR1cFNlcnZlcigpIHtcbiAgICAvLyBFbmFibGUgQVBJIG1vY2tpbmcgYmVmb3JlIGFsbCB0ZXN0c1xuICAgIGJlZm9yZUFsbCgoKSA9PiBzZXJ2ZXIubGlzdGVuKHsgb25VbmhhbmRsZWRSZXF1ZXN0OiAnZXJyb3InIH0pKTtcbiAgICBcbiAgICAvLyBSZXNldCBoYW5kbGVycyBhZnRlciBlYWNoIHRlc3RcbiAgICBhZnRlckVhY2goKCkgPT4gc2VydmVyLnJlc2V0SGFuZGxlcnMoKSk7XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgYWZ0ZXIgYWxsIHRlc3RzXG4gICAgYWZ0ZXJBbGwoKCkgPT4gc2VydmVyLmNsb3NlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZSBzcGVjaWZpYyBlcnJvciBzY2VuYXJpb1xuICAgKi9cbiAgc3RhdGljIHVzZUVycm9yU2NlbmFyaW8oc2NlbmFyaW86IGtleW9mIHR5cGVvZiBlcnJvckhhbmRsZXJzKSB7XG4gICAgc2VydmVyLnVzZShlcnJvckhhbmRsZXJzW3NjZW5hcmlvXSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlIHNwZWNpZmljIHBlcmZvcm1hbmNlIHNjZW5hcmlvXG4gICAqL1xuICBzdGF0aWMgdXNlUGVyZm9ybWFuY2VTY2VuYXJpbyhzY2VuYXJpbzoga2V5b2YgdHlwZW9mIHBlcmZvcm1hbmNlSGFuZGxlcnMpIHtcbiAgICBzZXJ2ZXIudXNlKHBlcmZvcm1hbmNlSGFuZGxlcnNbc2NlbmFyaW9dKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgY3VzdG9tIGhhbmRsZXJcbiAgICovXG4gIHN0YXRpYyB1c2VDdXN0b21IYW5kbGVyKGhhbmRsZXI6IFBhcmFtZXRlcnM8dHlwZW9mIHNlcnZlci51c2U+WzBdKSB7XG4gICAgc2VydmVyLnVzZShoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgY3VzdG9tIHRyeS1vbiByZXNwb25zZVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUN1c3RvbVRyeW9uSGFuZGxlcihcbiAgICByZXNwb25zZTogUGFydGlhbDxNb2NrVHJ5b25SZXNwb25zZT4sXG4gICAgb3B0aW9uczoge1xuICAgICAgc3RhdHVzPzogbnVtYmVyO1xuICAgICAgZGVsYXk/OiBudW1iZXI7XG4gICAgICBzaG91bGRGYWlsPzogYm9vbGVhbjtcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgeyBzdGF0dXMgPSAyMDAsIGRlbGF5OiBkZWxheU1zID0gMCwgc2hvdWxkRmFpbCA9IGZhbHNlIH0gPSBvcHRpb25zO1xuICAgIFxuICAgIHJldHVybiBodHRwLnBvc3QoQVBJX0VORFBPSU5UUy50cnlvbiwgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGRlbGF5TXMgPiAwKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KGRlbGF5TXMpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2hvdWxkRmFpbCkge1xuICAgICAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oREVGQVVMVF9NT0NLX1JFU1BPTlNFUy5lcnJvciwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZnVsbFJlc3BvbnNlID0ge1xuICAgICAgICAuLi5ERUZBVUxUX01PQ0tfUkVTUE9OU0VTLnN1Y2Nlc3MsXG4gICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgcmV0dXJuIEh0dHBSZXNwb25zZS5qc29uKGZ1bGxSZXNwb25zZSwgeyBzdGF0dXMgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZ5IEFQSSBjYWxsc1xuICAgKi9cbiAgc3RhdGljIGdldEFwaUNhbGxzKCk6IEFycmF5PHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbiAgICBib2R5PzogYW55O1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICB9PiB7XG4gICAgLy8gTm90ZTogVGhpcyB3b3VsZCByZXF1aXJlIGltcGxlbWVudGluZyBjYWxsIHRyYWNraW5nIGluIHRoZSBoYW5kbGVyc1xuICAgIC8vIEZvciBub3csIHJldHVybiBlbXB0eSBhcnJheSAtIGNvdWxkIGJlIGVuaGFuY2VkIHdpdGggY2FsbCB0cmFja2luZ1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBhbGwgbW9ja3MgYW5kIGNhbGwgaGlzdG9yeVxuICAgKi9cbiAgc3RhdGljIHJlc2V0KCkge1xuICAgIHNlcnZlci5yZXNldEhhbmRsZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIG1vY2sgZmlsZSB1cGxvYWQgaGFuZGxlclxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUZpbGVVcGxvYWRIYW5kbGVyKFxuICAgIHJlc3BvbnNlOiBhbnkgPSB7IHVybDogJ21vY2stdXBsb2FkLXVybCcgfSxcbiAgICBvcHRpb25zOiB7IHN0YXR1cz86IG51bWJlcjsgZGVsYXk/OiBudW1iZXIgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHsgc3RhdHVzID0gMjAwLCBkZWxheTogZGVsYXlNcyA9IDAgfSA9IG9wdGlvbnM7XG4gICAgXG4gICAgcmV0dXJuIGh0dHAucG9zdChBUElfRU5EUE9JTlRTLnVwbG9hZCwgYXN5bmMgKHsgcmVxdWVzdCB9KSA9PiB7XG4gICAgICBpZiAoZGVsYXlNcyA+IDApIHtcbiAgICAgICAgYXdhaXQgZGVsYXkoZGVsYXlNcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xuICAgICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGU7XG4gICAgICBcbiAgICAgIHJldHVybiBIdHRwUmVzcG9uc2UuanNvbih7XG4gICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICBvcmlnaW5hbE5hbWU6IGZpbGU/Lm5hbWUsXG4gICAgICAgIHNpemU6IGZpbGU/LnNpemUsXG4gICAgICAgIHR5cGU6IGZpbGU/LnR5cGUsXG4gICAgICB9LCB7IHN0YXR1cyB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIE9wZW5BSSBBUEkgbW9ja3MgKGlmIG5lZWRlZCBmb3IgdGVzdGluZyBleHRlcm5hbCBpbnRlZ3JhdGlvbnMpXG4gKi9cbmNvbnN0IG9wZW5BSU1vY2tzID0ge1xuICAvLyBNb2NrIE9wZW5BSSBBUEkgcmVzcG9uc2VzXG4gIGNvbXBsZXRpb246IGh0dHAucG9zdCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jb21wbGV0aW9ucycsICgpID0+IHtcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlLmpzb24oe1xuICAgICAgaWQ6ICdjbXBsLW1vY2snLFxuICAgICAgb2JqZWN0OiAndGV4dF9jb21wbGV0aW9uJyxcbiAgICAgIGNyZWF0ZWQ6IERhdGUubm93KCksXG4gICAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxuICAgICAgY2hvaWNlczogW3tcbiAgICAgICAgdGV4dDogJ01vY2sgY29tcGxldGlvbiByZXNwb25zZScsXG4gICAgICAgIGluZGV4OiAwLFxuICAgICAgICBsb2dwcm9iczogbnVsbCxcbiAgICAgICAgZmluaXNoX3JlYXNvbjogJ3N0b3AnLFxuICAgICAgfV0sXG4gICAgfSk7XG4gIH0pLFxuXG4gIC8vIE1vY2sgaW1hZ2UgZ2VuZXJhdGlvblxuICBpbWFnZUdlbmVyYXRpb246IGh0dHAucG9zdCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9pbWFnZXMvZ2VuZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgcmV0dXJuIEh0dHBSZXNwb25zZS5qc29uKHtcbiAgICAgIGNyZWF0ZWQ6IERhdGUubm93KCksXG4gICAgICBkYXRhOiBbe1xuICAgICAgICB1cmw6ICdodHRwczovL21vY2staW1hZ2UtdXJsLmNvbS9nZW5lcmF0ZWQtaW1hZ2UucG5nJyxcbiAgICAgIH1dLFxuICAgIH0pO1xuICB9KSxcbn07XG5cbi8qKlxuICogRXhwb3J0IGV2ZXJ5dGhpbmdcbiAqL1xuZXhwb3J0IHtcbiAgc2VydmVyLFxuICBoYW5kbGVycyxcbiAgZXJyb3JIYW5kbGVycyxcbiAgcGVyZm9ybWFuY2VIYW5kbGVycyxcbiAgTW9ja0FQSVV0aWxzLFxuICBvcGVuQUlNb2Nrcyxcbn07XG5cbi8qKlxuICogRGVmYXVsdCBleHBvcnRcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBzZXJ2ZXIsXG4gIGhhbmRsZXJzLFxuICBlcnJvckhhbmRsZXJzLFxuICBwZXJmb3JtYW5jZUhhbmRsZXJzLFxuICBNb2NrQVBJVXRpbHMsXG4gIG9wZW5BSU1vY2tzLFxuICBERUZBVUxUX01PQ0tfUkVTUE9OU0VTLFxuICBBUElfRU5EUE9JTlRTLFxufTsiXSwibmFtZXMiOlsiQVBJX0VORFBPSU5UUyIsIkRFRkFVTFRfTU9DS19SRVNQT05TRVMiLCJNb2NrQVBJVXRpbHMiLCJlcnJvckhhbmRsZXJzIiwiaGFuZGxlcnMiLCJvcGVuQUlNb2NrcyIsInBlcmZvcm1hbmNlSGFuZGxlcnMiLCJzZXJ2ZXIiLCJzdWNjZXNzIiwiaW1nX2dlbmVyYXRlZCIsIm1ldGFkYXRhIiwicHJvY2Vzc2luZ1RpbWUiLCJtb2RlbFZlcnNpb24iLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsImRldGFpbHMiLCJjb2RlIiwidmFsaWRhdGlvbiIsInRpbWVvdXQiLCJyYXRlTGltaXQiLCJ0cnlvbiIsImhlYWx0aCIsInVwbG9hZCIsImh0dHAiLCJwb3N0IiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwibW9kZWxJbWFnZSIsImFwcGFyZWxJbWFnZXMiLCJBcnJheSIsImlzQXJyYXkiLCJIdHRwUmVzcG9uc2UiLCJzdGF0dXMiLCJkZWxheSIsImdldCIsImZvcm1EYXRhIiwiZmlsZSIsInVybCIsIm5hbWUiLCJzaXplIiwidHlwZSIsInNlcnZlckVycm9yIiwidmFsaWRhdGlvbkVycm9yIiwibmV0d29ya0Vycm9yIiwiaW52YWxpZEpzb24iLCJoZWFkZXJzIiwiaW5jb21wbGV0ZVJlc3BvbnNlIiwiZmFzdCIsInNsb3ciLCJ2YXJpYWJsZSIsImRlbGF5cyIsInJhbmRvbURlbGF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwic2V0dXBTZXJ2ZXIiLCJiZWZvcmVBbGwiLCJsaXN0ZW4iLCJvblVuaGFuZGxlZFJlcXVlc3QiLCJhZnRlckVhY2giLCJyZXNldEhhbmRsZXJzIiwiYWZ0ZXJBbGwiLCJjbG9zZSIsInVzZUVycm9yU2NlbmFyaW8iLCJzY2VuYXJpbyIsInVzZSIsInVzZVBlcmZvcm1hbmNlU2NlbmFyaW8iLCJ1c2VDdXN0b21IYW5kbGVyIiwiaGFuZGxlciIsImNyZWF0ZUN1c3RvbVRyeW9uSGFuZGxlciIsInJlc3BvbnNlIiwib3B0aW9ucyIsImRlbGF5TXMiLCJzaG91bGRGYWlsIiwiZnVsbFJlc3BvbnNlIiwiZ2V0QXBpQ2FsbHMiLCJyZXNldCIsImNyZWF0ZUZpbGVVcGxvYWRIYW5kbGVyIiwib3JpZ2luYWxOYW1lIiwiY29tcGxldGlvbiIsImlkIiwib2JqZWN0IiwiY3JlYXRlZCIsIm5vdyIsIm1vZGVsIiwiY2hvaWNlcyIsInRleHQiLCJpbmRleCIsImxvZ3Byb2JzIiwiZmluaXNoX3JlYXNvbiIsImltYWdlR2VuZXJhdGlvbiIsImRhdGEiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQzs7Ozs7Ozs7Ozs7SUFnRVlBLGFBQWE7ZUFBYkE7O0lBdENBQyxzQkFBc0I7ZUFBdEJBOztJQWtVWEMsWUFBWTtlQUFaQTs7SUFJRjs7Q0FFQyxHQUNELE9BU0U7ZUFURjs7SUFURUMsYUFBYTtlQUFiQTs7SUFEQUMsUUFBUTtlQUFSQTs7SUFJQUMsV0FBVztlQUFYQTs7SUFGQUMsbUJBQW1CO2VBQW5CQTs7SUFIQUMsTUFBTTtlQUFOQTs7O3FCQXRWd0M7c0JBQ2Q7QUF1QnJCLE1BQU1OLHlCQUF5QjtJQUNwQ08sU0FBUztRQUNQQyxlQUFlO1FBQ2ZDLFVBQVU7WUFDUkMsZ0JBQWdCO1lBQ2hCQyxjQUFjO1lBQ2RDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUNGO0lBRUFDLE9BQU87UUFDTEEsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07SUFDUjtJQUVBQyxZQUFZO1FBQ1ZILE9BQU87UUFDUEMsU0FBUztRQUNUQyxNQUFNO0lBQ1I7SUFFQUUsU0FBUztRQUNQSixPQUFPO1FBQ1BDLFNBQVM7UUFDVEMsTUFBTTtJQUNSO0lBRUFHLFdBQVc7UUFDVEwsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07SUFDUjtBQUNGO0FBS08sTUFBTWxCLGdCQUFnQjtJQUMzQnNCLE9BQU87SUFDUEMsUUFBUTtJQUNSQyxRQUFRO0FBQ1Y7QUFFQTs7Q0FFQyxHQUNELE1BQU1wQixXQUFXO0lBQ2YscUNBQXFDO0lBQ3JDcUIsU0FBSSxDQUFDQyxJQUFJLENBQUMxQixjQUFjc0IsS0FBSyxFQUFFLE9BQU8sRUFBRUssT0FBTyxFQUFFO1FBQy9DLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUUvQiw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDRCxLQUFLRSxVQUFVLElBQUksQ0FBQ0YsS0FBS0csYUFBYSxJQUFJLENBQUNDLE1BQU1DLE9BQU8sQ0FBQ0wsS0FBS0csYUFBYSxHQUFHO1lBQ2pGLE9BQU9HLGlCQUFZLENBQUNMLElBQUksQ0FBQzVCLHVCQUF1QmtCLFVBQVUsRUFBRTtnQkFBRWdCLFFBQVE7WUFBSTtRQUM1RTtRQUVBLDRCQUE0QjtRQUM1QixNQUFNQyxJQUFBQSxVQUFLLEVBQUM7UUFFWixPQUFPRixpQkFBWSxDQUFDTCxJQUFJLENBQUM1Qix1QkFBdUJPLE9BQU87SUFDekQ7SUFFQSx3QkFBd0I7SUFDeEJpQixTQUFJLENBQUNZLEdBQUcsQ0FBQ3JDLGNBQWN1QixNQUFNLEVBQUU7UUFDN0IsT0FBT1csaUJBQVksQ0FBQ0wsSUFBSSxDQUFDO1lBQUVNLFFBQVE7WUFBTXRCLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUFHO0lBQy9FO0lBRUEsdUJBQXVCO0lBQ3ZCVSxTQUFJLENBQUNDLElBQUksQ0FBQzFCLGNBQWN3QixNQUFNLEVBQUUsT0FBTyxFQUFFRyxPQUFPLEVBQUU7UUFDaEQsTUFBTVcsV0FBVyxNQUFNWCxRQUFRVyxRQUFRO1FBQ3ZDLE1BQU1DLE9BQU9ELFNBQVNELEdBQUcsQ0FBQztRQUUxQixJQUFJLENBQUNFLE1BQU07WUFDVCxPQUFPTCxpQkFBWSxDQUFDTCxJQUFJLENBQUM7Z0JBQUViLE9BQU87WUFBbUIsR0FBRztnQkFBRW1CLFFBQVE7WUFBSTtRQUN4RTtRQUVBLE9BQU9ELGlCQUFZLENBQUNMLElBQUksQ0FBQztZQUN2QlcsS0FBSyxDQUFDLG9CQUFvQixFQUFFRCxLQUFLRSxJQUFJLEVBQUU7WUFDdkNDLE1BQU1ILEtBQUtHLElBQUk7WUFDZkMsTUFBTUosS0FBS0ksSUFBSTtRQUNqQjtJQUNGO0NBQ0Q7QUFFRDs7Q0FFQyxHQUNELE1BQU14QyxnQkFBZ0I7SUFDcEIscUJBQXFCO0lBQ3JCeUMsYUFBYW5CLFNBQUksQ0FBQ0MsSUFBSSxDQUFDMUIsY0FBY3NCLEtBQUssRUFBRTtRQUMxQyxPQUFPWSxpQkFBWSxDQUFDTCxJQUFJLENBQUM1Qix1QkFBdUJlLEtBQUssRUFBRTtZQUFFbUIsUUFBUTtRQUFJO0lBQ3ZFO0lBRUEseUJBQXlCO0lBQ3pCVSxpQkFBaUJwQixTQUFJLENBQUNDLElBQUksQ0FBQzFCLGNBQWNzQixLQUFLLEVBQUU7UUFDOUMsT0FBT1ksaUJBQVksQ0FBQ0wsSUFBSSxDQUFDNUIsdUJBQXVCa0IsVUFBVSxFQUFFO1lBQUVnQixRQUFRO1FBQUk7SUFDNUU7SUFFQSxxQkFBcUI7SUFDckJmLFNBQVNLLFNBQUksQ0FBQ0MsSUFBSSxDQUFDMUIsY0FBY3NCLEtBQUssRUFBRTtRQUN0QyxNQUFNYyxJQUFBQSxVQUFLLEVBQUMsUUFBUSw4QkFBOEI7UUFDbEQsT0FBT0YsaUJBQVksQ0FBQ0wsSUFBSSxDQUFDNUIsdUJBQXVCbUIsT0FBTyxFQUFFO1lBQUVlLFFBQVE7UUFBSTtJQUN6RTtJQUVBLHNCQUFzQjtJQUN0QmQsV0FBV0ksU0FBSSxDQUFDQyxJQUFJLENBQUMxQixjQUFjc0IsS0FBSyxFQUFFO1FBQ3hDLE9BQU9ZLGlCQUFZLENBQUNMLElBQUksQ0FBQzVCLHVCQUF1Qm9CLFNBQVMsRUFBRTtZQUFFYyxRQUFRO1FBQUk7SUFDM0U7SUFFQSxnQkFBZ0I7SUFDaEJXLGNBQWNyQixTQUFJLENBQUNDLElBQUksQ0FBQzFCLGNBQWNzQixLQUFLLEVBQUU7UUFDM0MsT0FBT1ksaUJBQVksQ0FBQ2xCLEtBQUs7SUFDM0I7SUFFQSx3QkFBd0I7SUFDeEIrQixhQUFhdEIsU0FBSSxDQUFDQyxJQUFJLENBQUMxQixjQUFjc0IsS0FBSyxFQUFFO1FBQzFDLE9BQU8sSUFBSVksaUJBQVksQ0FBQyx5QkFBeUI7WUFDL0NDLFFBQVE7WUFDUmEsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7SUFDRjtJQUVBLHNDQUFzQztJQUN0Q0Msb0JBQW9CeEIsU0FBSSxDQUFDQyxJQUFJLENBQUMxQixjQUFjc0IsS0FBSyxFQUFFO1FBQ2pELE9BQU9ZLGlCQUFZLENBQUNMLElBQUksQ0FBQztZQUFFbkIsVUFBVTtnQkFBRUMsZ0JBQWdCO1lBQUs7UUFBRSxHQUFHO1lBQUV3QixRQUFRO1FBQUk7SUFDakY7QUFDRjtBQUVBOztDQUVDLEdBQ0QsTUFBTTdCLHNCQUFzQjtJQUMxQiwwQkFBMEI7SUFDMUI0QyxNQUFNekIsU0FBSSxDQUFDQyxJQUFJLENBQUMxQixjQUFjc0IsS0FBSyxFQUFFO1FBQ25DLE1BQU1jLElBQUFBLFVBQUssRUFBQztRQUNaLE9BQU9GLGlCQUFZLENBQUNMLElBQUksQ0FBQzVCLHVCQUF1Qk8sT0FBTztJQUN6RDtJQUVBLHVCQUF1QjtJQUN2QjJDLE1BQU0xQixTQUFJLENBQUNDLElBQUksQ0FBQzFCLGNBQWNzQixLQUFLLEVBQUU7UUFDbkMsTUFBTWMsSUFBQUEsVUFBSyxFQUFDO1FBQ1osT0FBT0YsaUJBQVksQ0FBQ0wsSUFBSSxDQUFDNUIsdUJBQXVCTyxPQUFPO0lBQ3pEO0lBRUEsMEJBQTBCO0lBQzFCNEMsVUFBVTNCLFNBQUksQ0FBQ0MsSUFBSSxDQUFDMUIsY0FBY3NCLEtBQUssRUFBRTtRQUN2QyxNQUFNK0IsU0FBUztZQUFDO1lBQUs7WUFBSztZQUFNO1lBQU07U0FBSztRQUMzQyxNQUFNQyxjQUFjRCxNQUFNLENBQUNFLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLSixPQUFPSyxNQUFNLEVBQUU7UUFDckUsTUFBTXRCLElBQUFBLFVBQUssRUFBQ2tCO1FBQ1osT0FBT3BCLGlCQUFZLENBQUNMLElBQUksQ0FBQztZQUN2QixHQUFHNUIsdUJBQXVCTyxPQUFPO1lBQ2pDRSxVQUFVO2dCQUNSLEdBQUdULHVCQUF1Qk8sT0FBTyxDQUFDRSxRQUFRO2dCQUMxQ0MsZ0JBQWdCMkM7WUFDbEI7UUFDRjtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELE1BQU0vQyxTQUFTb0QsSUFBQUEsaUJBQVcsS0FBSXZEO0FBRTlCOztDQUVDLEdBQ0QsTUFBTUY7SUFDSjs7R0FFQyxHQUNELE9BQU95RCxjQUFjO1FBQ25CLHNDQUFzQztRQUN0Q0MsVUFBVSxJQUFNckQsT0FBT3NELE1BQU0sQ0FBQztnQkFBRUMsb0JBQW9CO1lBQVE7UUFFNUQsaUNBQWlDO1FBQ2pDQyxVQUFVLElBQU14RCxPQUFPeUQsYUFBYTtRQUVwQywyQkFBMkI7UUFDM0JDLFNBQVMsSUFBTTFELE9BQU8yRCxLQUFLO0lBQzdCO0lBRUE7O0dBRUMsR0FDRCxPQUFPQyxpQkFBaUJDLFFBQW9DLEVBQUU7UUFDNUQ3RCxPQUFPOEQsR0FBRyxDQUFDbEUsYUFBYSxDQUFDaUUsU0FBUztJQUNwQztJQUVBOztHQUVDLEdBQ0QsT0FBT0UsdUJBQXVCRixRQUEwQyxFQUFFO1FBQ3hFN0QsT0FBTzhELEdBQUcsQ0FBQy9ELG1CQUFtQixDQUFDOEQsU0FBUztJQUMxQztJQUVBOztHQUVDLEdBQ0QsT0FBT0csaUJBQWlCQyxPQUF5QyxFQUFFO1FBQ2pFakUsT0FBTzhELEdBQUcsQ0FBQ0c7SUFDYjtJQUVBOztHQUVDLEdBQ0QsT0FBT0MseUJBQ0xDLFFBQW9DLEVBQ3BDQyxVQUlJLENBQUMsQ0FBQyxFQUNOO1FBQ0EsTUFBTSxFQUFFeEMsU0FBUyxHQUFHLEVBQUVDLE9BQU93QyxVQUFVLENBQUMsRUFBRUMsYUFBYSxLQUFLLEVBQUUsR0FBR0Y7UUFFakUsT0FBT2xELFNBQUksQ0FBQ0MsSUFBSSxDQUFDMUIsY0FBY3NCLEtBQUssRUFBRTtZQUNwQyxJQUFJc0QsVUFBVSxHQUFHO2dCQUNmLE1BQU14QyxJQUFBQSxVQUFLLEVBQUN3QztZQUNkO1lBRUEsSUFBSUMsWUFBWTtnQkFDZCxPQUFPM0MsaUJBQVksQ0FBQ0wsSUFBSSxDQUFDNUIsdUJBQXVCZSxLQUFLLEVBQUU7b0JBQUVtQixRQUFRO2dCQUFJO1lBQ3ZFO1lBRUEsTUFBTTJDLGVBQWU7Z0JBQ25CLEdBQUc3RSx1QkFBdUJPLE9BQU87Z0JBQ2pDLEdBQUdrRSxRQUFRO1lBQ2I7WUFFQSxPQUFPeEMsaUJBQVksQ0FBQ0wsSUFBSSxDQUFDaUQsY0FBYztnQkFBRTNDO1lBQU87UUFDbEQ7SUFDRjtJQUVBOztHQUVDLEdBQ0QsT0FBTzRDLGNBS0o7UUFDRCxzRUFBc0U7UUFDdEUscUVBQXFFO1FBQ3JFLE9BQU8sRUFBRTtJQUNYO0lBRUE7O0dBRUMsR0FDRCxPQUFPQyxRQUFRO1FBQ2J6RSxPQUFPeUQsYUFBYTtJQUN0QjtJQUVBOztHQUVDLEdBQ0QsT0FBT2lCLHdCQUNMUCxXQUFnQjtRQUFFbEMsS0FBSztJQUFrQixDQUFDLEVBQzFDbUMsVUFBK0MsQ0FBQyxDQUFDLEVBQ2pEO1FBQ0EsTUFBTSxFQUFFeEMsU0FBUyxHQUFHLEVBQUVDLE9BQU93QyxVQUFVLENBQUMsRUFBRSxHQUFHRDtRQUU3QyxPQUFPbEQsU0FBSSxDQUFDQyxJQUFJLENBQUMxQixjQUFjd0IsTUFBTSxFQUFFLE9BQU8sRUFBRUcsT0FBTyxFQUFFO1lBQ3ZELElBQUlpRCxVQUFVLEdBQUc7Z0JBQ2YsTUFBTXhDLElBQUFBLFVBQUssRUFBQ3dDO1lBQ2Q7WUFFQSxNQUFNdEMsV0FBVyxNQUFNWCxRQUFRVyxRQUFRO1lBQ3ZDLE1BQU1DLE9BQU9ELFNBQVNELEdBQUcsQ0FBQztZQUUxQixPQUFPSCxpQkFBWSxDQUFDTCxJQUFJLENBQUM7Z0JBQ3ZCLEdBQUc2QyxRQUFRO2dCQUNYUSxjQUFjM0MsTUFBTUU7Z0JBQ3BCQyxNQUFNSCxNQUFNRztnQkFDWkMsTUFBTUosTUFBTUk7WUFDZCxHQUFHO2dCQUFFUjtZQUFPO1FBQ2Q7SUFDRjtBQUNGO0FBRUE7O0NBRUMsR0FDRCxNQUFNOUIsY0FBYztJQUNsQiw0QkFBNEI7SUFDNUI4RSxZQUFZMUQsU0FBSSxDQUFDQyxJQUFJLENBQUMseUNBQXlDO1FBQzdELE9BQU9RLGlCQUFZLENBQUNMLElBQUksQ0FBQztZQUN2QnVELElBQUk7WUFDSkMsUUFBUTtZQUNSQyxTQUFTeEUsS0FBS3lFLEdBQUc7WUFDakJDLE9BQU87WUFDUEMsU0FBUztnQkFBQztvQkFDUkMsTUFBTTtvQkFDTkMsT0FBTztvQkFDUEMsVUFBVTtvQkFDVkMsZUFBZTtnQkFDakI7YUFBRTtRQUNKO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEJDLGlCQUFpQnJFLFNBQUksQ0FBQ0MsSUFBSSxDQUFDLGdEQUFnRDtRQUN6RSxPQUFPUSxpQkFBWSxDQUFDTCxJQUFJLENBQUM7WUFDdkJ5RCxTQUFTeEUsS0FBS3lFLEdBQUc7WUFDakJRLE1BQU07Z0JBQUM7b0JBQ0x2RCxLQUFLO2dCQUNQO2FBQUU7UUFDSjtJQUNGO0FBQ0Y7TUFpQkEsV0FBZTtJQUNiakM7SUFDQUg7SUFDQUQ7SUFDQUc7SUFDQUo7SUFDQUc7SUFDQUo7SUFDQUQ7QUFDRiJ9
4436dc44eb2a37316f6c338d02affbff
// Comprehensive Tests for useTryonMutation Hook
// Tests covering all scenarios: success, error, retry, image processing, optimistic updates
"use strict";
// Mock the optimistic updates manager
jest.mock('../../../src/business-layer/utils/optimisticUpdates', ()=>({
        getOptimisticUpdatesManager: ()=>({
                startOptimisticUpdate: mockStartOptimisticUpdate,
                completeOptimisticUpdate: mockCompleteOptimisticUpdate,
                rollbackOptimisticUpdate: mockRollbackOptimisticUpdate
            }),
        OptimisticUpdatesManager: jest.fn(()=>({
                startOptimisticUpdate: mockStartOptimisticUpdate,
                completeOptimisticUpdate: mockCompleteOptimisticUpdate,
                rollbackOptimisticUpdate: mockRollbackOptimisticUpdate
            }))
    }));
// Mock the cache invalidation utility
jest.mock('../../../src/business-layer/utils/cacheInvalidation', ()=>({
        invalidateCacheAfterMutation: jest.fn().mockResolvedValue(undefined),
        getCacheInvalidationManager: jest.fn(()=>({
                invalidateAfterSuccess: jest.fn(),
                invalidateAfterError: jest.fn()
            }))
    }));
// Mock image processing utilities
jest.mock('../../../src/business-layer/utils/imageProcessing', ()=>({
        processImageForTryon: jest.fn().mockResolvedValue({
            originalSize: 2048576,
            processedSize: 1048576,
            compressionRatio: 0.5,
            processingTime: 123,
            processedImage: 'data:image/jpeg;base64,processed-image',
            metadata: {
                originalDimensions: {
                    width: 1920,
                    height: 1080
                },
                processedDimensions: {
                    width: 1024,
                    height: 1536
                },
                format: 'jpeg',
                quality: 0.9
            }
        })
    }));
// Mock error handling utilities
jest.mock('../../../src/business-layer/utils/errorHandling', ()=>({
        classifyTryonError: jest.fn((error)=>({
                userMessage: 'An error occurred',
                technicalMessage: error.message || 'Unknown error',
                errorCode: 'UNKNOWN_ERROR',
                retryable: false,
                category: 'NETWORK_ERROR',
                severity: 'MEDIUM',
                recoveryActions: []
            })),
        logAndClassifyError: jest.fn((error)=>({
                userMessage: 'An error occurred',
                technicalMessage: error.details || error.message || 'Unknown error',
                errorCode: 'UNKNOWN_ERROR',
                retryable: false,
                category: 'NETWORK_ERROR',
                severity: 'MEDIUM',
                recoveryActions: []
            })),
        isErrorRetryable: jest.fn(()=>true)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _useTryonMutation = require("../../../src/business-layer/mutations/useTryonMutation");
const _testUtils = require("../../../src/business-layer/tests/testUtils");
// Create persistent mock functions for optimistic updates
const mockStartOptimisticUpdate = jest.fn(()=>({
        optimisticId: 'mock-optimistic-id',
        variables: {},
        config: {},
        startTime: Date.now(),
        rollbackFunctions: []
    }));
const mockCompleteOptimisticUpdate = jest.fn();
const mockRollbackOptimisticUpdate = jest.fn();
describe('useTryonMutation Hook', ()=>{
    let queryClient;
    let consoleRef;
    beforeEach(()=>{
        queryClient = (0, _testUtils.createTestQueryClient)();
        consoleRef = (0, _testUtils.mockConsole)();
        jest.clearAllMocks();
        // Clear the specific optimistic update mocks
        mockStartOptimisticUpdate.mockClear();
        mockCompleteOptimisticUpdate.mockClear();
        mockRollbackOptimisticUpdate.mockClear();
        global.fetch = jest.fn();
    });
    afterEach(()=>{
        queryClient.clear();
        consoleRef.restore();
        jest.restoreAllMocks();
    });
    describe('Basic Functionality', ()=>{
        it('should initialize with correct default state', ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            expect(result.current.data).toBeUndefined();
            expect(result.current.error).toBeNull();
            expect(result.current.isLoading).toBe(false);
            expect(result.current.isSuccess).toBe(false);
            expect(result.current.isError).toBe(false);
            expect(result.current.isIdle).toBe(true);
            expect(result.current.status).toBe('idle');
            expect(typeof result.current.mutate).toBe('function');
            expect(typeof result.current.mutateAsync).toBe('function');
            expect(typeof result.current.reset).toBe('function');
        });
        it('should accept custom configuration', ()=>{
            const config = {
                enableRetry: false,
                maxRetries: 5,
                initialRetryDelay: 2000,
                enableOptimisticUpdates: true
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            expect(result.current.isIdle).toBe(true);
        });
    });
    describe('Success Scenarios', ()=>{
        it('should handle successful mutation with base64 strings', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
            expect(result.current.error).toBeNull();
            expect(result.current.isLoading).toBe(false);
            expect(global.fetch).toHaveBeenCalledWith('/api/tryon', expect.objectContaining({
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: expect.stringContaining('"modelImage":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/mock-model-image"')
            }));
        });
        it('should handle successful mutation with File objects', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const mockFile = new File([
                'mock content'
            ], 'test.jpg', {
                type: 'image/jpeg'
            });
            const variablesWithFiles = {
                modelImage: mockFile,
                apparelImages: [
                    mockFile
                ],
                options: _testUtils.mockTryonVariables.options
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithFiles);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
        });
        it('should call success callback on successful mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const onSuccess = jest.fn();
            const config = {
                onSuccess
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(onSuccess).toHaveBeenCalledWith(_testUtils.mockTryonResponse, expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables),
                startTime: expect.any(Number),
                retryCount: 0
            }));
        });
        it('should handle mutation with timeout configuration', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse, undefined, 100); // 100ms delay
            const variablesWithTimeout = {
                ..._testUtils.mockTryonVariables,
                options: {
                    ..._testUtils.mockTryonVariables.options,
                    timeout: 5000
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithTimeout);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
        });
    });
    describe('Error Scenarios', ()=>{
        it('should handle API error responses', async ()=>{
            const apiError = {
                ..._testUtils.mockTryonError,
                status: 400
            };
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
            expect(result.current.data).toBeUndefined();
            expect(result.current.isLoading).toBe(false);
        });
        it('should call error callback on failed mutation', async ()=>{
            const apiError = {
                ..._testUtils.mockTryonError,
                error: 'An error occurred',
                details: 'API request failed'
            };
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const onError = jest.fn();
            const config = {
                onError
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(onError).toHaveBeenCalledWith(expect.objectContaining({
                error: 'An error occurred',
                details: 'API request failed'
            }), expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables)
            }));
        });
        it('should handle network timeout errors', async ()=>{
            // Mock fetch to simulate timeout
            global.fetch.mockImplementation(()=>{
                return new Promise((_, reject)=>{
                    setTimeout(()=>{
                        const error = new Error('Request timeout');
                        error.name = 'AbortError';
                        reject(error);
                    }, 50);
                });
            });
            const variablesWithShortTimeout = {
                ..._testUtils.mockTryonVariables,
                options: {
                    ..._testUtils.mockTryonVariables.options,
                    timeout: 10 // Very short timeout
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithShortTimeout);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            }, {
                timeout: 1000
            });
            expect(result.current.error).toBeTruthy();
        });
        it('should handle image processing errors', async ()=>{
            const { processImageForTryon } = require('../../../src/business-layer/utils/imageProcessing');
            processImageForTryon.mockRejectedValueOnce(new Error('Invalid image format'));
            const mockFile = new File([
                'invalid content'
            ], 'test.txt', {
                type: 'text/plain'
            });
            const variablesWithInvalidFile = {
                modelImage: mockFile,
                apparelImages: [
                    mockFile
                ],
                options: _testUtils.mockTryonVariables.options
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithInvalidFile);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
        });
    });
    describe('Retry Logic', ()=>{
        it('should retry on retryable errors', async ()=>{
            let callCount = 0;
            global.fetch.mockImplementation(()=>{
                callCount++;
                if (callCount <= 2) {
                    return Promise.resolve({
                        ok: false,
                        status: 500,
                        json: ()=>Promise.resolve({
                                error: 'Internal Server Error'
                            })
                    });
                }
                return Promise.resolve({
                    ok: true,
                    status: 200,
                    json: ()=>Promise.resolve(_testUtils.mockTryonResponse)
                });
            });
            const config = {
                enableRetry: true,
                maxRetries: 3,
                initialRetryDelay: 10 // Short delay for testing
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            }, {
                timeout: 5000
            });
            expect(callCount).toBe(3);
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
        });
        it('should not retry when retry is disabled', async ()=>{
            let callCount = 0;
            global.fetch.mockImplementation(()=>{
                callCount++;
                return Promise.resolve({
                    ok: false,
                    status: 500,
                    json: ()=>Promise.resolve({
                            error: 'Internal Server Error'
                        })
                });
            });
            const config = {
                enableRetry: false
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(callCount).toBe(1);
        });
        it('should stop retrying after max retries reached', async ()=>{
            let callCount = 0;
            global.fetch.mockImplementation(()=>{
                callCount++;
                return Promise.resolve({
                    ok: false,
                    status: 500,
                    json: ()=>Promise.resolve({
                            error: 'Internal Server Error'
                        })
                });
            });
            const config = {
                enableRetry: true,
                maxRetries: 2,
                initialRetryDelay: 10
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            }, {
                timeout: 5000
            });
            expect(callCount).toBe(3); // Initial call + 2 retries
        });
    });
    describe('Optimistic Updates Integration', ()=>{
        it('should start optimistic updates when enabled', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const config = {
                enableOptimisticUpdates: true,
                optimisticConfig: {
                    showPreview: true,
                    updateHistory: true
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(mockStartOptimisticUpdate).toHaveBeenCalledWith(expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                showPreview: true,
                updateHistory: true
            }));
            expect(mockCompleteOptimisticUpdate).toHaveBeenCalledWith('mock-optimistic-id', _testUtils.mockTryonResponse, expect.any(Object));
        });
        it('should rollback optimistic updates on error', async ()=>{
            const apiError = new Error('API request failed');
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const config = {
                enableOptimisticUpdates: true
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(mockRollbackOptimisticUpdate).toHaveBeenCalledWith('mock-optimistic-id', expect.any(Error));
        });
    });
    describe('Cache Invalidation Integration', ()=>{
        it('should invalidate cache on successful mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { invalidateCacheAfterMutation } = require('../../../src/business-layer/utils/cacheInvalidation');
            const config = {
                cacheInvalidationConfig: {
                    invalidateHistory: true,
                    invalidateUserData: true
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(invalidateCacheAfterMutation).toHaveBeenCalledWith(queryClient, _testUtils.mockTryonResponse, expect.objectContaining(_testUtils.mockTryonVariables), expect.any(Object), expect.objectContaining({
                invalidateHistory: true,
                invalidateUserData: true
            }));
        });
        it('should handle cache invalidation failures gracefully', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { invalidateCacheAfterMutation } = require('../../../src/business-layer/utils/cacheInvalidation');
            invalidateCacheAfterMutation.mockRejectedValueOnce(new Error('Cache invalidation failed'));
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            // Should still succeed even if cache invalidation fails
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
            expect(consoleRef.mocks.warn).toHaveBeenCalledWith('Failed to invalidate cache after mutation:', expect.any(Error));
        });
    });
    describe('Lifecycle Callbacks', ()=>{
        it('should call onMutate callback before mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse, undefined, 100);
            const onMutate = jest.fn().mockResolvedValue({
                customData: 'test'
            });
            const config = {
                onMutate
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            expect(onMutate).toHaveBeenCalledWith(expect.objectContaining(_testUtils.mockTryonVariables));
        });
        it('should call onSettled callback after mutation completes', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const onSettled = jest.fn();
            const config = {
                onSettled
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(onSettled).toHaveBeenCalledWith(_testUtils.mockTryonResponse, null, expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables)
            }));
        });
        it('should call onSettled callback after mutation fails', async ()=>{
            const apiError = new Error('API request failed');
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const onSettled = jest.fn();
            const config = {
                onSettled
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(onSettled).toHaveBeenCalledWith(undefined, expect.objectContaining({
                error: 'An error occurred'
            }), expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables)
            }));
        });
    });
    describe('Reset Functionality', ()=>{
        it('should reset mutation state correctly', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            // Execute mutation
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
            // Reset mutation
            (0, _react.act)(()=>{
                result.current.reset();
            });
            expect(result.current.data).toBeUndefined();
            expect(result.current.error).toBeNull();
            expect(result.current.isLoading).toBe(false);
            expect(result.current.isSuccess).toBe(false);
            expect(result.current.isError).toBe(false);
            expect(result.current.isIdle).toBe(true);
            expect(result.current.status).toBe('idle');
        });
    });
    describe('Edge Cases', ()=>{
        it('should handle malformed API responses', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: ()=>Promise.resolve({
                        invalid: 'response'
                    }) // Missing img_generated field
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
        });
        it('should handle JSON parsing errors', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: ()=>Promise.reject(new Error('Invalid JSON'))
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
        });
        it('should handle component unmount during mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse, undefined, 500); // Long delay
            const { result, unmount } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)({
                    enableOptimisticUpdates: true
                }), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            // Start mutation
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            // Unmount component before mutation completes
            unmount();
            // Wait for cleanup
            await (0, _testUtils.waitForPromises)();
            // Should rollback optimistic updates on unmount
            expect(mockRollbackOptimisticUpdate).toHaveBeenCalledWith('mock-optimistic-id', expect.objectContaining({
                message: 'Component unmounted'
            }));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL2J1c2luZXNzLWxheWVyL211dGF0aW9ucy91c2VUcnlvbk11dGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29tcHJlaGVuc2l2ZSBUZXN0cyBmb3IgdXNlVHJ5b25NdXRhdGlvbiBIb29rXG4vLyBUZXN0cyBjb3ZlcmluZyBhbGwgc2NlbmFyaW9zOiBzdWNjZXNzLCBlcnJvciwgcmV0cnksIGltYWdlIHByb2Nlc3NpbmcsIG9wdGltaXN0aWMgdXBkYXRlc1xuXG5pbXBvcnQgeyByZW5kZXJIb29rLCBhY3QsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IHVzZVRyeW9uTXV0YXRpb24gfSBmcm9tICcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvbXV0YXRpb25zL3VzZVRyeW9uTXV0YXRpb24nO1xuaW1wb3J0IHR5cGUge1xuICBUcnlvbk11dGF0aW9uVmFyaWFibGVzLFxuICBUcnlvbk11dGF0aW9uUmVzcG9uc2UsXG4gIFRyeW9uTXV0YXRpb25FcnJvcixcbiAgVXNlVHJ5b25NdXRhdGlvbkNvbmZpZ1xufSBmcm9tICcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdHlwZXMvdHJ5b24udHlwZXMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlVGVzdFF1ZXJ5Q2xpZW50LFxuICBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIsXG4gIG1vY2tUcnlvbkFQSSxcbiAgbW9ja1RyeW9uVmFyaWFibGVzLFxuICBtb2NrVHJ5b25SZXNwb25zZSxcbiAgbW9ja1RyeW9uRXJyb3IsXG4gIG1vY2tDb25zb2xlLFxuICB3YWl0Rm9yUHJvbWlzZXNcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3Rlc3RzL3Rlc3RVdGlscyc7XG5cbi8vIENyZWF0ZSBwZXJzaXN0ZW50IG1vY2sgZnVuY3Rpb25zIGZvciBvcHRpbWlzdGljIHVwZGF0ZXNcbmNvbnN0IG1vY2tTdGFydE9wdGltaXN0aWNVcGRhdGUgPSBqZXN0LmZuKCgpID0+ICh7XG4gIG9wdGltaXN0aWNJZDogJ21vY2stb3B0aW1pc3RpYy1pZCcsXG4gIHZhcmlhYmxlczoge30sIC8vIFdpbGwgYmUgcG9wdWxhdGVkIGZyb20gdGVzdCBkYXRhXG4gIGNvbmZpZzoge30sXG4gIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgcm9sbGJhY2tGdW5jdGlvbnM6IFtdXG59KSk7XG5jb25zdCBtb2NrQ29tcGxldGVPcHRpbWlzdGljVXBkYXRlID0gamVzdC5mbigpO1xuY29uc3QgbW9ja1JvbGxiYWNrT3B0aW1pc3RpY1VwZGF0ZSA9IGplc3QuZm4oKTtcblxuLy8gTW9jayB0aGUgb3B0aW1pc3RpYyB1cGRhdGVzIG1hbmFnZXJcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL29wdGltaXN0aWNVcGRhdGVzJywgKCkgPT4gKHtcbiAgZ2V0T3B0aW1pc3RpY1VwZGF0ZXNNYW5hZ2VyOiAoKSA9PiAoe1xuICAgIHN0YXJ0T3B0aW1pc3RpY1VwZGF0ZTogbW9ja1N0YXJ0T3B0aW1pc3RpY1VwZGF0ZSxcbiAgICBjb21wbGV0ZU9wdGltaXN0aWNVcGRhdGU6IG1vY2tDb21wbGV0ZU9wdGltaXN0aWNVcGRhdGUsXG4gICAgcm9sbGJhY2tPcHRpbWlzdGljVXBkYXRlOiBtb2NrUm9sbGJhY2tPcHRpbWlzdGljVXBkYXRlXG4gIH0pLFxuICBPcHRpbWlzdGljVXBkYXRlc01hbmFnZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBzdGFydE9wdGltaXN0aWNVcGRhdGU6IG1vY2tTdGFydE9wdGltaXN0aWNVcGRhdGUsXG4gICAgY29tcGxldGVPcHRpbWlzdGljVXBkYXRlOiBtb2NrQ29tcGxldGVPcHRpbWlzdGljVXBkYXRlLFxuICAgIHJvbGxiYWNrT3B0aW1pc3RpY1VwZGF0ZTogbW9ja1JvbGxiYWNrT3B0aW1pc3RpY1VwZGF0ZVxuICB9KSlcbn0pKTtcblxuLy8gTW9jayB0aGUgY2FjaGUgaW52YWxpZGF0aW9uIHV0aWxpdHlcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL2NhY2hlSW52YWxpZGF0aW9uJywgKCkgPT4gKHtcbiAgaW52YWxpZGF0ZUNhY2hlQWZ0ZXJNdXRhdGlvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gIGdldENhY2hlSW52YWxpZGF0aW9uTWFuYWdlcjogamVzdC5mbigoKSA9PiAoe1xuICAgIGludmFsaWRhdGVBZnRlclN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICBpbnZhbGlkYXRlQWZ0ZXJFcnJvcjogamVzdC5mbigpXG4gIH0pKVxufSkpO1xuXG4vLyBNb2NrIGltYWdlIHByb2Nlc3NpbmcgdXRpbGl0aWVzXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9idXNpbmVzcy1sYXllci91dGlscy9pbWFnZVByb2Nlc3NpbmcnLCAoKSA9PiAoe1xuICBwcm9jZXNzSW1hZ2VGb3JUcnlvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICBvcmlnaW5hbFNpemU6IDIwNDg1NzYsXG4gICAgcHJvY2Vzc2VkU2l6ZTogMTA0ODU3NixcbiAgICBjb21wcmVzc2lvblJhdGlvOiAwLjUsXG4gICAgcHJvY2Vzc2luZ1RpbWU6IDEyMyxcbiAgICBwcm9jZXNzZWRJbWFnZTogJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlJyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3JpZ2luYWxEaW1lbnNpb25zOiB7IHdpZHRoOiAxOTIwLCBoZWlnaHQ6IDEwODAgfSxcbiAgICAgIHByb2Nlc3NlZERpbWVuc2lvbnM6IHsgd2lkdGg6IDEwMjQsIGhlaWdodDogMTUzNiB9LFxuICAgICAgZm9ybWF0OiAnanBlZycsXG4gICAgICBxdWFsaXR5OiAwLjlcbiAgICB9XG4gIH0pXG59KSk7XG5cbi8vIE1vY2sgZXJyb3IgaGFuZGxpbmcgdXRpbGl0aWVzXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9idXNpbmVzcy1sYXllci91dGlscy9lcnJvckhhbmRsaW5nJywgKCkgPT4gKHtcbiAgY2xhc3NpZnlUcnlvbkVycm9yOiBqZXN0LmZuKChlcnJvcikgPT4gKHtcbiAgICB1c2VyTWVzc2FnZTogJ0FuIGVycm9yIG9jY3VycmVkJyxcbiAgICB0ZWNobmljYWxNZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJyxcbiAgICBlcnJvckNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICByZXRyeWFibGU6IGZhbHNlLFxuICAgIGNhdGVnb3J5OiAnTkVUV09SS19FUlJPUicsXG4gICAgc2V2ZXJpdHk6ICdNRURJVU0nLFxuICAgIHJlY292ZXJ5QWN0aW9uczogW11cbiAgfSkpLFxuICBsb2dBbmRDbGFzc2lmeUVycm9yOiBqZXN0LmZuKChlcnJvcikgPT4gKHtcbiAgICB1c2VyTWVzc2FnZTogJ0FuIGVycm9yIG9jY3VycmVkJyxcbiAgICB0ZWNobmljYWxNZXNzYWdlOiBlcnJvci5kZXRhaWxzIHx8IGVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InLFxuICAgIGVycm9yQ29kZTogJ1VOS05PV05fRVJST1InLFxuICAgIHJldHJ5YWJsZTogZmFsc2UsXG4gICAgY2F0ZWdvcnk6ICdORVRXT1JLX0VSUk9SJyxcbiAgICBzZXZlcml0eTogJ01FRElVTScsXG4gICAgcmVjb3ZlcnlBY3Rpb25zOiBbXVxuICB9KSksXG4gIGlzRXJyb3JSZXRyeWFibGU6IGplc3QuZm4oKCkgPT4gdHJ1ZSlcbn0pKTtcblxuZGVzY3JpYmUoJ3VzZVRyeW9uTXV0YXRpb24gSG9vaycsICgpID0+IHtcbiAgbGV0IHF1ZXJ5Q2xpZW50OiBRdWVyeUNsaWVudDtcbiAgbGV0IGNvbnNvbGVSZWY6IFJldHVyblR5cGU8dHlwZW9mIG1vY2tDb25zb2xlPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBxdWVyeUNsaWVudCA9IGNyZWF0ZVRlc3RRdWVyeUNsaWVudCgpO1xuICAgIGNvbnNvbGVSZWYgPSBtb2NrQ29uc29sZSgpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vIENsZWFyIHRoZSBzcGVjaWZpYyBvcHRpbWlzdGljIHVwZGF0ZSBtb2Nrc1xuICAgIG1vY2tTdGFydE9wdGltaXN0aWNVcGRhdGUubW9ja0NsZWFyKCk7XG4gICAgbW9ja0NvbXBsZXRlT3B0aW1pc3RpY1VwZGF0ZS5tb2NrQ2xlYXIoKTtcbiAgICBtb2NrUm9sbGJhY2tPcHRpbWlzdGljVXBkYXRlLm1vY2tDbGVhcigpO1xuICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBxdWVyeUNsaWVudC5jbGVhcigpO1xuICAgIGNvbnNvbGVSZWYucmVzdG9yZSgpO1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCYXNpYyBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGNvcnJlY3QgZGVmYXVsdCBzdGF0ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1N1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzSWRsZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zdGF0dXMpLnRvQmUoJ2lkbGUnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQubXV0YXRlKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5tdXRhdGVBc3luYykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQucmVzZXQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFjY2VwdCBjdXN0b20gY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZzogVXNlVHJ5b25NdXRhdGlvbkNvbmZpZyA9IHtcbiAgICAgICAgZW5hYmxlUmV0cnk6IGZhbHNlLFxuICAgICAgICBtYXhSZXRyaWVzOiA1LFxuICAgICAgICBpbml0aWFsUmV0cnlEZWxheTogMjAwMCxcbiAgICAgICAgZW5hYmxlT3B0aW1pc3RpY1VwZGF0ZXM6IHRydWVcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKGNvbmZpZyksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0lkbGUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTdWNjZXNzIFNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzdWNjZXNzZnVsIG11dGF0aW9uIHdpdGggYmFzZTY0IHN0cmluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbigpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZGF0YSkudG9FcXVhbChtb2NrVHJ5b25SZXNwb25zZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnL2FwaS90cnlvbicsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJtb2RlbEltYWdlXCI6XCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC9tb2NrLW1vZGVsLWltYWdlXCInKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN1Y2Nlc3NmdWwgbXV0YXRpb24gd2l0aCBGaWxlIG9iamVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsnbW9jayBjb250ZW50J10sICd0ZXN0LmpwZycsIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pO1xuICAgICAgY29uc3QgdmFyaWFibGVzV2l0aEZpbGVzID0ge1xuICAgICAgICBtb2RlbEltYWdlOiBtb2NrRmlsZSxcbiAgICAgICAgYXBwYXJlbEltYWdlczogW21vY2tGaWxlXSxcbiAgICAgICAgb3B0aW9uczogbW9ja1RyeW9uVmFyaWFibGVzLm9wdGlvbnNcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZSh2YXJpYWJsZXNXaXRoRmlsZXMgYXMgYW55KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZGF0YSkudG9FcXVhbChtb2NrVHJ5b25SZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGwgc3VjY2VzcyBjYWxsYmFjayBvbiBzdWNjZXNzZnVsIG11dGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RyeW9uQVBJKG1vY2tUcnlvblJlc3BvbnNlKTtcblxuICAgICAgY29uc3Qgb25TdWNjZXNzID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0geyBvblN1Y2Nlc3MgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG9uU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIG1vY2tUcnlvblJlc3BvbnNlLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdmFyaWFibGVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpLFxuICAgICAgICAgIHN0YXJ0VGltZTogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDBcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdXRhdGlvbiB3aXRoIHRpbWVvdXQgY29uZmlndXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSwgdW5kZWZpbmVkLCAxMDApOyAvLyAxMDBtcyBkZWxheVxuXG4gICAgICBjb25zdCB2YXJpYWJsZXNXaXRoVGltZW91dCA9IHtcbiAgICAgICAgLi4ubW9ja1RyeW9uVmFyaWFibGVzLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgLi4ubW9ja1RyeW9uVmFyaWFibGVzLm9wdGlvbnMsXG4gICAgICAgICAgdGltZW91dDogNTAwMFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbigpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUodmFyaWFibGVzV2l0aFRpbWVvdXQpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0VxdWFsKG1vY2tUcnlvblJlc3BvbnNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIFNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBBUEkgZXJyb3IgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpRXJyb3IgPSB7XG4gICAgICAgIC4uLm1vY2tUcnlvbkVycm9yLFxuICAgICAgICBzdGF0dXM6IDQwMFxuICAgICAgfTtcbiAgICAgIG1vY2tUcnlvbkFQSSh1bmRlZmluZWQsIGFwaUVycm9yKTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIGVycm9yIGNhbGxiYWNrIG9uIGZhaWxlZCBtdXRhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaUVycm9yID0ge1xuICAgICAgICAuLi5tb2NrVHJ5b25FcnJvcixcbiAgICAgICAgZXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCcsXG4gICAgICAgIGRldGFpbHM6ICdBUEkgcmVxdWVzdCBmYWlsZWQnXG4gICAgICB9O1xuICAgICAgbW9ja1RyeW9uQVBJKHVuZGVmaW5lZCwgYXBpRXJyb3IpO1xuXG4gICAgICBjb25zdCBvbkVycm9yID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0geyBvbkVycm9yIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKGNvbmZpZyksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob25FcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBlcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkJyxcbiAgICAgICAgICBkZXRhaWxzOiAnQVBJIHJlcXVlc3QgZmFpbGVkJ1xuICAgICAgICB9KSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcobW9ja1RyeW9uVmFyaWFibGVzKSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHZhcmlhYmxlczogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcobW9ja1RyeW9uVmFyaWFibGVzKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgdGltZW91dCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGZldGNoIHRvIHNpbXVsYXRlIHRpbWVvdXRcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZW91dCcpO1xuICAgICAgICAgICAgZXJyb3IubmFtZSA9ICdBYm9ydEVycm9yJztcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfSwgNTApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2YXJpYWJsZXNXaXRoU2hvcnRUaW1lb3V0ID0ge1xuICAgICAgICAuLi5tb2NrVHJ5b25WYXJpYWJsZXMsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAuLi5tb2NrVHJ5b25WYXJpYWJsZXMub3B0aW9ucyxcbiAgICAgICAgICB0aW1lb3V0OiAxMCAvLyBWZXJ5IHNob3J0IHRpbWVvdXRcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKHZhcmlhYmxlc1dpdGhTaG9ydFRpbWVvdXQpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICAgIH0sIHsgdGltZW91dDogMTAwMCB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbWFnZSBwcm9jZXNzaW5nIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcHJvY2Vzc0ltYWdlRm9yVHJ5b24gfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9idXNpbmVzcy1sYXllci91dGlscy9pbWFnZVByb2Nlc3NpbmcnKTtcbiAgICAgIHByb2Nlc3NJbWFnZUZvclRyeW9uLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0ludmFsaWQgaW1hZ2UgZm9ybWF0JykpO1xuXG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsnaW52YWxpZCBjb250ZW50J10sICd0ZXN0LnR4dCcsIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xuICAgICAgY29uc3QgdmFyaWFibGVzV2l0aEludmFsaWRGaWxlID0ge1xuICAgICAgICBtb2RlbEltYWdlOiBtb2NrRmlsZSxcbiAgICAgICAgYXBwYXJlbEltYWdlczogW21vY2tGaWxlXSxcbiAgICAgICAgb3B0aW9uczogbW9ja1RyeW9uVmFyaWFibGVzLm9wdGlvbnNcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZSh2YXJpYWJsZXNXaXRoSW52YWxpZEZpbGUgYXMgYW55KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXRyeSBMb2dpYycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHJ5IG9uIHJldHJ5YWJsZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY2FsbENvdW50ID0gMDtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICBjYWxsQ291bnQrKztcbiAgICAgICAgaWYgKGNhbGxDb3VudCA8PSAyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9KVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShtb2NrVHJ5b25SZXNwb25zZSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0ge1xuICAgICAgICBlbmFibGVSZXRyeTogdHJ1ZSxcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgICAgaW5pdGlhbFJldHJ5RGVsYXk6IDEwIC8vIFNob3J0IGRlbGF5IGZvciB0ZXN0aW5nXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0sIHsgdGltZW91dDogNTAwMCB9KTtcblxuICAgICAgZXhwZWN0KGNhbGxDb3VudCkudG9CZSgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0VxdWFsKG1vY2tUcnlvblJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHJldHJ5IHdoZW4gcmV0cnkgaXMgZGlzYWJsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY2FsbENvdW50ID0gMDtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICBjYWxsQ291bnQrKztcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9KVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7XG4gICAgICAgIGVuYWJsZVJldHJ5OiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjYWxsQ291bnQpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0b3AgcmV0cnlpbmcgYWZ0ZXIgbWF4IHJldHJpZXMgcmVhY2hlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBjYWxsQ291bnQgPSAwO1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIGNhbGxDb3VudCsrO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbmZpZzogVXNlVHJ5b25NdXRhdGlvbkNvbmZpZyA9IHtcbiAgICAgICAgZW5hYmxlUmV0cnk6IHRydWUsXG4gICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgIGluaXRpYWxSZXRyeURlbGF5OiAxMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSwgeyB0aW1lb3V0OiA1MDAwIH0pO1xuXG4gICAgICBleHBlY3QoY2FsbENvdW50KS50b0JlKDMpOyAvLyBJbml0aWFsIGNhbGwgKyAyIHJldHJpZXNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09wdGltaXN0aWMgVXBkYXRlcyBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN0YXJ0IG9wdGltaXN0aWMgdXBkYXRlcyB3aGVuIGVuYWJsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7XG4gICAgICAgIGVuYWJsZU9wdGltaXN0aWNVcGRhdGVzOiB0cnVlLFxuICAgICAgICBvcHRpbWlzdGljQ29uZmlnOiB7XG4gICAgICAgICAgc2hvd1ByZXZpZXc6IHRydWUsXG4gICAgICAgICAgdXBkYXRlSGlzdG9yeTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N0YXJ0T3B0aW1pc3RpY1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKG1vY2tUcnlvblZhcmlhYmxlcyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzaG93UHJldmlldzogdHJ1ZSxcbiAgICAgICAgICB1cGRhdGVIaXN0b3J5OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tDb21wbGV0ZU9wdGltaXN0aWNVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnbW9jay1vcHRpbWlzdGljLWlkJyxcbiAgICAgICAgbW9ja1RyeW9uUmVzcG9uc2UsXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcm9sbGJhY2sgb3B0aW1pc3RpYyB1cGRhdGVzIG9uIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpRXJyb3IgPSBuZXcgRXJyb3IoJ0FQSSByZXF1ZXN0IGZhaWxlZCcpO1xuICAgICAgbW9ja1RyeW9uQVBJKHVuZGVmaW5lZCwgYXBpRXJyb3IpO1xuXG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7XG4gICAgICAgIGVuYWJsZU9wdGltaXN0aWNVcGRhdGVzOiB0cnVlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tSb2xsYmFja09wdGltaXN0aWNVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnbW9jay1vcHRpbWlzdGljLWlkJyxcbiAgICAgICAgZXhwZWN0LmFueShFcnJvcilcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYWNoZSBJbnZhbGlkYXRpb24gSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbnZhbGlkYXRlIGNhY2hlIG9uIHN1Y2Nlc3NmdWwgbXV0YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCB7IGludmFsaWRhdGVDYWNoZUFmdGVyTXV0YXRpb24gfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9idXNpbmVzcy1sYXllci91dGlscy9jYWNoZUludmFsaWRhdGlvbicpO1xuXG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7XG4gICAgICAgIGNhY2hlSW52YWxpZGF0aW9uQ29uZmlnOiB7XG4gICAgICAgICAgaW52YWxpZGF0ZUhpc3Rvcnk6IHRydWUsXG4gICAgICAgICAgaW52YWxpZGF0ZVVzZXJEYXRhOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKGNvbmZpZyksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChpbnZhbGlkYXRlQ2FjaGVBZnRlck11dGF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgcXVlcnlDbGllbnQsXG4gICAgICAgIG1vY2tUcnlvblJlc3BvbnNlLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpLFxuICAgICAgICBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBpbnZhbGlkYXRlSGlzdG9yeTogdHJ1ZSxcbiAgICAgICAgICBpbnZhbGlkYXRlVXNlckRhdGE6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjYWNoZSBpbnZhbGlkYXRpb24gZmFpbHVyZXMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHsgaW52YWxpZGF0ZUNhY2hlQWZ0ZXJNdXRhdGlvbiB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL2NhY2hlSW52YWxpZGF0aW9uJyk7XG4gICAgICBpbnZhbGlkYXRlQ2FjaGVBZnRlck11dGF0aW9uLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0NhY2hlIGludmFsaWRhdGlvbiBmYWlsZWQnKSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBzdGlsbCBzdWNjZWVkIGV2ZW4gaWYgY2FjaGUgaW52YWxpZGF0aW9uIGZhaWxzXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZGF0YSkudG9FcXVhbChtb2NrVHJ5b25SZXNwb25zZSk7XG4gICAgICBleHBlY3QoY29uc29sZVJlZi5tb2Nrcy53YXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ0ZhaWxlZCB0byBpbnZhbGlkYXRlIGNhY2hlIGFmdGVyIG11dGF0aW9uOicsXG4gICAgICAgIGV4cGVjdC5hbnkoRXJyb3IpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGlmZWN5Y2xlIENhbGxiYWNrcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgb25NdXRhdGUgY2FsbGJhY2sgYmVmb3JlIG11dGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RyeW9uQVBJKG1vY2tUcnlvblJlc3BvbnNlLCB1bmRlZmluZWQsIDEwMCk7XG5cbiAgICAgIGNvbnN0IG9uTXV0YXRlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgY3VzdG9tRGF0YTogJ3Rlc3QnIH0pO1xuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0geyBvbk11dGF0ZSB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob25NdXRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2V0dGxlZCBjYWxsYmFjayBhZnRlciBtdXRhdGlvbiBjb21wbGV0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCBvblNldHRsZWQgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7IG9uU2V0dGxlZCB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob25TZXR0bGVkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbW9ja1RyeW9uUmVzcG9uc2UsXG4gICAgICAgIG51bGwsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKG1vY2tUcnlvblZhcmlhYmxlcyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB2YXJpYWJsZXM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKG1vY2tUcnlvblZhcmlhYmxlcylcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGwgb25TZXR0bGVkIGNhbGxiYWNrIGFmdGVyIG11dGF0aW9uIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpRXJyb3IgPSBuZXcgRXJyb3IoJ0FQSSByZXF1ZXN0IGZhaWxlZCcpO1xuICAgICAgbW9ja1RyeW9uQVBJKHVuZGVmaW5lZCwgYXBpRXJyb3IpO1xuXG4gICAgICBjb25zdCBvblNldHRsZWQgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7IG9uU2V0dGxlZCB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG9uU2V0dGxlZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQnXG4gICAgICAgIH0pLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdmFyaWFibGVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzZXQgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlc2V0IG11dGF0aW9uIHN0YXRlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgbXV0YXRpb25cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0VxdWFsKG1vY2tUcnlvblJlc3BvbnNlKTtcblxuICAgICAgLy8gUmVzZXQgbXV0YXRpb25cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnJlc2V0KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNJZGxlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnN0YXR1cykudG9CZSgnaWRsZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgQVBJIHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGludmFsaWQ6ICdyZXNwb25zZScgfSkgLy8gTWlzc2luZyBpbWdfZ2VuZXJhdGVkIGZpZWxkXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgSlNPTiBwYXJzaW5nIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBKU09OJykpXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcG9uZW50IHVubW91bnQgZHVyaW5nIG11dGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RyeW9uQVBJKG1vY2tUcnlvblJlc3BvbnNlLCB1bmRlZmluZWQsIDUwMCk7IC8vIExvbmcgZGVsYXlcblxuICAgICAgY29uc3QgeyByZXN1bHQsIHVubW91bnQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oeyBlbmFibGVPcHRpbWlzdGljVXBkYXRlczogdHJ1ZSB9KSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgLy8gU3RhcnQgbXV0YXRpb25cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFVubW91bnQgY29tcG9uZW50IGJlZm9yZSBtdXRhdGlvbiBjb21wbGV0ZXNcbiAgICAgIHVubW91bnQoKTtcblxuICAgICAgLy8gV2FpdCBmb3IgY2xlYW51cFxuICAgICAgYXdhaXQgd2FpdEZvclByb21pc2VzKCk7XG5cbiAgICAgIC8vIFNob3VsZCByb2xsYmFjayBvcHRpbWlzdGljIHVwZGF0ZXMgb24gdW5tb3VudFxuICAgICAgZXhwZWN0KG1vY2tSb2xsYmFja09wdGltaXN0aWNVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnbW9jay1vcHRpbWlzdGljLWlkJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBtZXNzYWdlOiAnQ29tcG9uZW50IHVubW91bnRlZCcgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiZ2V0T3B0aW1pc3RpY1VwZGF0ZXNNYW5hZ2VyIiwic3RhcnRPcHRpbWlzdGljVXBkYXRlIiwibW9ja1N0YXJ0T3B0aW1pc3RpY1VwZGF0ZSIsImNvbXBsZXRlT3B0aW1pc3RpY1VwZGF0ZSIsIm1vY2tDb21wbGV0ZU9wdGltaXN0aWNVcGRhdGUiLCJyb2xsYmFja09wdGltaXN0aWNVcGRhdGUiLCJtb2NrUm9sbGJhY2tPcHRpbWlzdGljVXBkYXRlIiwiT3B0aW1pc3RpY1VwZGF0ZXNNYW5hZ2VyIiwiZm4iLCJpbnZhbGlkYXRlQ2FjaGVBZnRlck11dGF0aW9uIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1bmRlZmluZWQiLCJnZXRDYWNoZUludmFsaWRhdGlvbk1hbmFnZXIiLCJpbnZhbGlkYXRlQWZ0ZXJTdWNjZXNzIiwiaW52YWxpZGF0ZUFmdGVyRXJyb3IiLCJwcm9jZXNzSW1hZ2VGb3JUcnlvbiIsIm9yaWdpbmFsU2l6ZSIsInByb2Nlc3NlZFNpemUiLCJjb21wcmVzc2lvblJhdGlvIiwicHJvY2Vzc2luZ1RpbWUiLCJwcm9jZXNzZWRJbWFnZSIsIm1ldGFkYXRhIiwib3JpZ2luYWxEaW1lbnNpb25zIiwid2lkdGgiLCJoZWlnaHQiLCJwcm9jZXNzZWREaW1lbnNpb25zIiwiZm9ybWF0IiwicXVhbGl0eSIsImNsYXNzaWZ5VHJ5b25FcnJvciIsImVycm9yIiwidXNlck1lc3NhZ2UiLCJ0ZWNobmljYWxNZXNzYWdlIiwibWVzc2FnZSIsImVycm9yQ29kZSIsInJldHJ5YWJsZSIsImNhdGVnb3J5Iiwic2V2ZXJpdHkiLCJyZWNvdmVyeUFjdGlvbnMiLCJsb2dBbmRDbGFzc2lmeUVycm9yIiwiZGV0YWlscyIsImlzRXJyb3JSZXRyeWFibGUiLCJvcHRpbWlzdGljSWQiLCJ2YXJpYWJsZXMiLCJjb25maWciLCJzdGFydFRpbWUiLCJEYXRlIiwibm93Iiwicm9sbGJhY2tGdW5jdGlvbnMiLCJkZXNjcmliZSIsInF1ZXJ5Q2xpZW50IiwiY29uc29sZVJlZiIsImJlZm9yZUVhY2giLCJjcmVhdGVUZXN0UXVlcnlDbGllbnQiLCJtb2NrQ29uc29sZSIsImNsZWFyQWxsTW9ja3MiLCJtb2NrQ2xlYXIiLCJnbG9iYWwiLCJmZXRjaCIsImFmdGVyRWFjaCIsImNsZWFyIiwicmVzdG9yZSIsInJlc3RvcmVBbGxNb2NrcyIsIml0IiwicmVzdWx0IiwicmVuZGVySG9vayIsInVzZVRyeW9uTXV0YXRpb24iLCJ3cmFwcGVyIiwiY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyIiwiZXhwZWN0IiwiY3VycmVudCIsImRhdGEiLCJ0b0JlVW5kZWZpbmVkIiwidG9CZU51bGwiLCJpc0xvYWRpbmciLCJ0b0JlIiwiaXNTdWNjZXNzIiwiaXNFcnJvciIsImlzSWRsZSIsInN0YXR1cyIsIm11dGF0ZSIsIm11dGF0ZUFzeW5jIiwicmVzZXQiLCJlbmFibGVSZXRyeSIsIm1heFJldHJpZXMiLCJpbml0aWFsUmV0cnlEZWxheSIsImVuYWJsZU9wdGltaXN0aWNVcGRhdGVzIiwibW9ja1RyeW9uQVBJIiwibW9ja1RyeW9uUmVzcG9uc2UiLCJhY3QiLCJtb2NrVHJ5b25WYXJpYWJsZXMiLCJ3YWl0Rm9yIiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RyaW5nQ29udGFpbmluZyIsIm1vY2tGaWxlIiwiRmlsZSIsInR5cGUiLCJ2YXJpYWJsZXNXaXRoRmlsZXMiLCJtb2RlbEltYWdlIiwiYXBwYXJlbEltYWdlcyIsIm9wdGlvbnMiLCJvblN1Y2Nlc3MiLCJhbnkiLCJOdW1iZXIiLCJyZXRyeUNvdW50IiwidmFyaWFibGVzV2l0aFRpbWVvdXQiLCJ0aW1lb3V0IiwiYXBpRXJyb3IiLCJtb2NrVHJ5b25FcnJvciIsInRvQmVUcnV0aHkiLCJvbkVycm9yIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsIl8iLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJuYW1lIiwidmFyaWFibGVzV2l0aFNob3J0VGltZW91dCIsInJlcXVpcmUiLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJ2YXJpYWJsZXNXaXRoSW52YWxpZEZpbGUiLCJjYWxsQ291bnQiLCJyZXNvbHZlIiwib2siLCJqc29uIiwib3B0aW1pc3RpY0NvbmZpZyIsInNob3dQcmV2aWV3IiwidXBkYXRlSGlzdG9yeSIsIk9iamVjdCIsImNhY2hlSW52YWxpZGF0aW9uQ29uZmlnIiwiaW52YWxpZGF0ZUhpc3RvcnkiLCJpbnZhbGlkYXRlVXNlckRhdGEiLCJtb2NrcyIsIndhcm4iLCJvbk11dGF0ZSIsImN1c3RvbURhdGEiLCJvblNldHRsZWQiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJpbnZhbGlkIiwidW5tb3Vu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
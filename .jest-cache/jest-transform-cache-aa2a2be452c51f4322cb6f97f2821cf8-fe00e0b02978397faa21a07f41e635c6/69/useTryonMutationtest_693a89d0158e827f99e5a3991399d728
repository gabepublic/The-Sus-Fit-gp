dd52c4fc39646684b6eafcacb07a8c5e
// Comprehensive Tests for useTryonMutation Hook
// Tests covering all scenarios: success, error, retry, image processing, optimistic updates
"use strict";
// Mock the optimistic updates manager
jest.mock('../../../src/business-layer/utils/optimisticUpdates', ()=>({
        getOptimisticUpdatesManager: ()=>({
                startOptimisticUpdate: jest.fn(()=>({
                        optimisticId: 'mock-optimistic-id',
                        variables: _testUtils.mockTryonVariables,
                        config: {},
                        startTime: Date.now(),
                        rollbackFunctions: []
                    })),
                completeOptimisticUpdate: jest.fn(),
                rollbackOptimisticUpdate: jest.fn()
            }),
        OptimisticUpdatesManager: jest.fn(()=>({
                startOptimisticUpdate: jest.fn(),
                completeOptimisticUpdate: jest.fn(),
                rollbackOptimisticUpdate: jest.fn()
            }))
    }));
// Mock the cache invalidation utility
jest.mock('../../../src/business-layer/utils/cacheInvalidation', ()=>({
        invalidateCacheAfterMutation: jest.fn().mockResolvedValue(undefined),
        getCacheInvalidationManager: jest.fn(()=>({
                invalidateAfterSuccess: jest.fn(),
                invalidateAfterError: jest.fn()
            }))
    }));
// Mock image processing utilities
jest.mock('../../../src/business-layer/utils/imageProcessing', ()=>({
        processImageForTryon: jest.fn().mockResolvedValue({
            originalSize: 2048576,
            processedSize: 1048576,
            compressionRatio: 0.5,
            processingTime: 123,
            processedImage: 'data:image/jpeg;base64,processed-image',
            metadata: {
                originalDimensions: {
                    width: 1920,
                    height: 1080
                },
                processedDimensions: {
                    width: 1024,
                    height: 1536
                },
                format: 'jpeg',
                quality: 0.9
            }
        })
    }));
// Mock error handling utilities
jest.mock('../../../src/business-layer/utils/errorHandling', ()=>({
        classifyTryonError: jest.fn((error)=>({
                userMessage: 'An error occurred',
                technicalMessage: error.message || 'Unknown error',
                errorCode: 'UNKNOWN_ERROR',
                retryable: false,
                category: 'NETWORK_ERROR',
                severity: 'MEDIUM',
                recoveryActions: []
            })),
        logAndClassifyError: jest.fn((error)=>({
                userMessage: 'An error occurred',
                technicalMessage: error.details || error.message || 'Unknown error',
                errorCode: 'UNKNOWN_ERROR',
                retryable: false,
                category: 'NETWORK_ERROR',
                severity: 'MEDIUM',
                recoveryActions: []
            })),
        isErrorRetryable: jest.fn(()=>true)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _useTryonMutation = require("../../../src/business-layer/mutations/useTryonMutation");
const _testUtils = require("../../../src/business-layer/tests/testUtils");
describe('useTryonMutation Hook', ()=>{
    let queryClient;
    let consoleRef;
    beforeEach(()=>{
        queryClient = (0, _testUtils.createTestQueryClient)();
        consoleRef = (0, _testUtils.mockConsole)();
        jest.clearAllMocks();
        global.fetch = jest.fn();
    });
    afterEach(()=>{
        queryClient.clear();
        consoleRef.restore();
        jest.restoreAllMocks();
    });
    describe('Basic Functionality', ()=>{
        it('should initialize with correct default state', ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            expect(result.current.data).toBeUndefined();
            expect(result.current.error).toBeNull();
            expect(result.current.isLoading).toBe(false);
            expect(result.current.isSuccess).toBe(false);
            expect(result.current.isError).toBe(false);
            expect(result.current.isIdle).toBe(true);
            expect(result.current.status).toBe('idle');
            expect(typeof result.current.mutate).toBe('function');
            expect(typeof result.current.mutateAsync).toBe('function');
            expect(typeof result.current.reset).toBe('function');
        });
        it('should accept custom configuration', ()=>{
            const config = {
                enableRetry: false,
                maxRetries: 5,
                initialRetryDelay: 2000,
                enableOptimisticUpdates: true
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            expect(result.current.isIdle).toBe(true);
        });
    });
    describe('Success Scenarios', ()=>{
        it('should handle successful mutation with base64 strings', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
            expect(result.current.error).toBeNull();
            expect(result.current.isLoading).toBe(false);
            expect(global.fetch).toHaveBeenCalledWith('/api/tryon', expect.objectContaining({
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: expect.stringContaining('"modelImage":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/mock-model-image"')
            }));
        });
        it('should handle successful mutation with File objects', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const mockFile = new File([
                'mock content'
            ], 'test.jpg', {
                type: 'image/jpeg'
            });
            const variablesWithFiles = {
                modelImage: mockFile,
                apparelImages: [
                    mockFile
                ],
                options: _testUtils.mockTryonVariables.options
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithFiles);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
        });
        it('should call success callback on successful mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const onSuccess = jest.fn();
            const config = {
                onSuccess
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(onSuccess).toHaveBeenCalledWith(_testUtils.mockTryonResponse, expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables),
                startTime: expect.any(Number),
                retryCount: 0
            }));
        });
        it('should handle mutation with timeout configuration', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse, undefined, 100); // 100ms delay
            const variablesWithTimeout = {
                ..._testUtils.mockTryonVariables,
                options: {
                    ..._testUtils.mockTryonVariables.options,
                    timeout: 5000
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithTimeout);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
        });
    });
    describe('Error Scenarios', ()=>{
        it('should handle API error responses', async ()=>{
            const apiError = {
                ..._testUtils.mockTryonError,
                status: 400
            };
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
            expect(result.current.data).toBeUndefined();
            expect(result.current.isLoading).toBe(false);
        });
        it('should call error callback on failed mutation', async ()=>{
            const apiError = {
                ..._testUtils.mockTryonError,
                error: 'An error occurred',
                details: 'API request failed'
            };
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const onError = jest.fn();
            const config = {
                onError
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(onError).toHaveBeenCalledWith(expect.objectContaining({
                error: 'An error occurred',
                details: 'API request failed'
            }), expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables)
            }));
        });
        it('should handle network timeout errors', async ()=>{
            // Mock fetch to simulate timeout
            global.fetch.mockImplementation(()=>{
                return new Promise((_, reject)=>{
                    setTimeout(()=>{
                        const error = new Error('Request timeout');
                        error.name = 'AbortError';
                        reject(error);
                    }, 50);
                });
            });
            const variablesWithShortTimeout = {
                ..._testUtils.mockTryonVariables,
                options: {
                    ..._testUtils.mockTryonVariables.options,
                    timeout: 10 // Very short timeout
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithShortTimeout);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            }, {
                timeout: 1000
            });
            expect(result.current.error).toBeTruthy();
        });
        it('should handle image processing errors', async ()=>{
            const { processImageForTryon } = require('../../../src/business-layer/utils/imageProcessing');
            processImageForTryon.mockRejectedValueOnce(new Error('Invalid image format'));
            const mockFile = new File([
                'invalid content'
            ], 'test.txt', {
                type: 'text/plain'
            });
            const variablesWithInvalidFile = {
                modelImage: mockFile,
                apparelImages: [
                    mockFile
                ],
                options: _testUtils.mockTryonVariables.options
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(variablesWithInvalidFile);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
        });
    });
    describe('Retry Logic', ()=>{
        it('should retry on retryable errors', async ()=>{
            let callCount = 0;
            global.fetch.mockImplementation(()=>{
                callCount++;
                if (callCount <= 2) {
                    return Promise.resolve({
                        ok: false,
                        status: 500,
                        json: ()=>Promise.resolve({
                                error: 'Internal Server Error'
                            })
                    });
                }
                return Promise.resolve({
                    ok: true,
                    status: 200,
                    json: ()=>Promise.resolve(_testUtils.mockTryonResponse)
                });
            });
            const config = {
                enableRetry: true,
                maxRetries: 3,
                initialRetryDelay: 10 // Short delay for testing
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            }, {
                timeout: 5000
            });
            expect(callCount).toBe(3);
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
        });
        it('should not retry when retry is disabled', async ()=>{
            let callCount = 0;
            global.fetch.mockImplementation(()=>{
                callCount++;
                return Promise.resolve({
                    ok: false,
                    status: 500,
                    json: ()=>Promise.resolve({
                            error: 'Internal Server Error'
                        })
                });
            });
            const config = {
                enableRetry: false
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(callCount).toBe(1);
        });
        it('should stop retrying after max retries reached', async ()=>{
            let callCount = 0;
            global.fetch.mockImplementation(()=>{
                callCount++;
                return Promise.resolve({
                    ok: false,
                    status: 500,
                    json: ()=>Promise.resolve({
                            error: 'Internal Server Error'
                        })
                });
            });
            const config = {
                enableRetry: true,
                maxRetries: 2,
                initialRetryDelay: 10
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            }, {
                timeout: 5000
            });
            expect(callCount).toBe(3); // Initial call + 2 retries
        });
    });
    describe('Optimistic Updates Integration', ()=>{
        it('should start optimistic updates when enabled', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { getOptimisticUpdatesManager } = require('../../../src/business-layer/utils/optimisticUpdates');
            const mockOptimisticManager = getOptimisticUpdatesManager();
            const config = {
                enableOptimisticUpdates: true,
                optimisticConfig: {
                    showPreview: true,
                    updateHistory: true
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(mockOptimisticManager.startOptimisticUpdate).toHaveBeenCalledWith(expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                showPreview: true,
                updateHistory: true
            }));
            expect(mockOptimisticManager.completeOptimisticUpdate).toHaveBeenCalledWith('mock-optimistic-id', _testUtils.mockTryonResponse, expect.any(Object));
        });
        it('should rollback optimistic updates on error', async ()=>{
            const apiError = new Error('API request failed');
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const { getOptimisticUpdatesManager } = require('../../../src/business-layer/utils/optimisticUpdates');
            const mockOptimisticManager = getOptimisticUpdatesManager();
            const config = {
                enableOptimisticUpdates: true
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(mockOptimisticManager.rollbackOptimisticUpdate).toHaveBeenCalledWith('mock-optimistic-id', expect.any(Error));
        });
    });
    describe('Cache Invalidation Integration', ()=>{
        it('should invalidate cache on successful mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { invalidateCacheAfterMutation } = require('../../../src/business-layer/utils/cacheInvalidation');
            const config = {
                cacheInvalidationConfig: {
                    invalidateHistory: true,
                    invalidateUserData: true
                }
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(invalidateCacheAfterMutation).toHaveBeenCalledWith(queryClient, _testUtils.mockTryonResponse, expect.objectContaining(_testUtils.mockTryonVariables), expect.any(Object), expect.objectContaining({
                invalidateHistory: true,
                invalidateUserData: true
            }));
        });
        it('should handle cache invalidation failures gracefully', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { invalidateCacheAfterMutation } = require('../../../src/business-layer/utils/cacheInvalidation');
            invalidateCacheAfterMutation.mockRejectedValueOnce(new Error('Cache invalidation failed'));
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            // Should still succeed even if cache invalidation fails
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
            expect(consoleRef.mocks.warn).toHaveBeenCalledWith('Failed to invalidate cache after mutation:', expect.any(Error));
        });
    });
    describe('Lifecycle Callbacks', ()=>{
        it('should call onMutate callback before mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse, undefined, 100);
            const onMutate = jest.fn().mockResolvedValue({
                customData: 'test'
            });
            const config = {
                onMutate
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            expect(onMutate).toHaveBeenCalledWith(expect.objectContaining(_testUtils.mockTryonVariables));
        });
        it('should call onSettled callback after mutation completes', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const onSettled = jest.fn();
            const config = {
                onSettled
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(onSettled).toHaveBeenCalledWith(_testUtils.mockTryonResponse, null, expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables)
            }));
        });
        it('should call onSettled callback after mutation fails', async ()=>{
            const apiError = new Error('API request failed');
            (0, _testUtils.mockTryonAPI)(undefined, apiError);
            const onSettled = jest.fn();
            const config = {
                onSettled
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(config), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(onSettled).toHaveBeenCalledWith(undefined, expect.objectContaining({
                error: 'An error occurred'
            }), expect.objectContaining(_testUtils.mockTryonVariables), expect.objectContaining({
                variables: expect.objectContaining(_testUtils.mockTryonVariables)
            }));
        });
    });
    describe('Reset Functionality', ()=>{
        it('should reset mutation state correctly', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse);
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            // Execute mutation
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isSuccess).toBe(true);
            });
            expect(result.current.data).toEqual(_testUtils.mockTryonResponse);
            // Reset mutation
            (0, _react.act)(()=>{
                result.current.reset();
            });
            expect(result.current.data).toBeUndefined();
            expect(result.current.error).toBeNull();
            expect(result.current.isLoading).toBe(false);
            expect(result.current.isSuccess).toBe(false);
            expect(result.current.isError).toBe(false);
            expect(result.current.isIdle).toBe(true);
            expect(result.current.status).toBe('idle');
        });
    });
    describe('Edge Cases', ()=>{
        it('should handle malformed API responses', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: ()=>Promise.resolve({
                        invalid: 'response'
                    }) // Missing img_generated field
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
        });
        it('should handle JSON parsing errors', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: ()=>Promise.reject(new Error('Invalid JSON'))
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)(), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.isError).toBe(true);
            });
            expect(result.current.error).toBeTruthy();
        });
        it('should handle component unmount during mutation', async ()=>{
            (0, _testUtils.mockTryonAPI)(_testUtils.mockTryonResponse, undefined, 500); // Long delay
            const { result, unmount } = (0, _react.renderHook)(()=>(0, _useTryonMutation.useTryonMutation)({
                    enableOptimisticUpdates: true
                }), {
                wrapper: (0, _testUtils.createQueryClientWrapper)(queryClient)
            });
            const { getOptimisticUpdatesManager } = require('../../../src/business-layer/utils/optimisticUpdates');
            const mockOptimisticManager = getOptimisticUpdatesManager();
            // Start mutation
            await (0, _react.act)(async ()=>{
                result.current.mutate(_testUtils.mockTryonVariables);
            });
            // Unmount component before mutation completes
            unmount();
            // Wait for cleanup
            await (0, _testUtils.waitForPromises)();
            // Should rollback optimistic updates on unmount
            expect(mockOptimisticManager.rollbackOptimisticUpdate).toHaveBeenCalledWith('mock-optimistic-id', expect.objectContaining({
                message: 'Component unmounted'
            }));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL2J1c2luZXNzLWxheWVyL211dGF0aW9ucy91c2VUcnlvbk11dGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29tcHJlaGVuc2l2ZSBUZXN0cyBmb3IgdXNlVHJ5b25NdXRhdGlvbiBIb29rXG4vLyBUZXN0cyBjb3ZlcmluZyBhbGwgc2NlbmFyaW9zOiBzdWNjZXNzLCBlcnJvciwgcmV0cnksIGltYWdlIHByb2Nlc3NpbmcsIG9wdGltaXN0aWMgdXBkYXRlc1xuXG5pbXBvcnQgeyByZW5kZXJIb29rLCBhY3QsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IHVzZVRyeW9uTXV0YXRpb24gfSBmcm9tICcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvbXV0YXRpb25zL3VzZVRyeW9uTXV0YXRpb24nO1xuaW1wb3J0IHR5cGUge1xuICBUcnlvbk11dGF0aW9uVmFyaWFibGVzLFxuICBUcnlvbk11dGF0aW9uUmVzcG9uc2UsXG4gIFRyeW9uTXV0YXRpb25FcnJvcixcbiAgVXNlVHJ5b25NdXRhdGlvbkNvbmZpZ1xufSBmcm9tICcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdHlwZXMvdHJ5b24udHlwZXMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlVGVzdFF1ZXJ5Q2xpZW50LFxuICBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIsXG4gIG1vY2tUcnlvbkFQSSxcbiAgbW9ja1RyeW9uVmFyaWFibGVzLFxuICBtb2NrVHJ5b25SZXNwb25zZSxcbiAgbW9ja1RyeW9uRXJyb3IsXG4gIG1vY2tDb25zb2xlLFxuICB3YWl0Rm9yUHJvbWlzZXNcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3Rlc3RzL3Rlc3RVdGlscyc7XG5cbi8vIE1vY2sgdGhlIG9wdGltaXN0aWMgdXBkYXRlcyBtYW5hZ2VyXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9idXNpbmVzcy1sYXllci91dGlscy9vcHRpbWlzdGljVXBkYXRlcycsICgpID0+ICh7XG4gIGdldE9wdGltaXN0aWNVcGRhdGVzTWFuYWdlcjogKCkgPT4gKHtcbiAgICBzdGFydE9wdGltaXN0aWNVcGRhdGU6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIG9wdGltaXN0aWNJZDogJ21vY2stb3B0aW1pc3RpYy1pZCcsXG4gICAgICB2YXJpYWJsZXM6IG1vY2tUcnlvblZhcmlhYmxlcyxcbiAgICAgIGNvbmZpZzoge30sXG4gICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgICByb2xsYmFja0Z1bmN0aW9uczogW11cbiAgICB9KSksXG4gICAgY29tcGxldGVPcHRpbWlzdGljVXBkYXRlOiBqZXN0LmZuKCksXG4gICAgcm9sbGJhY2tPcHRpbWlzdGljVXBkYXRlOiBqZXN0LmZuKClcbiAgfSksXG4gIE9wdGltaXN0aWNVcGRhdGVzTWFuYWdlcjogamVzdC5mbigoKSA9PiAoe1xuICAgIHN0YXJ0T3B0aW1pc3RpY1VwZGF0ZTogamVzdC5mbigpLFxuICAgIGNvbXBsZXRlT3B0aW1pc3RpY1VwZGF0ZTogamVzdC5mbigpLFxuICAgIHJvbGxiYWNrT3B0aW1pc3RpY1VwZGF0ZTogamVzdC5mbigpXG4gIH0pKVxufSkpO1xuXG4vLyBNb2NrIHRoZSBjYWNoZSBpbnZhbGlkYXRpb24gdXRpbGl0eVxuamVzdC5tb2NrKCcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdXRpbHMvY2FjaGVJbnZhbGlkYXRpb24nLCAoKSA9PiAoe1xuICBpbnZhbGlkYXRlQ2FjaGVBZnRlck11dGF0aW9uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKSxcbiAgZ2V0Q2FjaGVJbnZhbGlkYXRpb25NYW5hZ2VyOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgaW52YWxpZGF0ZUFmdGVyU3VjY2VzczogamVzdC5mbigpLFxuICAgIGludmFsaWRhdGVBZnRlckVycm9yOiBqZXN0LmZuKClcbiAgfSkpXG59KSk7XG5cbi8vIE1vY2sgaW1hZ2UgcHJvY2Vzc2luZyB1dGlsaXRpZXNcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL2ltYWdlUHJvY2Vzc2luZycsICgpID0+ICh7XG4gIHByb2Nlc3NJbWFnZUZvclRyeW9uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgIG9yaWdpbmFsU2l6ZTogMjA0ODU3NixcbiAgICBwcm9jZXNzZWRTaXplOiAxMDQ4NTc2LFxuICAgIGNvbXByZXNzaW9uUmF0aW86IDAuNSxcbiAgICBwcm9jZXNzaW5nVGltZTogMTIzLFxuICAgIHByb2Nlc3NlZEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtaW1hZ2UnLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcmlnaW5hbERpbWVuc2lvbnM6IHsgd2lkdGg6IDE5MjAsIGhlaWdodDogMTA4MCB9LFxuICAgICAgcHJvY2Vzc2VkRGltZW5zaW9uczogeyB3aWR0aDogMTAyNCwgaGVpZ2h0OiAxNTM2IH0sXG4gICAgICBmb3JtYXQ6ICdqcGVnJyxcbiAgICAgIHF1YWxpdHk6IDAuOVxuICAgIH1cbiAgfSlcbn0pKTtcblxuLy8gTW9jayBlcnJvciBoYW5kbGluZyB1dGlsaXRpZXNcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL2Vycm9ySGFuZGxpbmcnLCAoKSA9PiAoe1xuICBjbGFzc2lmeVRyeW9uRXJyb3I6IGplc3QuZm4oKGVycm9yKSA9PiAoe1xuICAgIHVzZXJNZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQnLFxuICAgIHRlY2huaWNhbE1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InLFxuICAgIGVycm9yQ29kZTogJ1VOS05PV05fRVJST1InLFxuICAgIHJldHJ5YWJsZTogZmFsc2UsXG4gICAgY2F0ZWdvcnk6ICdORVRXT1JLX0VSUk9SJyxcbiAgICBzZXZlcml0eTogJ01FRElVTScsXG4gICAgcmVjb3ZlcnlBY3Rpb25zOiBbXVxuICB9KSksXG4gIGxvZ0FuZENsYXNzaWZ5RXJyb3I6IGplc3QuZm4oKGVycm9yKSA9PiAoe1xuICAgIHVzZXJNZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQnLFxuICAgIHRlY2huaWNhbE1lc3NhZ2U6IGVycm9yLmRldGFpbHMgfHwgZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsXG4gICAgZXJyb3JDb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgcmV0cnlhYmxlOiBmYWxzZSxcbiAgICBjYXRlZ29yeTogJ05FVFdPUktfRVJST1InLFxuICAgIHNldmVyaXR5OiAnTUVESVVNJyxcbiAgICByZWNvdmVyeUFjdGlvbnM6IFtdXG4gIH0pKSxcbiAgaXNFcnJvclJldHJ5YWJsZTogamVzdC5mbigoKSA9PiB0cnVlKVxufSkpO1xuXG5kZXNjcmliZSgndXNlVHJ5b25NdXRhdGlvbiBIb29rJywgKCkgPT4ge1xuICBsZXQgcXVlcnlDbGllbnQ6IFF1ZXJ5Q2xpZW50O1xuICBsZXQgY29uc29sZVJlZjogUmV0dXJuVHlwZTx0eXBlb2YgbW9ja0NvbnNvbGU+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHF1ZXJ5Q2xpZW50ID0gY3JlYXRlVGVzdFF1ZXJ5Q2xpZW50KCk7XG4gICAgY29uc29sZVJlZiA9IG1vY2tDb25zb2xlKCk7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHF1ZXJ5Q2xpZW50LmNsZWFyKCk7XG4gICAgY29uc29sZVJlZi5yZXN0b3JlKCk7XG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Jhc2ljIEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggY29ycmVjdCBkZWZhdWx0IHN0YXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNJZGxlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnN0YXR1cykudG9CZSgnaWRsZScpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5tdXRhdGUpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50Lm11dGF0ZUFzeW5jKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5yZXNldCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWNjZXB0IGN1c3RvbSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0ge1xuICAgICAgICBlbmFibGVSZXRyeTogZmFsc2UsXG4gICAgICAgIG1heFJldHJpZXM6IDUsXG4gICAgICAgIGluaXRpYWxSZXRyeURlbGF5OiAyMDAwLFxuICAgICAgICBlbmFibGVPcHRpbWlzdGljVXBkYXRlczogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzSWRsZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N1Y2Nlc3MgU2NlbmFyaW9zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN1Y2Nlc3NmdWwgbXV0YXRpb24gd2l0aCBiYXNlNjQgc3RyaW5ncycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0VxdWFsKG1vY2tUcnlvblJlc3BvbnNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICcvYXBpL3RyeW9uJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcIm1vZGVsSW1hZ2VcIjpcImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsLzlqLzRBQVFTa1pKUmdBQkFRQUFBUUFCQUFEL21vY2stbW9kZWwtaW1hZ2VcIicpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3VjY2Vzc2Z1bCBtdXRhdGlvbiB3aXRoIEZpbGUgb2JqZWN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IEZpbGUoWydtb2NrIGNvbnRlbnQnXSwgJ3Rlc3QuanBnJywgeyB0eXBlOiAnaW1hZ2UvanBlZycgfSk7XG4gICAgICBjb25zdCB2YXJpYWJsZXNXaXRoRmlsZXMgPSB7XG4gICAgICAgIG1vZGVsSW1hZ2U6IG1vY2tGaWxlLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbbW9ja0ZpbGVdLFxuICAgICAgICBvcHRpb25zOiBtb2NrVHJ5b25WYXJpYWJsZXMub3B0aW9uc1xuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKHZhcmlhYmxlc1dpdGhGaWxlcyBhcyBhbnkpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0VxdWFsKG1vY2tUcnlvblJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBzdWNjZXNzIGNhbGxiYWNrIG9uIHN1Y2Nlc3NmdWwgbXV0YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCBvblN1Y2Nlc3MgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7IG9uU3VjY2VzcyB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob25TdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbW9ja1RyeW9uUmVzcG9uc2UsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKG1vY2tUcnlvblZhcmlhYmxlcyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB2YXJpYWJsZXM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKG1vY2tUcnlvblZhcmlhYmxlcyksXG4gICAgICAgICAgc3RhcnRUaW1lOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgICAgcmV0cnlDb3VudDogMFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11dGF0aW9uIHdpdGggdGltZW91dCBjb25maWd1cmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RyeW9uQVBJKG1vY2tUcnlvblJlc3BvbnNlLCB1bmRlZmluZWQsIDEwMCk7IC8vIDEwMG1zIGRlbGF5XG5cbiAgICAgIGNvbnN0IHZhcmlhYmxlc1dpdGhUaW1lb3V0ID0ge1xuICAgICAgICAuLi5tb2NrVHJ5b25WYXJpYWJsZXMsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAuLi5tb2NrVHJ5b25WYXJpYWJsZXMub3B0aW9ucyxcbiAgICAgICAgICB0aW1lb3V0OiA1MDAwXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZSh2YXJpYWJsZXNXaXRoVGltZW91dCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvRXF1YWwobW9ja1RyeW9uUmVzcG9uc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgU2NlbmFyaW9zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvciByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcGlFcnJvciA9IHtcbiAgICAgICAgLi4ubW9ja1RyeW9uRXJyb3IsXG4gICAgICAgIHN0YXR1czogNDAwXG4gICAgICB9O1xuICAgICAgbW9ja1RyeW9uQVBJKHVuZGVmaW5lZCwgYXBpRXJyb3IpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbigpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZGF0YSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzTG9hZGluZykudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGwgZXJyb3IgY2FsbGJhY2sgb24gZmFpbGVkIG11dGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpRXJyb3IgPSB7XG4gICAgICAgIC4uLm1vY2tUcnlvbkVycm9yLFxuICAgICAgICBlcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkJyxcbiAgICAgICAgZGV0YWlsczogJ0FQSSByZXF1ZXN0IGZhaWxlZCdcbiAgICAgIH07XG4gICAgICBtb2NrVHJ5b25BUEkodW5kZWZpbmVkLCBhcGlFcnJvcik7XG5cbiAgICAgIGNvbnN0IG9uRXJyb3IgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7IG9uRXJyb3IgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChvbkVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgICAgIGRldGFpbHM6ICdBUEkgcmVxdWVzdCBmYWlsZWQnXG4gICAgICAgIH0pLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdmFyaWFibGVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmV0d29yayB0aW1lb3V0IGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZmV0Y2ggdG8gc2ltdWxhdGUgdGltZW91dFxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUmVxdWVzdCB0aW1lb3V0Jyk7XG4gICAgICAgICAgICBlcnJvci5uYW1lID0gJ0Fib3J0RXJyb3InO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZhcmlhYmxlc1dpdGhTaG9ydFRpbWVvdXQgPSB7XG4gICAgICAgIC4uLm1vY2tUcnlvblZhcmlhYmxlcyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIC4uLm1vY2tUcnlvblZhcmlhYmxlcy5vcHRpb25zLFxuICAgICAgICAgIHRpbWVvdXQ6IDEwIC8vIFZlcnkgc2hvcnQgdGltZW91dFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbigpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUodmFyaWFibGVzV2l0aFNob3J0VGltZW91dCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAxMDAwIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGltYWdlIHByb2Nlc3NpbmcgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBwcm9jZXNzSW1hZ2VGb3JUcnlvbiB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL2ltYWdlUHJvY2Vzc2luZycpO1xuICAgICAgcHJvY2Vzc0ltYWdlRm9yVHJ5b24ubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignSW52YWxpZCBpbWFnZSBmb3JtYXQnKSk7XG5cbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IEZpbGUoWydpbnZhbGlkIGNvbnRlbnQnXSwgJ3Rlc3QudHh0JywgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgICBjb25zdCB2YXJpYWJsZXNXaXRoSW52YWxpZEZpbGUgPSB7XG4gICAgICAgIG1vZGVsSW1hZ2U6IG1vY2tGaWxlLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbbW9ja0ZpbGVdLFxuICAgICAgICBvcHRpb25zOiBtb2NrVHJ5b25WYXJpYWJsZXMub3B0aW9uc1xuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKHZhcmlhYmxlc1dpdGhJbnZhbGlkRmlsZSBhcyBhbnkpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JldHJ5IExvZ2ljJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cnkgb24gcmV0cnlhYmxlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBjYWxsQ291bnQgPSAwO1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIGNhbGxDb3VudCsrO1xuICAgICAgICBpZiAoY2FsbENvdW50IDw9IDIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG1vY2tUcnlvblJlc3BvbnNlKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7XG4gICAgICAgIGVuYWJsZVJldHJ5OiB0cnVlLFxuICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICBpbml0aWFsUmV0cnlEZWxheTogMTAgLy8gU2hvcnQgZGVsYXkgZm9yIHRlc3RpbmdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKGNvbmZpZyksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSwgeyB0aW1lb3V0OiA1MDAwIH0pO1xuXG4gICAgICBleHBlY3QoY2FsbENvdW50KS50b0JlKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvRXF1YWwobW9ja1RyeW9uUmVzcG9uc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmV0cnkgd2hlbiByZXRyeSBpcyBkaXNhYmxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBjYWxsQ291bnQgPSAwO1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIGNhbGxDb3VudCsrO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbmZpZzogVXNlVHJ5b25NdXRhdGlvbkNvbmZpZyA9IHtcbiAgICAgICAgZW5hYmxlUmV0cnk6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNhbGxDb3VudCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3RvcCByZXRyeWluZyBhZnRlciBtYXggcmV0cmllcyByZWFjaGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgY2FsbENvdW50Kys7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicgfSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0ge1xuICAgICAgICBlbmFibGVSZXRyeTogdHJ1ZSxcbiAgICAgICAgbWF4UmV0cmllczogMixcbiAgICAgICAgaW5pdGlhbFJldHJ5RGVsYXk6IDEwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDUwMDAgfSk7XG5cbiAgICAgIGV4cGVjdChjYWxsQ291bnQpLnRvQmUoMyk7IC8vIEluaXRpYWwgY2FsbCArIDIgcmV0cmllc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnT3B0aW1pc3RpYyBVcGRhdGVzIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3RhcnQgb3B0aW1pc3RpYyB1cGRhdGVzIHdoZW4gZW5hYmxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZ2V0T3B0aW1pc3RpY1VwZGF0ZXNNYW5hZ2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdXRpbHMvb3B0aW1pc3RpY1VwZGF0ZXMnKTtcbiAgICAgIGNvbnN0IG1vY2tPcHRpbWlzdGljTWFuYWdlciA9IGdldE9wdGltaXN0aWNVcGRhdGVzTWFuYWdlcigpO1xuXG4gICAgICBjb25zdCBjb25maWc6IFVzZVRyeW9uTXV0YXRpb25Db25maWcgPSB7XG4gICAgICAgIGVuYWJsZU9wdGltaXN0aWNVcGRhdGVzOiB0cnVlLFxuICAgICAgICBvcHRpbWlzdGljQ29uZmlnOiB7XG4gICAgICAgICAgc2hvd1ByZXZpZXc6IHRydWUsXG4gICAgICAgICAgdXBkYXRlSGlzdG9yeTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja09wdGltaXN0aWNNYW5hZ2VyLnN0YXJ0T3B0aW1pc3RpY1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKG1vY2tUcnlvblZhcmlhYmxlcyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzaG93UHJldmlldzogdHJ1ZSxcbiAgICAgICAgICB1cGRhdGVIaXN0b3J5OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tPcHRpbWlzdGljTWFuYWdlci5jb21wbGV0ZU9wdGltaXN0aWNVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnbW9jay1vcHRpbWlzdGljLWlkJyxcbiAgICAgICAgbW9ja1RyeW9uUmVzcG9uc2UsXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcm9sbGJhY2sgb3B0aW1pc3RpYyB1cGRhdGVzIG9uIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpRXJyb3IgPSBuZXcgRXJyb3IoJ0FQSSByZXF1ZXN0IGZhaWxlZCcpO1xuICAgICAgbW9ja1RyeW9uQVBJKHVuZGVmaW5lZCwgYXBpRXJyb3IpO1xuXG4gICAgICBjb25zdCB7IGdldE9wdGltaXN0aWNVcGRhdGVzTWFuYWdlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyL3V0aWxzL29wdGltaXN0aWNVcGRhdGVzJyk7XG4gICAgICBjb25zdCBtb2NrT3B0aW1pc3RpY01hbmFnZXIgPSBnZXRPcHRpbWlzdGljVXBkYXRlc01hbmFnZXIoKTtcblxuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0ge1xuICAgICAgICBlbmFibGVPcHRpbWlzdGljVXBkYXRlczogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrT3B0aW1pc3RpY01hbmFnZXIucm9sbGJhY2tPcHRpbWlzdGljVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ21vY2stb3B0aW1pc3RpYy1pZCcsXG4gICAgICAgIGV4cGVjdC5hbnkoRXJyb3IpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FjaGUgSW52YWxpZGF0aW9uIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW52YWxpZGF0ZSBjYWNoZSBvbiBzdWNjZXNzZnVsIG11dGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RyeW9uQVBJKG1vY2tUcnlvblJlc3BvbnNlKTtcblxuICAgICAgY29uc3QgeyBpbnZhbGlkYXRlQ2FjaGVBZnRlck11dGF0aW9uIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdXRpbHMvY2FjaGVJbnZhbGlkYXRpb24nKTtcblxuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0ge1xuICAgICAgICBjYWNoZUludmFsaWRhdGlvbkNvbmZpZzoge1xuICAgICAgICAgIGludmFsaWRhdGVIaXN0b3J5OiB0cnVlLFxuICAgICAgICAgIGludmFsaWRhdGVVc2VyRGF0YTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbihjb25maWcpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoaW52YWxpZGF0ZUNhY2hlQWZ0ZXJNdXRhdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHF1ZXJ5Q2xpZW50LFxuICAgICAgICBtb2NrVHJ5b25SZXNwb25zZSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcobW9ja1RyeW9uVmFyaWFibGVzKSxcbiAgICAgICAgZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgaW52YWxpZGF0ZUhpc3Rvcnk6IHRydWUsXG4gICAgICAgICAgaW52YWxpZGF0ZVVzZXJEYXRhOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FjaGUgaW52YWxpZGF0aW9uIGZhaWx1cmVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCB7IGludmFsaWRhdGVDYWNoZUFmdGVyTXV0YXRpb24gfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9idXNpbmVzcy1sYXllci91dGlscy9jYWNoZUludmFsaWRhdGlvbicpO1xuICAgICAgaW52YWxpZGF0ZUNhY2hlQWZ0ZXJNdXRhdGlvbi5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdDYWNoZSBpbnZhbGlkYXRpb24gZmFpbGVkJykpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbigpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgc3RpbGwgc3VjY2VlZCBldmVuIGlmIGNhY2hlIGludmFsaWRhdGlvbiBmYWlsc1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmRhdGEpLnRvRXF1YWwobW9ja1RyeW9uUmVzcG9uc2UpO1xuICAgICAgZXhwZWN0KGNvbnNvbGVSZWYubW9ja3Mud2FybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdGYWlsZWQgdG8gaW52YWxpZGF0ZSBjYWNoZSBhZnRlciBtdXRhdGlvbjonLFxuICAgICAgICBleHBlY3QuYW55KEVycm9yKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xpZmVjeWNsZSBDYWxsYmFja3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uTXV0YXRlIGNhbGxiYWNrIGJlZm9yZSBtdXRhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSwgdW5kZWZpbmVkLCAxMDApO1xuXG4gICAgICBjb25zdCBvbk11dGF0ZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGN1c3RvbURhdGE6ICd0ZXN0JyB9KTtcbiAgICAgIGNvbnN0IGNvbmZpZzogVXNlVHJ5b25NdXRhdGlvbkNvbmZpZyA9IHsgb25NdXRhdGUgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG9uTXV0YXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcobW9ja1RyeW9uVmFyaWFibGVzKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBvblNldHRsZWQgY2FsbGJhY2sgYWZ0ZXIgbXV0YXRpb24gY29tcGxldGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RyeW9uQVBJKG1vY2tUcnlvblJlc3BvbnNlKTtcblxuICAgICAgY29uc3Qgb25TZXR0bGVkID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0geyBvblNldHRsZWQgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG9uU2V0dGxlZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIG1vY2tUcnlvblJlc3BvbnNlLFxuICAgICAgICBudWxsLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdmFyaWFibGVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhtb2NrVHJ5b25WYXJpYWJsZXMpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2V0dGxlZCBjYWxsYmFjayBhZnRlciBtdXRhdGlvbiBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaUVycm9yID0gbmV3IEVycm9yKCdBUEkgcmVxdWVzdCBmYWlsZWQnKTtcbiAgICAgIG1vY2tUcnlvbkFQSSh1bmRlZmluZWQsIGFwaUVycm9yKTtcblxuICAgICAgY29uc3Qgb25TZXR0bGVkID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgY29uZmlnOiBVc2VUcnlvbk11dGF0aW9uQ29uZmlnID0geyBvblNldHRsZWQgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soXG4gICAgICAgICgpID0+IHVzZVRyeW9uTXV0YXRpb24oY29uZmlnKSxcbiAgICAgICAge1xuICAgICAgICAgIHdyYXBwZXI6IGNyZWF0ZVF1ZXJ5Q2xpZW50V3JhcHBlcihxdWVyeUNsaWVudClcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0Vycm9yKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChvblNldHRsZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBlcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkJ1xuICAgICAgICB9KSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcobW9ja1RyeW9uVmFyaWFibGVzKSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHZhcmlhYmxlczogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcobW9ja1RyeW9uVmFyaWFibGVzKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc2V0IEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXNldCBtdXRhdGlvbiBzdGF0ZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJ5b25BUEkobW9ja1RyeW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKCkgPT4gdXNlVHJ5b25NdXRhdGlvbigpLFxuICAgICAgICB7XG4gICAgICAgICAgd3JhcHBlcjogY3JlYXRlUXVlcnlDbGllbnRXcmFwcGVyKHF1ZXJ5Q2xpZW50KVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICAvLyBFeGVjdXRlIG11dGF0aW9uXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5tdXRhdGUobW9ja1RyeW9uVmFyaWFibGVzKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZGF0YSkudG9FcXVhbChtb2NrVHJ5b25SZXNwb25zZSk7XG5cbiAgICAgIC8vIFJlc2V0IG11dGF0aW9uXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5yZXNldCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5kYXRhKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1N1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRXJyb3IpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzSWRsZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zdGF0dXMpLnRvQmUoJ2lkbGUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIEFQSSByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBpbnZhbGlkOiAncmVzcG9uc2UnIH0pIC8vIE1pc3NpbmcgaW1nX2dlbmVyYXRlZCBmaWVsZFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIEpTT04gcGFyc2luZyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0ludmFsaWQgSlNPTicpKVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKCksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm11dGF0ZShtb2NrVHJ5b25WYXJpYWJsZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBvbmVudCB1bm1vdW50IGR1cmluZyBtdXRhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcnlvbkFQSShtb2NrVHJ5b25SZXNwb25zZSwgdW5kZWZpbmVkLCA1MDApOyAvLyBMb25nIGRlbGF5XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0LCB1bm1vdW50IH0gPSByZW5kZXJIb29rKFxuICAgICAgICAoKSA9PiB1c2VUcnlvbk11dGF0aW9uKHsgZW5hYmxlT3B0aW1pc3RpY1VwZGF0ZXM6IHRydWUgfSksXG4gICAgICAgIHtcbiAgICAgICAgICB3cmFwcGVyOiBjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIocXVlcnlDbGllbnQpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHsgZ2V0T3B0aW1pc3RpY1VwZGF0ZXNNYW5hZ2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdXRpbHMvb3B0aW1pc3RpY1VwZGF0ZXMnKTtcbiAgICAgIGNvbnN0IG1vY2tPcHRpbWlzdGljTWFuYWdlciA9IGdldE9wdGltaXN0aWNVcGRhdGVzTWFuYWdlcigpO1xuXG4gICAgICAvLyBTdGFydCBtdXRhdGlvblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubXV0YXRlKG1vY2tUcnlvblZhcmlhYmxlcyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVW5tb3VudCBjb21wb25lbnQgYmVmb3JlIG11dGF0aW9uIGNvbXBsZXRlc1xuICAgICAgdW5tb3VudCgpO1xuXG4gICAgICAvLyBXYWl0IGZvciBjbGVhbnVwXG4gICAgICBhd2FpdCB3YWl0Rm9yUHJvbWlzZXMoKTtcblxuICAgICAgLy8gU2hvdWxkIHJvbGxiYWNrIG9wdGltaXN0aWMgdXBkYXRlcyBvbiB1bm1vdW50XG4gICAgICBleHBlY3QobW9ja09wdGltaXN0aWNNYW5hZ2VyLnJvbGxiYWNrT3B0aW1pc3RpY1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdtb2NrLW9wdGltaXN0aWMtaWQnLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IG1lc3NhZ2U6ICdDb21wb25lbnQgdW5tb3VudGVkJyB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJnZXRPcHRpbWlzdGljVXBkYXRlc01hbmFnZXIiLCJzdGFydE9wdGltaXN0aWNVcGRhdGUiLCJmbiIsIm9wdGltaXN0aWNJZCIsInZhcmlhYmxlcyIsIm1vY2tUcnlvblZhcmlhYmxlcyIsImNvbmZpZyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyb2xsYmFja0Z1bmN0aW9ucyIsImNvbXBsZXRlT3B0aW1pc3RpY1VwZGF0ZSIsInJvbGxiYWNrT3B0aW1pc3RpY1VwZGF0ZSIsIk9wdGltaXN0aWNVcGRhdGVzTWFuYWdlciIsImludmFsaWRhdGVDYWNoZUFmdGVyTXV0YXRpb24iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVuZGVmaW5lZCIsImdldENhY2hlSW52YWxpZGF0aW9uTWFuYWdlciIsImludmFsaWRhdGVBZnRlclN1Y2Nlc3MiLCJpbnZhbGlkYXRlQWZ0ZXJFcnJvciIsInByb2Nlc3NJbWFnZUZvclRyeW9uIiwib3JpZ2luYWxTaXplIiwicHJvY2Vzc2VkU2l6ZSIsImNvbXByZXNzaW9uUmF0aW8iLCJwcm9jZXNzaW5nVGltZSIsInByb2Nlc3NlZEltYWdlIiwibWV0YWRhdGEiLCJvcmlnaW5hbERpbWVuc2lvbnMiLCJ3aWR0aCIsImhlaWdodCIsInByb2Nlc3NlZERpbWVuc2lvbnMiLCJmb3JtYXQiLCJxdWFsaXR5IiwiY2xhc3NpZnlUcnlvbkVycm9yIiwiZXJyb3IiLCJ1c2VyTWVzc2FnZSIsInRlY2huaWNhbE1lc3NhZ2UiLCJtZXNzYWdlIiwiZXJyb3JDb2RlIiwicmV0cnlhYmxlIiwiY2F0ZWdvcnkiLCJzZXZlcml0eSIsInJlY292ZXJ5QWN0aW9ucyIsImxvZ0FuZENsYXNzaWZ5RXJyb3IiLCJkZXRhaWxzIiwiaXNFcnJvclJldHJ5YWJsZSIsImRlc2NyaWJlIiwicXVlcnlDbGllbnQiLCJjb25zb2xlUmVmIiwiYmVmb3JlRWFjaCIsImNyZWF0ZVRlc3RRdWVyeUNsaWVudCIsIm1vY2tDb25zb2xlIiwiY2xlYXJBbGxNb2NrcyIsImdsb2JhbCIsImZldGNoIiwiYWZ0ZXJFYWNoIiwiY2xlYXIiLCJyZXN0b3JlIiwicmVzdG9yZUFsbE1vY2tzIiwiaXQiLCJyZXN1bHQiLCJyZW5kZXJIb29rIiwidXNlVHJ5b25NdXRhdGlvbiIsIndyYXBwZXIiLCJjcmVhdGVRdWVyeUNsaWVudFdyYXBwZXIiLCJleHBlY3QiLCJjdXJyZW50IiwiZGF0YSIsInRvQmVVbmRlZmluZWQiLCJ0b0JlTnVsbCIsImlzTG9hZGluZyIsInRvQmUiLCJpc1N1Y2Nlc3MiLCJpc0Vycm9yIiwiaXNJZGxlIiwic3RhdHVzIiwibXV0YXRlIiwibXV0YXRlQXN5bmMiLCJyZXNldCIsImVuYWJsZVJldHJ5IiwibWF4UmV0cmllcyIsImluaXRpYWxSZXRyeURlbGF5IiwiZW5hYmxlT3B0aW1pc3RpY1VwZGF0ZXMiLCJtb2NrVHJ5b25BUEkiLCJtb2NrVHJ5b25SZXNwb25zZSIsImFjdCIsIndhaXRGb3IiLCJ0b0VxdWFsIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzdHJpbmdDb250YWluaW5nIiwibW9ja0ZpbGUiLCJGaWxlIiwidHlwZSIsInZhcmlhYmxlc1dpdGhGaWxlcyIsIm1vZGVsSW1hZ2UiLCJhcHBhcmVsSW1hZ2VzIiwib3B0aW9ucyIsIm9uU3VjY2VzcyIsImFueSIsIk51bWJlciIsInJldHJ5Q291bnQiLCJ2YXJpYWJsZXNXaXRoVGltZW91dCIsInRpbWVvdXQiLCJhcGlFcnJvciIsIm1vY2tUcnlvbkVycm9yIiwidG9CZVRydXRoeSIsIm9uRXJyb3IiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJQcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJFcnJvciIsIm5hbWUiLCJ2YXJpYWJsZXNXaXRoU2hvcnRUaW1lb3V0IiwicmVxdWlyZSIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsInZhcmlhYmxlc1dpdGhJbnZhbGlkRmlsZSIsImNhbGxDb3VudCIsInJlc29sdmUiLCJvayIsImpzb24iLCJtb2NrT3B0aW1pc3RpY01hbmFnZXIiLCJvcHRpbWlzdGljQ29uZmlnIiwic2hvd1ByZXZpZXciLCJ1cGRhdGVIaXN0b3J5IiwiT2JqZWN0IiwiY2FjaGVJbnZhbGlkYXRpb25Db25maWciLCJpbnZhbGlkYXRlSGlzdG9yeSIsImludmFsaWRhdGVVc2VyRGF0YSIsIm1vY2tzIiwid2FybiIsIm9uTXV0YXRlIiwiY3VzdG9tRGF0YSIsIm9uU2V0dGxlZCIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsImludmFsaWQiLCJ1bm1vdW50Iiwid2FpdEZvclByb21pc2VzIl0sIm1hcHBpbmdzIjoiQUFBQSxnREFBZ0Q7QUFDaEQsNEZBQTRGOztBQXNCNUYsc0NBQXNDO0FBQ3RDQSxLQUFLQyxJQUFJLENBQUMsdURBQXVELElBQU8sQ0FBQTtRQUN0RUMsNkJBQTZCLElBQU8sQ0FBQTtnQkFDbENDLHVCQUF1QkgsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTt3QkFDcENDLGNBQWM7d0JBQ2RDLFdBQVdDLDZCQUFrQjt3QkFDN0JDLFFBQVEsQ0FBQzt3QkFDVEMsV0FBV0MsS0FBS0MsR0FBRzt3QkFDbkJDLG1CQUFtQixFQUFFO29CQUN2QixDQUFBO2dCQUNBQywwQkFBMEJiLEtBQUtJLEVBQUU7Z0JBQ2pDVSwwQkFBMEJkLEtBQUtJLEVBQUU7WUFDbkMsQ0FBQTtRQUNBVywwQkFBMEJmLEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQ3ZDRCx1QkFBdUJILEtBQUtJLEVBQUU7Z0JBQzlCUywwQkFBMEJiLEtBQUtJLEVBQUU7Z0JBQ2pDVSwwQkFBMEJkLEtBQUtJLEVBQUU7WUFDbkMsQ0FBQTtJQUNGLENBQUE7QUFFQSxzQ0FBc0M7QUFDdENKLEtBQUtDLElBQUksQ0FBQyx1REFBdUQsSUFBTyxDQUFBO1FBQ3RFZSw4QkFBOEJoQixLQUFLSSxFQUFFLEdBQUdhLGlCQUFpQixDQUFDQztRQUMxREMsNkJBQTZCbkIsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTtnQkFDMUNnQix3QkFBd0JwQixLQUFLSSxFQUFFO2dCQUMvQmlCLHNCQUFzQnJCLEtBQUtJLEVBQUU7WUFDL0IsQ0FBQTtJQUNGLENBQUE7QUFFQSxrQ0FBa0M7QUFDbENKLEtBQUtDLElBQUksQ0FBQyxxREFBcUQsSUFBTyxDQUFBO1FBQ3BFcUIsc0JBQXNCdEIsS0FBS0ksRUFBRSxHQUFHYSxpQkFBaUIsQ0FBQztZQUNoRE0sY0FBYztZQUNkQyxlQUFlO1lBQ2ZDLGtCQUFrQjtZQUNsQkMsZ0JB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
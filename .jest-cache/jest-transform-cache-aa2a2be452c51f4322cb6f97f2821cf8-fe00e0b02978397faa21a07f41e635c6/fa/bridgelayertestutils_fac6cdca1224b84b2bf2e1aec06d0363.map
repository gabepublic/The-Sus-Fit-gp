{"version":3,"sources":["/Users/willstreeter/WebstormProjects/vibe-coding/those-people/The-Sus-Fit-gp/__tests__/test-utils/bridge-layer-test-utils.tsx"],"sourcesContent":["/**\n * Bridge Layer Testing Utilities\n * Specialized utilities for testing bridge layer hooks and their integration with business layer\n */\n\nimport React from 'react';\nimport { renderHook, RenderHookOptions, RenderHookResult } from '@testing-library/react';\nimport { waitFor, act } from '@testing-library/react';\nimport { QueryClient } from '@tanstack/react-query';\nimport { \n  HookTestUtils, \n  MutationTestUtils, \n  MockUtils, \n  TestProviders,\n  type QueryTestConfig \n} from './react-query-test-utils';\nimport { ToastProvider } from '../../src/components/ToastProvider';\n\n/**\n * Configuration for bridge layer testing\n */\nexport interface BridgeLayerTestConfig extends QueryTestConfig {\n  /** Mock toast notifications */\n  mockToast?: boolean;\n  /** Mock file APIs */\n  mockFileAPIs?: boolean;\n  /** Mock fetch for API calls */\n  mockFetch?: boolean;\n  /** Initial state for workflow testing */\n  initialWorkflowState?: any;\n}\n\n/**\n * Default configuration for bridge layer testing\n */\nconst DEFAULT_BRIDGE_CONFIG: Required<BridgeLayerTestConfig> = {\n  queryClientConfig: {\n    defaultOptions: {\n      queries: { retry: false, gcTime: 0 },\n      mutations: { retry: false },\n    },\n  },\n  disableRetries: true,\n  disableCache: true,\n  onError: () => {},\n  mockToast: true,\n  mockFileAPIs: true,\n  mockFetch: true,\n  initialWorkflowState: null,\n};\n\n/**\n * Bridge layer testing utilities\n */\nexport class BridgeLayerTestUtils extends MutationTestUtils {\n  private config: Required<BridgeLayerTestConfig>;\n  private mocks: {\n    fetch?: jest.MockedFunction<typeof fetch>;\n    toast?: jest.MockedFunction<any>;\n    fileReader?: jest.MockedFunction<any>;\n    URL?: jest.MockedFunction<any>;\n  } = {};\n\n  constructor(config: BridgeLayerTestConfig = {}) {\n    const finalConfig = { ...DEFAULT_BRIDGE_CONFIG, ...config };\n    super(finalConfig);\n    this.config = finalConfig;\n    this.setupMocks();\n  }\n\n  /**\n   * Setup mocks for bridge layer testing\n   */\n  private setupMocks(): void {\n    // Mock fetch if enabled\n    if (this.config.mockFetch && !this.mocks.fetch) {\n      this.mocks.fetch = jest.fn() as jest.MockedFunction<typeof fetch>;\n      global.fetch = this.mocks.fetch;\n    }\n\n    // Mock FileReader if enabled\n    if (this.config.mockFileAPIs && !this.mocks.fileReader) {\n      this.mocks.fileReader = jest.fn().mockImplementation(() => ({\n        readAsDataURL: jest.fn(),\n        result: null,\n        onload: null,\n        onerror: null,\n      }));\n      global.FileReader = this.mocks.fileReader;\n    }\n\n    // Mock URL.createObjectURL if enabled\n    if (this.config.mockFileAPIs && !this.mocks.URL) {\n      this.mocks.URL = jest.fn().mockReturnValue('mock-url://test-file');\n      global.URL.createObjectURL = this.mocks.URL;\n      global.URL.revokeObjectURL = jest.fn();\n    }\n\n    // Mock toast if enabled\n    if (this.config.mockToast && !this.mocks.toast) {\n      this.mocks.toast = jest.fn();\n    }\n  }\n\n  /**\n   * Get mock functions for inspection\n   */\n  getMocks() {\n    return this.mocks;\n  }\n\n  /**\n   * Reset all mocks\n   */\n  resetMocks(): void {\n    Object.values(this.mocks).forEach(mock => {\n      if (mock && typeof mock.mockClear === 'function') {\n        mock.mockClear();\n      }\n    });\n  }\n\n  /**\n   * Setup successful API response mock\n   */\n  mockSuccessfulApiCall(\n    response: any = { img_generated: 'mock-generated-image-data' },\n    delay: number = 0\n  ): void {\n    if (this.mocks.fetch) {\n      this.mocks.fetch.mockImplementation(() =>\n        new Promise(resolve => \n          setTimeout(() => resolve({\n            ok: true,\n            json: () => Promise.resolve(response),\n          } as Response), delay)\n        )\n      );\n    }\n  }\n\n  /**\n   * Setup API error response mock\n   */\n  mockApiError(\n    error: string = 'Test API error',\n    status: number = 500,\n    delay: number = 0\n  ): void {\n    if (this.mocks.fetch) {\n      this.mocks.fetch.mockImplementation(() =>\n        new Promise(resolve => \n          setTimeout(() => resolve({\n            ok: false,\n            status,\n            json: () => Promise.resolve({ error }),\n          } as Response), delay)\n        )\n      );\n    }\n  }\n\n  /**\n   * Setup API timeout mock\n   */\n  mockApiTimeout(timeoutMs: number = 1000): void {\n    if (this.mocks.fetch) {\n      this.mocks.fetch.mockImplementation(() =>\n        new Promise((_, reject) => \n          setTimeout(() => reject(new Error('AbortError')), timeoutMs)\n        )\n      );\n    }\n  }\n\n  /**\n   * Mock file reading operation\n   */\n  mockFileRead(\n    result: string = 'data:image/jpeg;base64,mock-file-data',\n    delay: number = 0\n  ): void {\n    if (this.mocks.fileReader) {\n      this.mocks.fileReader.mockImplementation(() => {\n        const reader = {\n          readAsDataURL: jest.fn((file: File) => {\n            setTimeout(() => {\n              reader.result = result;\n              if (reader.onload) reader.onload({ target: reader } as any);\n            }, delay);\n          }),\n          result: null,\n          onload: null,\n          onerror: null,\n        };\n        return reader;\n      });\n    }\n  }\n\n  /**\n   * Mock file read error\n   */\n  mockFileReadError(error: string = 'File read error'): void {\n    if (this.mocks.fileReader) {\n      this.mocks.fileReader.mockImplementation(() => {\n        const reader = {\n          readAsDataURL: jest.fn(() => {\n            setTimeout(() => {\n              if (reader.onerror) reader.onerror(new Error(error) as any);\n            }, 0);\n          }),\n          result: null,\n          onload: null,\n          onerror: null,\n        };\n        return reader;\n      });\n    }\n  }\n\n  /**\n   * Create wrapper with bridge layer providers\n   */\n  createBridgeWrapper() {\n    const queryClient = this.getQueryClient();\n    \n    return function BridgeTestWrapper({ children }: { children: React.ReactNode }) {\n      return (\n        <ToastProvider>\n          <TestProviders queryClient={queryClient}>\n            {children}\n          </TestProviders>\n        </ToastProvider>\n      );\n    };\n  }\n\n  /**\n   * Clean up after tests\n   */\n  cleanup(): void {\n    this.resetState();\n    this.resetMocks();\n  }\n}\n\n/**\n * Render hook with bridge layer providers\n */\nexport function renderBridgeHook<TProps, TResult>(\n  hook: (props: TProps) => TResult,\n  options: {\n    initialProps?: TProps;\n    bridgeConfig?: BridgeLayerTestConfig;\n    renderOptions?: Omit<RenderHookOptions<TProps>, 'wrapper'>;\n  } = {}\n): RenderHookResult<TResult, TProps> & { \n  testUtils: BridgeLayerTestUtils;\n  waitForWorkflow: (predicate: (result: TResult) => boolean, timeout?: number) => Promise<void>;\n} {\n  const { initialProps, bridgeConfig = {}, renderOptions = {} } = options;\n  \n  const testUtils = new BridgeLayerTestUtils(bridgeConfig);\n  const wrapper = testUtils.createBridgeWrapper();\n\n  const result = renderHook(hook, {\n    initialProps,\n    wrapper,\n    ...renderOptions,\n  });\n\n  /**\n   * Wait for workflow state to match predicate\n   */\n  const waitForWorkflow = async (\n    predicate: (result: TResult) => boolean,\n    timeout: number = 5000\n  ): Promise<void> => {\n    await waitFor(() => {\n      if (!predicate(result.current)) {\n        throw new Error('Workflow state not yet matching predicate');\n      }\n    }, { timeout });\n  };\n\n  return {\n    ...result,\n    testUtils,\n    waitForWorkflow,\n  };\n}\n\n/**\n * Workflow testing utilities\n */\nexport class WorkflowTestUtils {\n  /**\n   * Create mock files for testing\n   */\n  static createMockFiles() {\n    return {\n      userImage: MockUtils.createMockFile('user-image-data', 'user.jpg', 'image/jpeg'),\n      apparelImage: MockUtils.createMockFile('apparel-image-data', 'apparel.jpg', 'image/jpeg'),\n      invalidFile: MockUtils.createMockFile('invalid-data', 'document.txt', 'text/plain'),\n      largeFile: MockUtils.createMockFile('x'.repeat(15 * 1024 * 1024), 'large.jpg', 'image/jpeg'), // 15MB\n    };\n  }\n\n  /**\n   * Create mock image URLs\n   */\n  static createMockImageUrls() {\n    return {\n      userImage: MockUtils.createMockImageUrl('user-image-data'),\n      apparelImage: MockUtils.createMockImageUrl('apparel-image-data'),\n      generatedImage: MockUtils.createMockImageUrl('generated-image-data'),\n    };\n  }\n\n  /**\n   * Create mock workflow state\n   */\n  static createMockWorkflowState(overrides: any = {}) {\n    return {\n      isCapturing: false,\n      leftCardImage: null,\n      rightCardImage: null,\n      showPolaroid: false,\n      userImageFile: null,\n      apparelImageFile: null,\n      generatedImage: null,\n      hasError: false,\n      progress: 0,\n      error: null,\n      ...overrides,\n    };\n  }\n\n  /**\n   * Simulate complete workflow\n   */\n  static async simulateCompleteWorkflow(\n    testUtils: BridgeLayerTestUtils,\n    mockFiles: ReturnType<typeof WorkflowTestUtils.createMockFiles>\n  ) {\n    // Setup successful responses\n    testUtils.mockFileRead('data:image/jpeg;base64,user-image-data');\n    testUtils.mockSuccessfulApiCall();\n\n    return {\n      userFile: mockFiles.userImage,\n      apparelFile: mockFiles.apparelImage,\n      expectedResult: 'mock-generated-image-data',\n    };\n  }\n}\n\n/**\n * Performance testing utilities for bridge layer\n */\nexport class BridgePerformanceUtils {\n  private performanceMarks: Map<string, number> = new Map();\n\n  /**\n   * Start performance measurement\n   */\n  startMeasurement(label: string): void {\n    this.performanceMarks.set(label, performance.now());\n  }\n\n  /**\n   * End performance measurement\n   */\n  endMeasurement(label: string): number {\n    const startTime = this.performanceMarks.get(label);\n    if (!startTime) {\n      throw new Error(`No start time found for label: ${label}`);\n    }\n    \n    const duration = performance.now() - startTime;\n    this.performanceMarks.delete(label);\n    return duration;\n  }\n\n  /**\n   * Measure hook render time\n   */\n  async measureHookRender<T>(\n    hookFn: () => T,\n    label: string = 'hook-render'\n  ): Promise<{ result: T; duration: number }> {\n    this.startMeasurement(label);\n    const result = hookFn();\n    const duration = this.endMeasurement(label);\n    \n    return { result, duration };\n  }\n\n  /**\n   * Assert performance threshold\n   */\n  assertPerformance(\n    duration: number,\n    maxDuration: number,\n    operation: string\n  ): void {\n    if (duration > maxDuration) {\n      throw new Error(\n        `Performance assertion failed: ${operation} took ${duration}ms, expected < ${maxDuration}ms`\n      );\n    }\n  }\n}\n\n/**\n * Export utilities\n */\nexport {\n  BridgeLayerTestUtils,\n  WorkflowTestUtils,\n  BridgePerformanceUtils,\n  renderBridgeHook,\n};\n\n/**\n * Default export\n */\nexport default {\n  BridgeLayerTestUtils,\n  WorkflowTestUtils,\n  BridgePerformanceUtils,\n  renderBridgeHook,\n};"],"names":["BridgeLayerTestUtils","BridgePerformanceUtils","WorkflowTestUtils","renderBridgeHook","DEFAULT_BRIDGE_CONFIG","queryClientConfig","defaultOptions","queries","retry","gcTime","mutations","disableRetries","disableCache","onError","mockToast","mockFileAPIs","mockFetch","initialWorkflowState","MutationTestUtils","constructor","config","finalConfig","mocks","setupMocks","fetch","jest","fn","global","fileReader","mockImplementation","readAsDataURL","result","onload","onerror","FileReader","URL","mockReturnValue","createObjectURL","revokeObjectURL","toast","getMocks","resetMocks","Object","values","forEach","mock","mockClear","mockSuccessfulApiCall","response","img_generated","delay","Promise","resolve","setTimeout","ok","json","mockApiError","error","status","mockApiTimeout","timeoutMs","_","reject","Error","mockFileRead","reader","file","target","mockFileReadError","createBridgeWrapper","queryClient","getQueryClient","BridgeTestWrapper","children","ToastProvider","TestProviders","cleanup","resetState","hook","options","initialProps","bridgeConfig","renderOptions","testUtils","wrapper","renderHook","waitForWorkflow","predicate","timeout","waitFor","current","createMockFiles","userImage","MockUtils","createMockFile","apparelImage","invalidFile","largeFile","repeat","createMockImageUrls","createMockImageUrl","generatedImage","createMockWorkflowState","overrides","isCapturing","leftCardImage","rightCardImage","showPolaroid","userImageFile","apparelImageFile","hasError","progress","simulateCompleteWorkflow","mockFiles","userFile","apparelFile","expectedResult","startMeasurement","label","performanceMarks","set","performance","now","endMeasurement","startTime","get","duration","delete","measureHookRender","hookFn","assertPerformance","maxDuration","operation","Map"],"mappings":"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"}
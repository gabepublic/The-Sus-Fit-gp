e79eb090755d2d9d9dddab386f976896
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    WorkflowState: function() {
        return WorkflowState;
    },
    useTryonWorkflow: function() {
        return useTryonWorkflow;
    }
});
const _react = require("react");
const _businesslayer = require("../business-layer");
const _image = require("../utils/image");
const _errorToMessage = require("../lib/errorToMessage");
var WorkflowState = /*#__PURE__*/ function(WorkflowState) {
    WorkflowState["IDLE"] = "idle";
    WorkflowState["UPLOADING"] = "uploading";
    WorkflowState["PROCESSING"] = "processing";
    WorkflowState["GENERATING"] = "generating";
    WorkflowState["COMPLETE"] = "complete";
    WorkflowState["ERROR"] = "error";
    return WorkflowState;
}({});
/**
 * Default configuration
 */ const DEFAULT_CONFIG = {
    timeoutMs: 60000,
    compressionLimitKB: 2048,
    autoRetry: false,
    maxRetries: 3,
    debug: process.env.NODE_ENV === 'development',
    imageProcessing: {
        targetWidth: 1024,
        targetHeight: 1536,
        quality: 0.9
    }
};
function useTryonWorkflow(config = {}, showToast) {
    const finalConfig = {
        ...DEFAULT_CONFIG,
        ...config
    };
    // Business layer hooks
    const tryonMutation = (0, _businesslayer.useTryonMutation)();
    const { processBasic } = (0, _businesslayer.useImageProcessing)();
    // Abort controller for cancellation
    const abortControllerRef = (0, _react.useRef)(null);
    // Core state
    const [state, setState] = (0, _react.useState)({
        workflowState: "idle",
        isCapturing: false,
        showPolaroid: false,
        generatedImage: null,
        hasError: false,
        userImageFile: null,
        apparelImageFile: null,
        leftCardImage: null,
        rightCardImage: null,
        progress: 0,
        error: null,
        retryCount: 0,
        lastOperationTime: null
    });
    // Debug logging
    const log = (0, _react.useCallback)((...args)=>{
        if (finalConfig.debug) {
            console.log('[useTryonWorkflow]', ...args);
        }
    }, [
        finalConfig.debug
    ]);
    // Error handler
    const handleError = (0, _react.useCallback)((error, type = 'unknown')=>{
        let workflowError;
        if (error instanceof _image.CompressionFailedError) {
            workflowError = {
                type: 'compression',
                message: 'Image is too large even after compression. Please upload a smaller file.',
                originalError: error,
                retryable: false
            };
        } else if (error instanceof Error && (error.name === 'AbortError' || error.message.includes('AbortError'))) {
            workflowError = {
                type: 'timeout',
                message: `Request timed out after ${finalConfig.timeoutMs}ms`,
                originalError: error,
                retryable: true
            };
        } else if (error instanceof Error && error.message.includes('API request failed:')) {
            const statusMatch = error.message.match(/API request failed: (\d+)/);
            const status = statusMatch ? parseInt(statusMatch[1]) : undefined;
            workflowError = {
                type: 'generation',
                message: (0, _errorToMessage.errorToMessage)(status),
                originalError: error,
                retryable: status ? status >= 500 : true
            };
        } else {
            workflowError = {
                type,
                message: error instanceof Error ? error.message : String(error),
                originalError: error instanceof Error ? error : undefined,
                retryable: type !== 'validation'
            };
        }
        log('Error occurred:', workflowError);
        setState((prev)=>({
                ...prev,
                workflowState: "error",
                hasError: true,
                isCapturing: false,
                error: workflowError,
                progress: 0
            }));
        // Show toast notification
        if (showToast) {
            showToast(workflowError.message, 'error');
        }
        return workflowError;
    }, [
        finalConfig.timeoutMs,
        log,
        showToast
    ]);
    // Update progress
    const updateProgress = (0, _react.useCallback)((progress)=>{
        setState((prev)=>({
                ...prev,
                progress
            }));
    }, []);
    // Validation helper
    const validateFiles = (0, _react.useCallback)(()=>{
        const errors = [];
        if (!state.userImageFile && !state.leftCardImage) {
            errors.push('Please upload model photo');
        }
        if (!state.apparelImageFile && !state.rightCardImage) {
            errors.push('Please upload apparel photo');
        }
        return {
            isValid: errors.length === 0,
            errors
        };
    }, [
        state.userImageFile,
        state.apparelImageFile,
        state.leftCardImage,
        state.rightCardImage
    ]);
    // Check if generation can start
    const canGenerate = (0, _react.useCallback)(()=>{
        const { isValid } = validateFiles();
        return isValid && state.workflowState !== "generating";
    }, [
        validateFiles,
        state.workflowState
    ]);
    // Utility function to resize and create file from URL
    const createFileFromImageUrl = (0, _react.useCallback)(async (imageUrl, filename)=>{
        try {
            const response = await fetch(imageUrl);
            const blob = await response.blob();
            return new File([
                blob
            ], filename, {
                type: 'image/jpeg'
            });
        } catch (error) {
            log('Failed to create file from URL:', error);
            throw new Error('Failed to create file from image URL');
        }
    }, [
        log
    ]);
    // Resize image utility
    const resizeImage = (0, _react.useCallback)(async (imageUrl)=>{
        const { targetWidth, targetHeight, quality } = finalConfig.imageProcessing;
        return new Promise((resolve, reject)=>{
            const img = new Image();
            img.crossOrigin = "anonymous";
            img.onload = ()=>{
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                if (!ctx) {
                    reject(new Error('Could not get canvas context'));
                    return;
                }
                canvas.width = targetWidth;
                canvas.height = targetHeight;
                ctx.drawImage(img, 0, 0, targetWidth, targetHeight);
                const resizedImageUrl = canvas.toDataURL('image/jpeg', quality);
                resolve(resizedImageUrl);
            };
            img.onerror = ()=>reject(new Error('Failed to load image for resizing'));
            img.src = imageUrl;
        });
    }, [
        finalConfig.imageProcessing
    ]);
    // File upload handlers
    const handleUserFileUpload = (0, _react.useCallback)((file)=>{
        log('User file uploaded:', file.name, file.size);
        setState((prev)=>({
                ...prev,
                userImageFile: file
            }));
    }, [
        log
    ]);
    const handleApparelFileUpload = (0, _react.useCallback)((file)=>{
        log('Apparel file uploaded:', file.name, file.size);
        setState((prev)=>({
                ...prev,
                apparelImageFile: file
            }));
    }, [
        log
    ]);
    const handleLeftCardImageUpload = (0, _react.useCallback)(async (imageUrl)=>{
        try {
            log('Left card image upload started');
            setState((prev)=>({
                    ...prev,
                    workflowState: "processing"
                }));
            const resizedImageUrl = await resizeImage(imageUrl);
            const file = await createFileFromImageUrl(imageUrl, 'user-image.jpg');
            setState((prev)=>({
                    ...prev,
                    leftCardImage: resizedImageUrl,
                    userImageFile: file,
                    workflowState: "idle"
                }));
            log('Left card image processed successfully');
        } catch (error) {
            handleError(error, 'processing');
            // Fallback to original image
            setState((prev)=>({
                    ...prev,
                    leftCardImage: imageUrl,
                    workflowState: "idle"
                }));
        }
    }, [
        log,
        resizeImage,
        createFileFromImageUrl,
        handleError
    ]);
    const handleRightCardImageUpload = (0, _react.useCallback)(async (imageUrl)=>{
        try {
            log('Right card image upload started');
            setState((prev)=>({
                    ...prev,
                    workflowState: "processing"
                }));
            const resizedImageUrl = await resizeImage(imageUrl);
            const file = await createFileFromImageUrl(imageUrl, 'apparel-image.jpg');
            setState((prev)=>({
                    ...prev,
                    rightCardImage: resizedImageUrl,
                    apparelImageFile: file,
                    workflowState: "idle"
                }));
            log('Right card image processed successfully');
        } catch (error) {
            handleError(error, 'processing');
            // Fallback to original image
            setState((prev)=>({
                    ...prev,
                    rightCardImage: imageUrl,
                    workflowState: "idle"
                }));
        }
    }, [
        log,
        resizeImage,
        createFileFromImageUrl,
        handleError
    ]);
    // Main generation function
    const startGeneration = (0, _react.useCallback)(async ()=>{
        try {
            log('Starting generation workflow');
            // Validate files
            const validation = validateFiles();
            if (!validation.isValid) {
                const message = validation.errors.length === 2 ? 'Please upload model photo and apparel photo before generating your fit.' : validation.errors[0];
                if (showToast) {
                    showToast(message, 'warning');
                }
                return;
            }
            // Set initial state
            setState((prev)=>({
                    ...prev,
                    workflowState: "generating",
                    isCapturing: true,
                    showPolaroid: true,
                    hasError: false,
                    error: null,
                    progress: 0,
                    lastOperationTime: Date.now()
                }));
            // Create abort controller for timeout
            abortControllerRef.current = new AbortController();
            const timeoutId = setTimeout(()=>abortControllerRef.current?.abort(), finalConfig.timeoutMs);
            try {
                updateProgress(10);
                // Convert and compress images
                const [modelB64, apparelB64] = await Promise.all([
                    (0, _image.fileToBase64)(state.userImageFile).then((b64)=>(0, _image.compressBase64)(b64, finalConfig.compressionLimitKB)),
                    (0, _image.fileToBase64)(state.apparelImageFile).then((b64)=>(0, _image.compressBase64)(b64, finalConfig.compressionLimitKB))
                ]);
                log('Images converted to base64 successfully');
                updateProgress(30);
                // Make API request
                const response = await fetch('/api/tryon', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        modelImage: modelB64,
                        apparelImages: [
                            apparelB64
                        ]
                    }),
                    signal: abortControllerRef.current.signal
                });
                clearTimeout(timeoutId);
                updateProgress(80);
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API request failed: ${response.status} - ${errorText}`);
                }
                const { img_generated } = await response.json();
                log('Generation completed successfully');
                updateProgress(100);
                // Update state with success
                setState((prev)=>({
                        ...prev,
                        workflowState: "complete",
                        isCapturing: false,
                        generatedImage: img_generated,
                        progress: 100,
                        retryCount: 0
                    }));
            } catch (error) {
                clearTimeout(timeoutId);
                handleError(error, 'generation');
            }
        } catch (error) {
            handleError(error, 'unknown');
        }
    }, [
        log,
        validateFiles,
        showToast,
        state.userImageFile,
        state.apparelImageFile,
        finalConfig.timeoutMs,
        finalConfig.compressionLimitKB,
        updateProgress,
        handleError
    ]);
    // Retry generation
    const retryGeneration = (0, _react.useCallback)(async ()=>{
        log('Retrying generation');
        setState((prev)=>({
                ...prev,
                retryCount: prev.retryCount + 1,
                hasError: false,
                error: null,
                generatedImage: null
            }));
        // Small delay before retry
        setTimeout(()=>{
            setState((prev)=>({
                    ...prev,
                    showPolaroid: false
                }));
        }, 100);
        await startGeneration();
    }, [
        log,
        startGeneration
    ]);
    // Cancel generation
    const cancelGeneration = (0, _react.useCallback)(()=>{
        log('Cancelling generation');
        if (abortControllerRef.current) {
            abortControllerRef.current.abort();
        }
        setState((prev)=>({
                ...prev,
                workflowState: "idle",
                isCapturing: false,
                progress: 0
            }));
    }, [
        log
    ]);
    // Reset workflow
    const resetWorkflow = (0, _react.useCallback)(()=>{
        log('Resetting workflow');
        if (abortControllerRef.current) {
            abortControllerRef.current.abort();
        }
        setState({
            workflowState: "idle",
            isCapturing: false,
            showPolaroid: false,
            generatedImage: null,
            hasError: false,
            userImageFile: null,
            apparelImageFile: null,
            leftCardImage: null,
            rightCardImage: null,
            progress: 0,
            error: null,
            retryCount: 0,
            lastOperationTime: null
        });
    }, [
        log
    ]);
    // Close polaroid
    const closePolaroid = (0, _react.useCallback)(()=>{
        log('Closing polaroid');
        setState((prev)=>({
                ...prev,
                showPolaroid: false
            }));
    }, [
        log
    ]);
    // Clear error
    const clearError = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                hasError: false,
                error: null,
                workflowState: "idle"
            }));
    }, []);
    // Auto-retry logic
    (0, _react.useEffect)(()=>{
        if (finalConfig.autoRetry && state.error?.retryable && state.retryCount < finalConfig.maxRetries) {
            const delay = Math.min(1000 * Math.pow(2, state.retryCount), 10000); // Exponential backoff
            log(`Auto-retrying in ${delay}ms (attempt ${state.retryCount + 1}/${finalConfig.maxRetries})`);
            const timeoutId = setTimeout(()=>{
                retryGeneration();
            }, delay);
            return ()=>clearTimeout(timeoutId);
        }
    }, [
        state.error,
        state.retryCount,
        finalConfig.autoRetry,
        finalConfig.maxRetries,
        retryGeneration,
        log
    ]);
    // Cleanup on unmount
    (0, _react.useEffect)(()=>{
        return ()=>{
            if (abortControllerRef.current) {
                abortControllerRef.current.abort();
            }
        };
    }, []);
    return {
        // State
        ...state,
        // Actions
        handleUserFileUpload,
        handleApparelFileUpload,
        handleLeftCardImageUpload,
        handleRightCardImageUpload,
        startGeneration,
        retryGeneration,
        cancelGeneration,
        resetWorkflow,
        closePolaroid,
        clearError,
        validateFiles,
        canGenerate
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3Avc3JjL2hvb2tzL3VzZVRyeW9uV29ya2Zsb3cudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG4vLyBUcnktb24gV29ya2Zsb3cgQ29vcmRpbmF0aW9uIEhvb2tcbi8vIEJyaWRnZSBsYXllciBob29rIHRoYXQgY29vcmRpbmF0ZXMgdGhlIGNvbXBsZXRlIHRyeS1vbiBnZW5lcmF0aW9uIHByb2Nlc3NcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFxuICB1c2VUcnlvbk11dGF0aW9uLFxuICB1c2VJbWFnZVByb2Nlc3NpbmcsXG4gIHByb2Nlc3NJbWFnZUZvclRyeW9uLFxuICByZXNpemVJbWFnZVRvMTAyNHgxNTM2LFxuICB0eXBlIFRyeW9uTXV0YXRpb25WYXJpYWJsZXMsXG4gIHR5cGUgVHJ5b25NdXRhdGlvblJlc3BvbnNlXG59IGZyb20gJy4uL2J1c2luZXNzLWxheWVyJztcbmltcG9ydCB7IGZpbGVUb0Jhc2U2NCwgY29tcHJlc3NCYXNlNjQsIENvbXByZXNzaW9uRmFpbGVkRXJyb3IgfSBmcm9tICcuLi91dGlscy9pbWFnZSc7XG5pbXBvcnQgeyBlcnJvclRvTWVzc2FnZSB9IGZyb20gJy4uL2xpYi9lcnJvclRvTWVzc2FnZSc7XG5cbi8qKlxuICogV29ya2Zsb3cgc3RhdGUgZW51bSBmb3IgYmV0dGVyIHR5cGUgc2FmZXR5XG4gKi9cbmV4cG9ydCBlbnVtIFdvcmtmbG93U3RhdGUge1xuICBJRExFID0gJ2lkbGUnLFxuICBVUExPQURJTkcgPSAndXBsb2FkaW5nJyxcbiAgUFJPQ0VTU0lORyA9ICdwcm9jZXNzaW5nJyxcbiAgR0VORVJBVElORyA9ICdnZW5lcmF0aW5nJyxcbiAgQ09NUExFVEUgPSAnY29tcGxldGUnLFxuICBFUlJPUiA9ICdlcnJvcidcbn1cblxuLyoqXG4gKiBFcnJvciB0eXBlcyB0aGF0IGNhbiBvY2N1ciBkdXJpbmcgd29ya2Zsb3dcbiAqL1xuZXhwb3J0IHR5cGUgV29ya2Zsb3dFcnJvciA9IHtcbiAgdHlwZTogJ3ZhbGlkYXRpb24nIHwgJ3VwbG9hZCcgfCAncHJvY2Vzc2luZycgfCAnZ2VuZXJhdGlvbicgfCAndGltZW91dCcgfCAnY29tcHJlc3Npb24nIHwgJ3Vua25vd24nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG9yaWdpbmFsRXJyb3I/OiBFcnJvcjtcbiAgcmV0cnlhYmxlOiBib29sZWFuO1xufTtcblxuLyoqXG4gKiBXb3JrZmxvdyBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXb3JrZmxvd0NvbmZpZyB7XG4gIC8qKiBUaW1lb3V0IGZvciBnZW5lcmF0aW9uIGluIG1pbGxpc2Vjb25kcyAqL1xuICB0aW1lb3V0TXM/OiBudW1iZXI7XG4gIC8qKiBCYXNlNjQgY29tcHJlc3Npb24gbGltaXQgaW4gS0IgKi9cbiAgY29tcHJlc3Npb25MaW1pdEtCPzogbnVtYmVyO1xuICAvKiogQXV0by1yZXRyeSBmYWlsZWQgb3BlcmF0aW9ucyAqL1xuICBhdXRvUmV0cnk/OiBib29sZWFuO1xuICAvKiogTnVtYmVyIG9mIHJldHJ5IGF0dGVtcHRzICovXG4gIG1heFJldHJpZXM/OiBudW1iZXI7XG4gIC8qKiBFbmFibGUgZGVidWcgbG9nZ2luZyAqL1xuICBkZWJ1Zz86IGJvb2xlYW47XG4gIC8qKiBJbWFnZSBwcm9jZXNzaW5nIG9wdGlvbnMgKi9cbiAgaW1hZ2VQcm9jZXNzaW5nPzoge1xuICAgIHRhcmdldFdpZHRoPzogbnVtYmVyO1xuICAgIHRhcmdldEhlaWdodD86IG51bWJlcjtcbiAgICBxdWFsaXR5PzogbnVtYmVyO1xuICB9O1xufVxuXG4vKipcbiAqIFdvcmtmbG93IHN0YXRlIGludGVyZmFjZSAoYmFja3dhcmQgY29tcGF0aWJsZSB3aXRoIGV4aXN0aW5nIHBhZ2Ugc3RhdGUpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJ5b25Xb3JrZmxvd1N0YXRlIHtcbiAgLy8gQ29yZSB3b3JrZmxvdyBzdGF0ZVxuICB3b3JrZmxvd1N0YXRlOiBXb3JrZmxvd1N0YXRlO1xuICBcbiAgLy8gQmFja3dhcmQgY29tcGF0aWJsZSBzdGF0ZSAobWFpbnRhaW5zIGV4aXN0aW5nIHBhZ2UudHN4IHN0cnVjdHVyZSlcbiAgaXNDYXB0dXJpbmc6IGJvb2xlYW47XG4gIHNob3dQb2xhcm9pZDogYm9vbGVhbjtcbiAgZ2VuZXJhdGVkSW1hZ2U6IHN0cmluZyB8IG51bGw7XG4gIGhhc0Vycm9yOiBib29sZWFuO1xuICBcbiAgLy8gRmlsZSBtYW5hZ2VtZW50XG4gIHVzZXJJbWFnZUZpbGU6IEZpbGUgfCBudWxsO1xuICBhcHBhcmVsSW1hZ2VGaWxlOiBGaWxlIHwgbnVsbDtcbiAgbGVmdENhcmRJbWFnZTogc3RyaW5nIHwgbnVsbDtcbiAgcmlnaHRDYXJkSW1hZ2U6IHN0cmluZyB8IG51bGw7XG4gIFxuICAvLyBQcm9ncmVzcyBhbmQgZXJyb3IgdHJhY2tpbmdcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgZXJyb3I6IFdvcmtmbG93RXJyb3IgfCBudWxsO1xuICBcbiAgLy8gT3BlcmF0aW9uIHRyYWNraW5nXG4gIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgbGFzdE9wZXJhdGlvblRpbWU6IG51bWJlciB8IG51bGw7XG59XG5cbi8qKlxuICogV29ya2Zsb3cgYWN0aW9ucyBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcnlvbldvcmtmbG93QWN0aW9ucyB7XG4gIC8vIEZpbGUgdXBsb2FkIGhhbmRsZXJzIChiYWNrd2FyZCBjb21wYXRpYmxlKVxuICBoYW5kbGVVc2VyRmlsZVVwbG9hZDogKGZpbGU6IEZpbGUpID0+IHZvaWQ7XG4gIGhhbmRsZUFwcGFyZWxGaWxlVXBsb2FkOiAoZmlsZTogRmlsZSkgPT4gdm9pZDtcbiAgaGFuZGxlTGVmdENhcmRJbWFnZVVwbG9hZDogKGltYWdlVXJsOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGhhbmRsZVJpZ2h0Q2FyZEltYWdlVXBsb2FkOiAoaW1hZ2VVcmw6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG4gIC8vIE1haW4gd29ya2Zsb3cgYWN0aW9uc1xuICBzdGFydEdlbmVyYXRpb246ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHJldHJ5R2VuZXJhdGlvbjogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgY2FuY2VsR2VuZXJhdGlvbjogKCkgPT4gdm9pZDtcbiAgXG4gIC8vIFN0YXRlIG1hbmFnZW1lbnRcbiAgcmVzZXRXb3JrZmxvdzogKCkgPT4gdm9pZDtcbiAgY2xvc2VQb2xhcm9pZDogKCkgPT4gdm9pZDtcbiAgY2xlYXJFcnJvcjogKCkgPT4gdm9pZDtcbiAgXG4gIC8vIFZhbGlkYXRpb25cbiAgdmFsaWRhdGVGaWxlczogKCkgPT4geyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH07XG4gIGNhbkdlbmVyYXRlOiAoKSA9PiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRvYXN0IG5vdGlmaWNhdGlvbiBmdW5jdGlvbiB0eXBlXG4gKi9cbnR5cGUgVG9hc3RGdW5jdGlvbiA9IChtZXNzYWdlOiBzdHJpbmcsIHR5cGU/OiAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ3dhcm5pbmcnIHwgJ2luZm8nKSA9PiB2b2lkO1xuXG4vKipcbiAqIERlZmF1bHQgY29uZmlndXJhdGlvblxuICovXG5jb25zdCBERUZBVUxUX0NPTkZJRzogUmVxdWlyZWQ8V29ya2Zsb3dDb25maWc+ID0ge1xuICB0aW1lb3V0TXM6IDYwMDAwLCAvLyA2MCBzZWNvbmRzXG4gIGNvbXByZXNzaW9uTGltaXRLQjogMjA0OCwgLy8gMk1CXG4gIGF1dG9SZXRyeTogZmFsc2UsXG4gIG1heFJldHJpZXM6IDMsXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyxcbiAgaW1hZ2VQcm9jZXNzaW5nOiB7XG4gICAgdGFyZ2V0V2lkdGg6IDEwMjQsXG4gICAgdGFyZ2V0SGVpZ2h0OiAxNTM2LFxuICAgIHF1YWxpdHk6IDAuOVxuICB9XG59O1xuXG4vKipcbiAqIE1haW4gdHJ5LW9uIHdvcmtmbG93IGhvb2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVRyeW9uV29ya2Zsb3coXG4gIGNvbmZpZzogV29ya2Zsb3dDb25maWcgPSB7fSxcbiAgc2hvd1RvYXN0PzogVG9hc3RGdW5jdGlvblxuKTogVHJ5b25Xb3JrZmxvd1N0YXRlICYgVHJ5b25Xb3JrZmxvd0FjdGlvbnMge1xuICBjb25zdCBmaW5hbENvbmZpZyA9IHsgLi4uREVGQVVMVF9DT05GSUcsIC4uLmNvbmZpZyB9O1xuICBcbiAgLy8gQnVzaW5lc3MgbGF5ZXIgaG9va3NcbiAgY29uc3QgdHJ5b25NdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oKTtcbiAgY29uc3QgeyBwcm9jZXNzQmFzaWMgfSA9IHVzZUltYWdlUHJvY2Vzc2luZygpO1xuICBcbiAgLy8gQWJvcnQgY29udHJvbGxlciBmb3IgY2FuY2VsbGF0aW9uXG4gIGNvbnN0IGFib3J0Q29udHJvbGxlclJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcbiAgXG4gIC8vIENvcmUgc3RhdGVcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxUcnlvbldvcmtmbG93U3RhdGU+KHtcbiAgICB3b3JrZmxvd1N0YXRlOiBXb3JrZmxvd1N0YXRlLklETEUsXG4gICAgaXNDYXB0dXJpbmc6IGZhbHNlLFxuICAgIHNob3dQb2xhcm9pZDogZmFsc2UsXG4gICAgZ2VuZXJhdGVkSW1hZ2U6IG51bGwsXG4gICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgIHVzZXJJbWFnZUZpbGU6IG51bGwsXG4gICAgYXBwYXJlbEltYWdlRmlsZTogbnVsbCxcbiAgICBsZWZ0Q2FyZEltYWdlOiBudWxsLFxuICAgIHJpZ2h0Q2FyZEltYWdlOiBudWxsLFxuICAgIHByb2dyZXNzOiAwLFxuICAgIGVycm9yOiBudWxsLFxuICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgbGFzdE9wZXJhdGlvblRpbWU6IG51bGxcbiAgfSk7XG5cbiAgLy8gRGVidWcgbG9nZ2luZ1xuICBjb25zdCBsb2cgPSB1c2VDYWxsYmFjaygoLi4uYXJnczogYW55W10pID0+IHtcbiAgICBpZiAoZmluYWxDb25maWcuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbdXNlVHJ5b25Xb3JrZmxvd10nLCAuLi5hcmdzKTtcbiAgICB9XG4gIH0sIFtmaW5hbENvbmZpZy5kZWJ1Z10pO1xuXG4gIC8vIEVycm9yIGhhbmRsZXJcbiAgY29uc3QgaGFuZGxlRXJyb3IgPSB1c2VDYWxsYmFjaygoZXJyb3I6IHVua25vd24sIHR5cGU6IFdvcmtmbG93RXJyb3JbJ3R5cGUnXSA9ICd1bmtub3duJyk6IFdvcmtmbG93RXJyb3IgPT4ge1xuICAgIGxldCB3b3JrZmxvd0Vycm9yOiBXb3JrZmxvd0Vycm9yO1xuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIENvbXByZXNzaW9uRmFpbGVkRXJyb3IpIHtcbiAgICAgIHdvcmtmbG93RXJyb3IgPSB7XG4gICAgICAgIHR5cGU6ICdjb21wcmVzc2lvbicsXG4gICAgICAgIG1lc3NhZ2U6ICdJbWFnZSBpcyB0b28gbGFyZ2UgZXZlbiBhZnRlciBjb21wcmVzc2lvbi4gUGxlYXNlIHVwbG9hZCBhIHNtYWxsZXIgZmlsZS4nLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnJvcixcbiAgICAgICAgcmV0cnlhYmxlOiBmYWxzZVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJyB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBYm9ydEVycm9yJykpKSB7XG4gICAgICB3b3JrZmxvd0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAndGltZW91dCcsXG4gICAgICAgIG1lc3NhZ2U6IGBSZXF1ZXN0IHRpbWVkIG91dCBhZnRlciAke2ZpbmFsQ29uZmlnLnRpbWVvdXRNc31tc2AsXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yLFxuICAgICAgICByZXRyeWFibGU6IHRydWVcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSByZXF1ZXN0IGZhaWxlZDonKSkge1xuICAgICAgY29uc3Qgc3RhdHVzTWF0Y2ggPSBlcnJvci5tZXNzYWdlLm1hdGNoKC9BUEkgcmVxdWVzdCBmYWlsZWQ6IChcXGQrKS8pO1xuICAgICAgY29uc3Qgc3RhdHVzID0gc3RhdHVzTWF0Y2ggPyBwYXJzZUludChzdGF0dXNNYXRjaFsxXSkgOiB1bmRlZmluZWQ7XG4gICAgICB3b3JrZmxvd0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAnZ2VuZXJhdGlvbicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yVG9NZXNzYWdlKHN0YXR1cyksXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yLFxuICAgICAgICByZXRyeWFibGU6IHN0YXR1cyA/IHN0YXR1cyA+PSA1MDAgOiB0cnVlXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB3b3JrZmxvd0Vycm9yID0ge1xuICAgICAgICB0eXBlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgcmV0cnlhYmxlOiB0eXBlICE9PSAndmFsaWRhdGlvbidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgbG9nKCdFcnJvciBvY2N1cnJlZDonLCB3b3JrZmxvd0Vycm9yKTtcbiAgICBcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgd29ya2Zsb3dTdGF0ZTogV29ya2Zsb3dTdGF0ZS5FUlJPUixcbiAgICAgIGhhc0Vycm9yOiB0cnVlLFxuICAgICAgaXNDYXB0dXJpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6IHdvcmtmbG93RXJyb3IsXG4gICAgICBwcm9ncmVzczogMFxuICAgIH0pKTtcblxuICAgIC8vIFNob3cgdG9hc3Qgbm90aWZpY2F0aW9uXG4gICAgaWYgKHNob3dUb2FzdCkge1xuICAgICAgc2hvd1RvYXN0KHdvcmtmbG93RXJyb3IubWVzc2FnZSwgJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdvcmtmbG93RXJyb3I7XG4gIH0sIFtmaW5hbENvbmZpZy50aW1lb3V0TXMsIGxvZywgc2hvd1RvYXN0XSk7XG5cbiAgLy8gVXBkYXRlIHByb2dyZXNzXG4gIGNvbnN0IHVwZGF0ZVByb2dyZXNzID0gdXNlQ2FsbGJhY2soKHByb2dyZXNzOiBudW1iZXIpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHByb2dyZXNzIH0pKTtcbiAgfSwgW10pO1xuXG4gIC8vIFZhbGlkYXRpb24gaGVscGVyXG4gIGNvbnN0IHZhbGlkYXRlRmlsZXMgPSB1c2VDYWxsYmFjaygoKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0gPT4ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBpZiAoIXN0YXRlLnVzZXJJbWFnZUZpbGUgJiYgIXN0YXRlLmxlZnRDYXJkSW1hZ2UpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdQbGVhc2UgdXBsb2FkIG1vZGVsIHBob3RvJyk7XG4gICAgfVxuICAgIFxuICAgIGlmICghc3RhdGUuYXBwYXJlbEltYWdlRmlsZSAmJiAhc3RhdGUucmlnaHRDYXJkSW1hZ2UpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdQbGVhc2UgdXBsb2FkIGFwcGFyZWwgcGhvdG8nKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnNcbiAgICB9O1xuICB9LCBbc3RhdGUudXNlckltYWdlRmlsZSwgc3RhdGUuYXBwYXJlbEltYWdlRmlsZSwgc3RhdGUubGVmdENhcmRJbWFnZSwgc3RhdGUucmlnaHRDYXJkSW1hZ2VdKTtcblxuICAvLyBDaGVjayBpZiBnZW5lcmF0aW9uIGNhbiBzdGFydFxuICBjb25zdCBjYW5HZW5lcmF0ZSA9IHVzZUNhbGxiYWNrKCgpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCB7IGlzVmFsaWQgfSA9IHZhbGlkYXRlRmlsZXMoKTtcbiAgICByZXR1cm4gaXNWYWxpZCAmJiBzdGF0ZS53b3JrZmxvd1N0YXRlICE9PSBXb3JrZmxvd1N0YXRlLkdFTkVSQVRJTkc7XG4gIH0sIFt2YWxpZGF0ZUZpbGVzLCBzdGF0ZS53b3JrZmxvd1N0YXRlXSk7XG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvbiB0byByZXNpemUgYW5kIGNyZWF0ZSBmaWxlIGZyb20gVVJMXG4gIGNvbnN0IGNyZWF0ZUZpbGVGcm9tSW1hZ2VVcmwgPSB1c2VDYWxsYmFjayhhc3luYyAoaW1hZ2VVcmw6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZyk6IFByb21pc2U8RmlsZT4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKTtcbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICByZXR1cm4gbmV3IEZpbGUoW2Jsb2JdLCBmaWxlbmFtZSwgeyB0eXBlOiAnaW1hZ2UvanBlZycgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZygnRmFpbGVkIHRvIGNyZWF0ZSBmaWxlIGZyb20gVVJMOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBmaWxlIGZyb20gaW1hZ2UgVVJMJyk7XG4gICAgfVxuICB9LCBbbG9nXSk7XG5cbiAgLy8gUmVzaXplIGltYWdlIHV0aWxpdHlcbiAgY29uc3QgcmVzaXplSW1hZ2UgPSB1c2VDYWxsYmFjayhhc3luYyAoaW1hZ2VVcmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgeyB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0LCBxdWFsaXR5IH0gPSBmaW5hbENvbmZpZy5pbWFnZVByb2Nlc3Npbmc7XG4gICAgXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgIFxuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdDb3VsZCBub3QgZ2V0IGNhbnZhcyBjb250ZXh0JykpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FudmFzLndpZHRoID0gdGFyZ2V0V2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc2l6ZWRJbWFnZVVybCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBxdWFsaXR5KTtcbiAgICAgICAgcmVzb2x2ZShyZXNpemVkSW1hZ2VVcmwpO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBpbWFnZSBmb3IgcmVzaXppbmcnKSk7XG4gICAgICBpbWcuc3JjID0gaW1hZ2VVcmw7XG4gICAgfSk7XG4gIH0sIFtmaW5hbENvbmZpZy5pbWFnZVByb2Nlc3NpbmddKTtcblxuICAvLyBGaWxlIHVwbG9hZCBoYW5kbGVyc1xuICBjb25zdCBoYW5kbGVVc2VyRmlsZVVwbG9hZCA9IHVzZUNhbGxiYWNrKChmaWxlOiBGaWxlKSA9PiB7XG4gICAgbG9nKCdVc2VyIGZpbGUgdXBsb2FkZWQ6JywgZmlsZS5uYW1lLCBmaWxlLnNpemUpO1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgdXNlckltYWdlRmlsZTogZmlsZSB9KSk7XG4gIH0sIFtsb2ddKTtcblxuICBjb25zdCBoYW5kbGVBcHBhcmVsRmlsZVVwbG9hZCA9IHVzZUNhbGxiYWNrKChmaWxlOiBGaWxlKSA9PiB7XG4gICAgbG9nKCdBcHBhcmVsIGZpbGUgdXBsb2FkZWQ6JywgZmlsZS5uYW1lLCBmaWxlLnNpemUpO1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgYXBwYXJlbEltYWdlRmlsZTogZmlsZSB9KSk7XG4gIH0sIFtsb2ddKTtcblxuICBjb25zdCBoYW5kbGVMZWZ0Q2FyZEltYWdlVXBsb2FkID0gdXNlQ2FsbGJhY2soYXN5bmMgKGltYWdlVXJsOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9nKCdMZWZ0IGNhcmQgaW1hZ2UgdXBsb2FkIHN0YXJ0ZWQnKTtcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgd29ya2Zsb3dTdGF0ZTogV29ya2Zsb3dTdGF0ZS5QUk9DRVNTSU5HIH0pKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzaXplZEltYWdlVXJsID0gYXdhaXQgcmVzaXplSW1hZ2UoaW1hZ2VVcmwpO1xuICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGNyZWF0ZUZpbGVGcm9tSW1hZ2VVcmwoaW1hZ2VVcmwsICd1c2VyLWltYWdlLmpwZycpO1xuICAgICAgXG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIGxlZnRDYXJkSW1hZ2U6IHJlc2l6ZWRJbWFnZVVybCxcbiAgICAgICAgdXNlckltYWdlRmlsZTogZmlsZSxcbiAgICAgICAgd29ya2Zsb3dTdGF0ZTogV29ya2Zsb3dTdGF0ZS5JRExFXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGxvZygnTGVmdCBjYXJkIGltYWdlIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsICdwcm9jZXNzaW5nJyk7XG4gICAgICAvLyBGYWxsYmFjayB0byBvcmlnaW5hbCBpbWFnZVxuICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBsZWZ0Q2FyZEltYWdlOiBpbWFnZVVybCxcbiAgICAgICAgd29ya2Zsb3dTdGF0ZTogV29ya2Zsb3dTdGF0ZS5JRExFXG4gICAgICB9KSk7XG4gICAgfVxuICB9LCBbbG9nLCByZXNpemVJbWFnZSwgY3JlYXRlRmlsZUZyb21JbWFnZVVybCwgaGFuZGxlRXJyb3JdKTtcblxuICBjb25zdCBoYW5kbGVSaWdodENhcmRJbWFnZVVwbG9hZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpbWFnZVVybDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZygnUmlnaHQgY2FyZCBpbWFnZSB1cGxvYWQgc3RhcnRlZCcpO1xuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCB3b3JrZmxvd1N0YXRlOiBXb3JrZmxvd1N0YXRlLlBST0NFU1NJTkcgfSkpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNpemVkSW1hZ2VVcmwgPSBhd2FpdCByZXNpemVJbWFnZShpbWFnZVVybCk7XG4gICAgICBjb25zdCBmaWxlID0gYXdhaXQgY3JlYXRlRmlsZUZyb21JbWFnZVVybChpbWFnZVVybCwgJ2FwcGFyZWwtaW1hZ2UuanBnJyk7XG4gICAgICBcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgcmlnaHRDYXJkSW1hZ2U6IHJlc2l6ZWRJbWFnZVVybCxcbiAgICAgICAgYXBwYXJlbEltYWdlRmlsZTogZmlsZSxcbiAgICAgICAgd29ya2Zsb3dTdGF0ZTogV29ya2Zsb3dTdGF0ZS5JRExFXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGxvZygnUmlnaHQgY2FyZCBpbWFnZSBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGhhbmRsZUVycm9yKGVycm9yLCAncHJvY2Vzc2luZycpO1xuICAgICAgLy8gRmFsbGJhY2sgdG8gb3JpZ2luYWwgaW1hZ2VcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgcmlnaHRDYXJkSW1hZ2U6IGltYWdlVXJsLFxuICAgICAgICB3b3JrZmxvd1N0YXRlOiBXb3JrZmxvd1N0YXRlLklETEVcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sIFtsb2csIHJlc2l6ZUltYWdlLCBjcmVhdGVGaWxlRnJvbUltYWdlVXJsLCBoYW5kbGVFcnJvcl0pO1xuXG4gIC8vIE1haW4gZ2VuZXJhdGlvbiBmdW5jdGlvblxuICBjb25zdCBzdGFydEdlbmVyYXRpb24gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZygnU3RhcnRpbmcgZ2VuZXJhdGlvbiB3b3JrZmxvdycpO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSBmaWxlc1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlRmlsZXMoKTtcbiAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0aW9uLmVycm9ycy5sZW5ndGggPT09IDIgXG4gICAgICAgICAgPyAnUGxlYXNlIHVwbG9hZCBtb2RlbCBwaG90byBhbmQgYXBwYXJlbCBwaG90byBiZWZvcmUgZ2VuZXJhdGluZyB5b3VyIGZpdC4nXG4gICAgICAgICAgOiB2YWxpZGF0aW9uLmVycm9yc1swXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG93VG9hc3QpIHtcbiAgICAgICAgICBzaG93VG9hc3QobWVzc2FnZSwgJ3dhcm5pbmcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHdvcmtmbG93U3RhdGU6IFdvcmtmbG93U3RhdGUuR0VORVJBVElORyxcbiAgICAgICAgaXNDYXB0dXJpbmc6IHRydWUsXG4gICAgICAgIHNob3dQb2xhcm9pZDogdHJ1ZSxcbiAgICAgICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgIGxhc3RPcGVyYXRpb25UaW1lOiBEYXRlLm5vdygpXG4gICAgICB9KSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhYm9ydCBjb250cm9sbGVyIGZvciB0aW1lb3V0XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoXG4gICAgICAgICgpID0+IGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50Py5hYm9ydCgpLCBcbiAgICAgICAgZmluYWxDb25maWcudGltZW91dE1zXG4gICAgICApO1xuXG4gICAgICB0cnkge1xuICAgICAgICB1cGRhdGVQcm9ncmVzcygxMCk7XG5cbiAgICAgICAgLy8gQ29udmVydCBhbmQgY29tcHJlc3MgaW1hZ2VzXG4gICAgICAgIGNvbnN0IFttb2RlbEI2NCwgYXBwYXJlbEI2NF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgZmlsZVRvQmFzZTY0KHN0YXRlLnVzZXJJbWFnZUZpbGUhKS50aGVuKGI2NCA9PiBjb21wcmVzc0Jhc2U2NChiNjQsIGZpbmFsQ29uZmlnLmNvbXByZXNzaW9uTGltaXRLQikpLFxuICAgICAgICAgIGZpbGVUb0Jhc2U2NChzdGF0ZS5hcHBhcmVsSW1hZ2VGaWxlISkudGhlbihiNjQgPT4gY29tcHJlc3NCYXNlNjQoYjY0LCBmaW5hbENvbmZpZy5jb21wcmVzc2lvbkxpbWl0S0IpKVxuICAgICAgICBdKTtcblxuICAgICAgICBsb2coJ0ltYWdlcyBjb252ZXJ0ZWQgdG8gYmFzZTY0IHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB1cGRhdGVQcm9ncmVzcygzMCk7XG5cbiAgICAgICAgLy8gTWFrZSBBUEkgcmVxdWVzdFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3RyeW9uJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICBtb2RlbEltYWdlOiBtb2RlbEI2NCwgXG4gICAgICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbYXBwYXJlbEI2NF0gXG4gICAgICAgICAgfSksXG4gICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5zaWduYWxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDgwKTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJlcXVlc3QgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaW1nX2dlbmVyYXRlZCB9ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBsb2coJ0dlbmVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICBcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMTAwKTtcblxuICAgICAgICAvLyBVcGRhdGUgc3RhdGUgd2l0aCBzdWNjZXNzXG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHdvcmtmbG93U3RhdGU6IFdvcmtmbG93U3RhdGUuQ09NUExFVEUsXG4gICAgICAgICAgaXNDYXB0dXJpbmc6IGZhbHNlLFxuICAgICAgICAgIGdlbmVyYXRlZEltYWdlOiBpbWdfZ2VuZXJhdGVkLFxuICAgICAgICAgIHByb2dyZXNzOiAxMDAsXG4gICAgICAgICAgcmV0cnlDb3VudDogMFxuICAgICAgICB9KSk7XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgJ2dlbmVyYXRpb24nKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBoYW5kbGVFcnJvcihlcnJvciwgJ3Vua25vd24nKTtcbiAgICB9XG4gIH0sIFtcbiAgICBsb2csIFxuICAgIHZhbGlkYXRlRmlsZXMsIFxuICAgIHNob3dUb2FzdCwgXG4gICAgc3RhdGUudXNlckltYWdlRmlsZSwgXG4gICAgc3RhdGUuYXBwYXJlbEltYWdlRmlsZSwgXG4gICAgZmluYWxDb25maWcudGltZW91dE1zLCBcbiAgICBmaW5hbENvbmZpZy5jb21wcmVzc2lvbkxpbWl0S0IsIFxuICAgIHVwZGF0ZVByb2dyZXNzLCBcbiAgICBoYW5kbGVFcnJvclxuICBdKTtcblxuICAvLyBSZXRyeSBnZW5lcmF0aW9uXG4gIGNvbnN0IHJldHJ5R2VuZXJhdGlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBsb2coJ1JldHJ5aW5nIGdlbmVyYXRpb24nKTtcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IFxuICAgICAgLi4ucHJldiwgXG4gICAgICByZXRyeUNvdW50OiBwcmV2LnJldHJ5Q291bnQgKyAxLFxuICAgICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgICBnZW5lcmF0ZWRJbWFnZTogbnVsbFxuICAgIH0pKTtcbiAgICBcbiAgICAvLyBTbWFsbCBkZWxheSBiZWZvcmUgcmV0cnlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc2hvd1BvbGFyb2lkOiBmYWxzZSB9KSk7XG4gICAgfSwgMTAwKTtcbiAgICBcbiAgICBhd2FpdCBzdGFydEdlbmVyYXRpb24oKTtcbiAgfSwgW2xvZywgc3RhcnRHZW5lcmF0aW9uXSk7XG5cbiAgLy8gQ2FuY2VsIGdlbmVyYXRpb25cbiAgY29uc3QgY2FuY2VsR2VuZXJhdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsb2coJ0NhbmNlbGxpbmcgZ2VuZXJhdGlvbicpO1xuICAgIFxuICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCkge1xuICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuYWJvcnQoKTtcbiAgICB9XG4gICAgXG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIHdvcmtmbG93U3RhdGU6IFdvcmtmbG93U3RhdGUuSURMRSxcbiAgICAgIGlzQ2FwdHVyaW5nOiBmYWxzZSxcbiAgICAgIHByb2dyZXNzOiAwXG4gICAgfSkpO1xuICB9LCBbbG9nXSk7XG5cbiAgLy8gUmVzZXQgd29ya2Zsb3dcbiAgY29uc3QgcmVzZXRXb3JrZmxvdyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsb2coJ1Jlc2V0dGluZyB3b3JrZmxvdycpO1xuICAgIFxuICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCkge1xuICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuYWJvcnQoKTtcbiAgICB9XG4gICAgXG4gICAgc2V0U3RhdGUoe1xuICAgICAgd29ya2Zsb3dTdGF0ZTogV29ya2Zsb3dTdGF0ZS5JRExFLFxuICAgICAgaXNDYXB0dXJpbmc6IGZhbHNlLFxuICAgICAgc2hvd1BvbGFyb2lkOiBmYWxzZSxcbiAgICAgIGdlbmVyYXRlZEltYWdlOiBudWxsLFxuICAgICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgICAgdXNlckltYWdlRmlsZTogbnVsbCxcbiAgICAgIGFwcGFyZWxJbWFnZUZpbGU6IG51bGwsXG4gICAgICBsZWZ0Q2FyZEltYWdlOiBudWxsLFxuICAgICAgcmlnaHRDYXJkSW1hZ2U6IG51bGwsXG4gICAgICBwcm9ncmVzczogMCxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgIGxhc3RPcGVyYXRpb25UaW1lOiBudWxsXG4gICAgfSk7XG4gIH0sIFtsb2ddKTtcblxuICAvLyBDbG9zZSBwb2xhcm9pZFxuICBjb25zdCBjbG9zZVBvbGFyb2lkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxvZygnQ2xvc2luZyBwb2xhcm9pZCcpO1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc2hvd1BvbGFyb2lkOiBmYWxzZSB9KSk7XG4gIH0sIFtsb2ddKTtcblxuICAvLyBDbGVhciBlcnJvclxuICBjb25zdCBjbGVhckVycm9yID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgXG4gICAgICAuLi5wcmV2LCBcbiAgICAgIGhhc0Vycm9yOiBmYWxzZSwgXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICAgIHdvcmtmbG93U3RhdGU6IFdvcmtmbG93U3RhdGUuSURMRVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIC8vIEF1dG8tcmV0cnkgbG9naWNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoXG4gICAgICBmaW5hbENvbmZpZy5hdXRvUmV0cnkgJiYgXG4gICAgICBzdGF0ZS5lcnJvcj8ucmV0cnlhYmxlICYmIFxuICAgICAgc3RhdGUucmV0cnlDb3VudCA8IGZpbmFsQ29uZmlnLm1heFJldHJpZXNcbiAgICApIHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oMTAwMCAqIE1hdGgucG93KDIsIHN0YXRlLnJldHJ5Q291bnQpLCAxMDAwMCk7IC8vIEV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgIGxvZyhgQXV0by1yZXRyeWluZyBpbiAke2RlbGF5fW1zIChhdHRlbXB0ICR7c3RhdGUucmV0cnlDb3VudCArIDF9LyR7ZmluYWxDb25maWcubWF4UmV0cmllc30pYCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXRyeUdlbmVyYXRpb24oKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbiAgfSwgW3N0YXRlLmVycm9yLCBzdGF0ZS5yZXRyeUNvdW50LCBmaW5hbENvbmZpZy5hdXRvUmV0cnksIGZpbmFsQ29uZmlnLm1heFJldHJpZXMsIHJldHJ5R2VuZXJhdGlvbiwgbG9nXSk7XG5cbiAgLy8gQ2xlYW51cCBvbiB1bm1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCkge1xuICAgICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5hYm9ydCgpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4ge1xuICAgIC8vIFN0YXRlXG4gICAgLi4uc3RhdGUsXG4gICAgXG4gICAgLy8gQWN0aW9uc1xuICAgIGhhbmRsZVVzZXJGaWxlVXBsb2FkLFxuICAgIGhhbmRsZUFwcGFyZWxGaWxlVXBsb2FkLFxuICAgIGhhbmRsZUxlZnRDYXJkSW1hZ2VVcGxvYWQsXG4gICAgaGFuZGxlUmlnaHRDYXJkSW1hZ2VVcGxvYWQsXG4gICAgc3RhcnRHZW5lcmF0aW9uLFxuICAgIHJldHJ5R2VuZXJhdGlvbixcbiAgICBjYW5jZWxHZW5lcmF0aW9uLFxuICAgIHJlc2V0V29ya2Zsb3csXG4gICAgY2xvc2VQb2xhcm9pZCxcbiAgICBjbGVhckVycm9yLFxuICAgIHZhbGlkYXRlRmlsZXMsXG4gICAgY2FuR2VuZXJhdGVcbiAgfTtcbn0iXSwibmFtZXMiOlsiV29ya2Zsb3dTdGF0ZSIsInVzZVRyeW9uV29ya2Zsb3ciLCJERUZBVUxUX0NPTkZJRyIsInRpbWVvdXRNcyIsImNvbXByZXNzaW9uTGltaXRLQiIsImF1dG9SZXRyeSIsIm1heFJldHJpZXMiLCJkZWJ1ZyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImltYWdlUHJvY2Vzc2luZyIsInRhcmdldFdpZHRoIiwidGFyZ2V0SGVpZ2h0IiwicXVhbGl0eSIsImNvbmZpZyIsInNob3dUb2FzdCIsImZpbmFsQ29uZmlnIiwidHJ5b25NdXRhdGlvbiIsInVzZVRyeW9uTXV0YXRpb24iLCJwcm9jZXNzQmFzaWMiLCJ1c2VJbWFnZVByb2Nlc3NpbmciLCJhYm9ydENvbnRyb2xsZXJSZWYiLCJ1c2VSZWYiLCJzdGF0ZSIsInNldFN0YXRlIiwidXNlU3RhdGUiLCJ3b3JrZmxvd1N0YXRlIiwiaXNDYXB0dXJpbmciLCJzaG93UG9sYXJvaWQiLCJnZW5lcmF0ZWRJbWFnZSIsImhhc0Vycm9yIiwidXNlckltYWdlRmlsZSIsImFwcGFyZWxJbWFnZUZpbGUiLCJsZWZ0Q2FyZEltYWdlIiwicmlnaHRDYXJkSW1hZ2UiLCJwcm9ncmVzcyIsImVycm9yIiwicmV0cnlDb3VudCIsImxhc3RPcGVyYXRpb25UaW1lIiwibG9nIiwidXNlQ2FsbGJhY2siLCJhcmdzIiwiY29uc29sZSIsImhhbmRsZUVycm9yIiwidHlwZSIsIndvcmtmbG93RXJyb3IiLCJDb21wcmVzc2lvbkZhaWxlZEVycm9yIiwibWVzc2FnZSIsIm9yaWdpbmFsRXJyb3IiLCJyZXRyeWFibGUiLCJFcnJvciIsIm5hbWUiLCJpbmNsdWRlcyIsInN0YXR1c01hdGNoIiwibWF0Y2giLCJzdGF0dXMiLCJwYXJzZUludCIsInVuZGVmaW5lZCIsImVycm9yVG9NZXNzYWdlIiwiU3RyaW5nIiwicHJldiIsInVwZGF0ZVByb2dyZXNzIiwidmFsaWRhdGVGaWxlcyIsImVycm9ycyIsInB1c2giLCJpc1ZhbGlkIiwibGVuZ3RoIiwiY2FuR2VuZXJhdGUiLCJjcmVhdGVGaWxlRnJvbUltYWdlVXJsIiwiaW1hZ2VVcmwiLCJmaWxlbmFtZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJibG9iIiwiRmlsZSIsInJlc2l6ZUltYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbWciLCJJbWFnZSIsImNyb3NzT3JpZ2luIiwib25sb2FkIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiZ2V0Q29udGV4dCIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhd0ltYWdlIiwicmVzaXplZEltYWdlVXJsIiwidG9EYXRhVVJMIiwib25lcnJvciIsInNyYyIsImhhbmRsZVVzZXJGaWxlVXBsb2FkIiwiZmlsZSIsInNpemUiLCJoYW5kbGVBcHBhcmVsRmlsZVVwbG9hZCIsImhhbmRsZUxlZnRDYXJkSW1hZ2VVcGxvYWQiLCJoYW5kbGVSaWdodENhcmRJbWFnZVVwbG9hZCIsInN0YXJ0R2VuZXJhdGlvbiIsInZhbGlkYXRpb24iLCJEYXRlIiwibm93IiwiY3VycmVudCIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsIm1vZGVsQjY0IiwiYXBwYXJlbEI2NCIsImFsbCIsImZpbGVUb0Jhc2U2NCIsInRoZW4iLCJiNjQiLCJjb21wcmVzc0Jhc2U2NCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsSW1hZ2UiLCJhcHBhcmVsSW1hZ2VzIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiaW1nX2dlbmVyYXRlZCIsImpzb24iLCJyZXRyeUdlbmVyYXRpb24iLCJjYW5jZWxHZW5lcmF0aW9uIiwicmVzZXRXb3JrZmxvdyIsImNsb3NlUG9sYXJvaWQiLCJjbGVhckVycm9yIiwidXNlRWZmZWN0IiwiZGVsYXkiLCJNYXRoIiwibWluIiwicG93Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0lBb0JZQSxhQUFhO2VBQWJBOztJQXNISUMsZ0JBQWdCO2VBQWhCQTs7O3VCQXJJeUM7K0JBUWxEO3VCQUM4RDtnQ0FDdEM7QUFLeEIsSUFBQSxBQUFLRCx1Q0FBQUE7Ozs7Ozs7V0FBQUE7O0FBbUdaOztDQUVDLEdBQ0QsTUFBTUUsaUJBQTJDO0lBQy9DQyxXQUFXO0lBQ1hDLG9CQUFvQjtJQUNwQkMsV0FBVztJQUNYQyxZQUFZO0lBQ1pDLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLO0lBQ2hDQyxpQkFBaUI7UUFDZkMsYUFBYTtRQUNiQyxjQUFjO1FBQ2RDLFNBQVM7SUFDWDtBQUNGO0FBS08sU0FBU2IsaUJBQ2RjLFNBQXlCLENBQUMsQ0FBQyxFQUMzQkMsU0FBeUI7SUFFekIsTUFBTUMsY0FBYztRQUFFLEdBQUdmLGNBQWM7UUFBRSxHQUFHYSxNQUFNO0lBQUM7SUFFbkQsdUJBQXVCO0lBQ3ZCLE1BQU1HLGdCQUFnQkMsSUFBQUEsK0JBQWdCO0lBQ3RDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUdDLElBQUFBLGlDQUFrQjtJQUUzQyxvQ0FBb0M7SUFDcEMsTUFBTUMscUJBQXFCQyxJQUFBQSxhQUFNLEVBQXlCO0lBRTFELGFBQWE7SUFDYixNQUFNLENBQUNDLE9BQU9DLFNBQVMsR0FBR0MsSUFBQUEsZUFBUSxFQUFxQjtRQUNyREMs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
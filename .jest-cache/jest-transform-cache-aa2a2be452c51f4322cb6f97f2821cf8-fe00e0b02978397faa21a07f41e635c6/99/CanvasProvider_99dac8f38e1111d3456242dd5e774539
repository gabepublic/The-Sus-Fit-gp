e1444cae7c7da572495b99cf57b6b22b
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    CanvasProvider: function() {
        return CanvasProvider;
    },
    useCanvas: function() {
        return useCanvas;
    },
    useCanvasUtils: function() {
        return useCanvasUtils;
    },
    useManagedCanvas: function() {
        return useManagedCanvas;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const CanvasContext = /*#__PURE__*/ (0, _react.createContext)(null);
function CanvasProvider({ children, maxPoolSize = 10, enableHighDPI = true }) {
    const canvasPoolRef = (0, _react.useRef)(new Map());
    const devicePixelRatio = enableHighDPI ? window.devicePixelRatio || 1 : 1;
    // Check canvas support
    const isSupported = (0, _react.useCallback)(()=>{
        try {
            const testCanvas = document.createElement('canvas');
            return !!(testCanvas.getContext && testCanvas.getContext('2d'));
        } catch  {
            return false;
        }
    }, []);
    // Canvas utilities implementation
    const utils = {
        createCanvas: (0, _react.useCallback)((width, height)=>{
            const canvas = document.createElement('canvas');
            // Set display size
            canvas.style.width = `${width}px`;
            canvas.style.height = `${height}px`;
            // Set actual size for high-DPI
            canvas.width = width * devicePixelRatio;
            canvas.height = height * devicePixelRatio;
            // Scale context for high-DPI
            const ctx = canvas.getContext('2d');
            if (ctx && devicePixelRatio !== 1) {
                ctx.scale(devicePixelRatio, devicePixelRatio);
            }
            return canvas;
        }, [
            devicePixelRatio
        ]),
        getContext2D: (0, _react.useCallback)((canvas)=>{
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                throw new Error('Could not get 2D context from canvas');
            }
            return ctx;
        }, []),
        loadImageToCanvas: (0, _react.useCallback)((canvas, imageUrl)=>{
            return new Promise((resolve, reject)=>{
                const img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = ()=>{
                    try {
                        const ctx = utils.getContext2D(canvas);
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.drawImage(img, 0, 0, canvas.width / devicePixelRatio, canvas.height / devicePixelRatio);
                        resolve();
                    } catch (error) {
                        reject(new Error(`Failed to draw image to canvas: ${error}`));
                    }
                };
                img.onerror = ()=>{
                    reject(new Error('Failed to load image'));
                };
                img.src = imageUrl;
            });
        }, [
            devicePixelRatio
        ]),
        canvasToDataURL: (0, _react.useCallback)((canvas, format = 'image/png', quality = 0.9)=>{
            return canvas.toDataURL(format, quality);
        }, []),
        clearCanvas: (0, _react.useCallback)((canvas)=>{
            const ctx = utils.getContext2D(canvas);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }, []),
        resizeCanvas: (0, _react.useCallback)((canvas, newWidth, newHeight)=>{
            // Save current content
            const imageData = canvas.toDataURL();
            // Resize canvas
            canvas.style.width = `${newWidth}px`;
            canvas.style.height = `${newHeight}px`;
            canvas.width = newWidth * devicePixelRatio;
            canvas.height = newHeight * devicePixelRatio;
            // Scale context for high-DPI
            const ctx = utils.getContext2D(canvas);
            if (devicePixelRatio !== 1) {
                ctx.scale(devicePixelRatio, devicePixelRatio);
            }
            // Restore content
            const img = new Image();
            img.onload = ()=>{
                ctx.drawImage(img, 0, 0, newWidth, newHeight);
            };
            img.src = imageData;
        }, [
            devicePixelRatio
        ]),
        cloneCanvas: (0, _react.useCallback)((sourceCanvas)=>{
            const clone = utils.createCanvas(sourceCanvas.width / devicePixelRatio, sourceCanvas.height / devicePixelRatio);
            const cloneCtx = utils.getContext2D(clone);
            cloneCtx.drawImage(sourceCanvas, 0, 0);
            return clone;
        }, [])
    };
    // Canvas pool implementation
    const pool = {
        getCanvas: (0, _react.useCallback)((width, height, id)=>{
            const canvasId = id || `canvas_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            // Check if canvas with this ID already exists
            const existing = canvasPoolRef.current.get(canvasId);
            if (existing && !existing.inUse) {
                // Resize existing canvas if dimensions don't match
                if (existing.dimensions.width !== width || existing.dimensions.height !== height) {
                    utils.resizeCanvas(existing.canvas, width, height);
                    existing.dimensions = {
                        width,
                        height
                    };
                }
                existing.inUse = true;
                return existing;
            }
            // Create new canvas
            const canvas = utils.createCanvas(width, height);
            const context = utils.getContext2D(canvas);
            const managedCanvas = {
                canvas,
                context,
                id: canvasId,
                dimensions: {
                    width,
                    height
                },
                pixelRatio: devicePixelRatio,
                inUse: true,
                createdAt: Date.now()
            };
            // Add to pool, removing oldest if at capacity
            if (canvasPoolRef.current.size >= maxPoolSize) {
                const oldestEntry = Array.from(canvasPoolRef.current.entries()).filter(([, canvas])=>!canvas.inUse).sort((a, b)=>a[1].createdAt - b[1].createdAt)[0];
                if (oldestEntry) {
                    canvasPoolRef.current.delete(oldestEntry[0]);
                }
            }
            canvasPoolRef.current.set(canvasId, managedCanvas);
            return managedCanvas;
        }, [
            maxPoolSize,
            devicePixelRatio
        ]),
        releaseCanvas: (0, _react.useCallback)((id)=>{
            const canvas = canvasPoolRef.current.get(id);
            if (canvas) {
                canvas.inUse = false;
                // Clear the canvas for reuse
                utils.clearCanvas(canvas.canvas);
            }
        }, []),
        clearPool: (0, _react.useCallback)(()=>{
            canvasPoolRef.current.clear();
        }, []),
        getCanvasById: (0, _react.useCallback)((id)=>{
            return canvasPoolRef.current.get(id) || null;
        }, []),
        getActiveCanvases: (0, _react.useCallback)(()=>{
            return Array.from(canvasPoolRef.current.values()).filter((canvas)=>canvas.inUse);
        }, [])
    };
    // Cleanup on unmount
    (0, _react.useEffect)(()=>{
        return ()=>{
            pool.clearPool();
        };
    }, []);
    const contextValue = {
        pool,
        utils,
        devicePixelRatio,
        isSupported: isSupported()
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(CanvasContext.Provider, {
        value: contextValue,
        children: children
    });
}
function useCanvas() {
    const context = (0, _react.useContext)(CanvasContext);
    if (!context) {
        throw new Error('useCanvas must be used within a CanvasProvider');
    }
    return context;
}
function useManagedCanvas(width, height, id) {
    const { pool } = useCanvas();
    const canvasRef = (0, _react.useRef)(null);
    (0, _react.useEffect)(()=>{
        // Get canvas on mount
        canvasRef.current = pool.getCanvas(width, height, id);
        // Release canvas on unmount
        return ()=>{
            if (canvasRef.current) {
                pool.releaseCanvas(canvasRef.current.id);
            }
        };
    }, [
        width,
        height,
        id,
        pool
    ]);
    if (!canvasRef.current) {
        throw new Error('Canvas not initialized');
    }
    return canvasRef.current;
}
function useCanvasUtils() {
    const { utils } = useCanvas();
    return utils;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3Avc3JjL2J1c2luZXNzLWxheWVyL3Byb3ZpZGVycy9DYW52YXNQcm92aWRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIENhbnZhcyBpbnN0YW5jZSB3aXRoIG1ldGFkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWFuYWdlZENhbnZhcyB7XG4gIC8qKiBDYW52YXMgZWxlbWVudCAqL1xuICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAvKiogMkQgcmVuZGVyaW5nIGNvbnRleHQgKi9cbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAvKiogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgY2FudmFzICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKiBDYW52YXMgZGltZW5zaW9ucyAqL1xuICBkaW1lbnNpb25zOiB7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH07XG4gIC8qKiBEZXZpY2UgcGl4ZWwgcmF0aW8gZm9yIGhpZ2gtRFBJIGRpc3BsYXlzICovXG4gIHBpeGVsUmF0aW86IG51bWJlcjtcbiAgLyoqIFdoZXRoZXIgdGhlIGNhbnZhcyBpcyBjdXJyZW50bHkgaW4gdXNlICovXG4gIGluVXNlOiBib29sZWFuO1xuICAvKiogQ3JlYXRpb24gdGltZXN0YW1wICovXG4gIGNyZWF0ZWRBdDogbnVtYmVyO1xufVxuXG4vKipcbiAqIENhbnZhcyBwb29sIGZvciBlZmZpY2llbnQgY2FudmFzIG1hbmFnZW1lbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYW52YXNQb29sIHtcbiAgLyoqIEdldCBvciBjcmVhdGUgYSBjYW52YXMgd2l0aCBzcGVjaWZpZWQgZGltZW5zaW9ucyAqL1xuICBnZXRDYW52YXM6ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgaWQ/OiBzdHJpbmcpID0+IE1hbmFnZWRDYW52YXM7XG4gIC8qKiBSZXR1cm4gYSBjYW52YXMgdG8gdGhlIHBvb2wgKi9cbiAgcmVsZWFzZUNhbnZhczogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKiBDbGVhciBhbGwgY2FudmFzZXMgZnJvbSB0aGUgcG9vbCAqL1xuICBjbGVhclBvb2w6ICgpID0+IHZvaWQ7XG4gIC8qKiBHZXQgY2FudmFzIGJ5IElEICovXG4gIGdldENhbnZhc0J5SWQ6IChpZDogc3RyaW5nKSA9PiBNYW5hZ2VkQ2FudmFzIHwgbnVsbDtcbiAgLyoqIEdldCBhbGwgYWN0aXZlIGNhbnZhc2VzICovXG4gIGdldEFjdGl2ZUNhbnZhc2VzOiAoKSA9PiBNYW5hZ2VkQ2FudmFzW107XG59XG5cbi8qKlxuICogQ2FudmFzIHV0aWxpdGllcyBmb3IgY29tbW9uIG9wZXJhdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYW52YXNVdGlscyB7XG4gIC8qKiBDcmVhdGUgY2FudmFzIHdpdGggcHJvcGVyIGRldmljZSBwaXhlbCByYXRpbyBzZXR1cCAqL1xuICBjcmVhdGVDYW52YXM6ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gSFRNTENhbnZhc0VsZW1lbnQ7XG4gIC8qKiBHZXQgMkQgY29udGV4dCB3aXRoIGVycm9yIGhhbmRsaW5nICovXG4gIGdldENvbnRleHQyRDogKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpID0+IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgLyoqIExvYWQgaW1hZ2Ugb250byBjYW52YXMgKi9cbiAgbG9hZEltYWdlVG9DYW52YXM6IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBpbWFnZVVybDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAvKiogQ29udmVydCBjYW52YXMgdG8gZGF0YSBVUkwgd2l0aCBvcHRpb25zICovXG4gIGNhbnZhc1RvRGF0YVVSTDogKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIGZvcm1hdD86IHN0cmluZywgcXVhbGl0eT86IG51bWJlcikgPT4gc3RyaW5nO1xuICAvKiogQ2xlYXIgY2FudmFzICovXG4gIGNsZWFyQ2FudmFzOiAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkgPT4gdm9pZDtcbiAgLyoqIFJlc2l6ZSBjYW52YXMgbWFpbnRhaW5pbmcgY29udGVudCAqL1xuICByZXNpemVDYW52YXM6IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBuZXdXaWR0aDogbnVtYmVyLCBuZXdIZWlnaHQ6IG51bWJlcikgPT4gdm9pZDtcbiAgLyoqIENsb25lIGNhbnZhcyBjb250ZW50IHRvIG5ldyBjYW52YXMgKi9cbiAgY2xvbmVDYW52YXM6IChzb3VyY2VDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSA9PiBIVE1MQ2FudmFzRWxlbWVudDtcbn1cblxuLyoqXG4gKiBDYW52YXMgY29udGV4dCBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYW52YXNDb250ZXh0VmFsdWUge1xuICAvKiogQ2FudmFzIHBvb2wgZm9yIGVmZmljaWVudCBtYW5hZ2VtZW50ICovXG4gIHBvb2w6IENhbnZhc1Bvb2w7XG4gIC8qKiBDYW52YXMgdXRpbGl0aWVzICovXG4gIHV0aWxzOiBDYW52YXNVdGlscztcbiAgLyoqIEN1cnJlbnQgZGV2aWNlIHBpeGVsIHJhdGlvICovXG4gIGRldmljZVBpeGVsUmF0aW86IG51bWJlcjtcbiAgLyoqIFdoZXRoZXIgY2FudmFzIGlzIHN1cHBvcnRlZCAqL1xuICBpc1N1cHBvcnRlZDogYm9vbGVhbjtcbn1cblxuY29uc3QgQ2FudmFzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8Q2FudmFzQ29udGV4dFZhbHVlIHwgbnVsbD4obnVsbCk7XG5cbi8qKlxuICogQ2FudmFzIHByb3ZpZGVyIGNvbXBvbmVudCBwcm9wc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbnZhc1Byb3ZpZGVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKiogTWF4aW11bSBudW1iZXIgb2YgY2FudmFzZXMgdG8ga2VlcCBpbiBwb29sICovXG4gIG1heFBvb2xTaXplPzogbnVtYmVyO1xuICAvKiogV2hldGhlciB0byBlbmFibGUgaGlnaC1EUEkgc3VwcG9ydCAqL1xuICBlbmFibGVIaWdoRFBJPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDYW52YXMgcHJvdmlkZXIgY29tcG9uZW50IHRoYXQgbWFuYWdlcyBjYW52YXMgaW5zdGFuY2VzIGFuZCB1dGlsaXRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIENhbnZhc1Byb3ZpZGVyKHsgXG4gIGNoaWxkcmVuLCBcbiAgbWF4UG9vbFNpemUgPSAxMCxcbiAgZW5hYmxlSGlnaERQSSA9IHRydWUgXG59OiBDYW52YXNQcm92aWRlclByb3BzKTogSlNYLkVsZW1lbnQge1xuICBjb25zdCBjYW52YXNQb29sUmVmID0gdXNlUmVmPE1hcDxzdHJpbmcsIE1hbmFnZWRDYW52YXM+PihuZXcgTWFwKCkpO1xuICBjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gZW5hYmxlSGlnaERQSSA/IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEgOiAxO1xuXG4gIC8vIENoZWNrIGNhbnZhcyBzdXBwb3J0XG4gIGNvbnN0IGlzU3VwcG9ydGVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXN0Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICByZXR1cm4gISEodGVzdENhbnZhcy5nZXRDb250ZXh0ICYmIHRlc3RDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gQ2FudmFzIHV0aWxpdGllcyBpbXBsZW1lbnRhdGlvblxuICBjb25zdCB1dGlsczogQ2FudmFzVXRpbHMgPSB7XG4gICAgY3JlYXRlQ2FudmFzOiB1c2VDYWxsYmFjaygod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgXG4gICAgICAvLyBTZXQgZGlzcGxheSBzaXplXG4gICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgIFxuICAgICAgLy8gU2V0IGFjdHVhbCBzaXplIGZvciBoaWdoLURQSVxuICAgICAgY2FudmFzLndpZHRoID0gd2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodCAqIGRldmljZVBpeGVsUmF0aW87XG4gICAgICBcbiAgICAgIC8vIFNjYWxlIGNvbnRleHQgZm9yIGhpZ2gtRFBJXG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGlmIChjdHggJiYgZGV2aWNlUGl4ZWxSYXRpbyAhPT0gMSkge1xuICAgICAgICBjdHguc2NhbGUoZGV2aWNlUGl4ZWxSYXRpbywgZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfSwgW2RldmljZVBpeGVsUmF0aW9dKSxcblxuICAgIGdldENvbnRleHQyRDogdXNlQ2FsbGJhY2soKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZ2V0IDJEIGNvbnRleHQgZnJvbSBjYW52YXMnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdHg7XG4gICAgfSwgW10pLFxuXG4gICAgbG9hZEltYWdlVG9DYW52YXM6IHVzZUNhbGxiYWNrKChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBpbWFnZVVybDogc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG4gICAgICAgIFxuICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB1dGlscy5nZXRDb250ZXh0MkQoY2FudmFzKTtcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGggLyBkZXZpY2VQaXhlbFJhdGlvLCBjYW52YXMuaGVpZ2h0IC8gZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBkcmF3IGltYWdlIHRvIGNhbnZhczogJHtlcnJvcn1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgaW1hZ2UnKSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBpbWcuc3JjID0gaW1hZ2VVcmw7XG4gICAgICB9KTtcbiAgICB9LCBbZGV2aWNlUGl4ZWxSYXRpb10pLFxuXG4gICAgY2FudmFzVG9EYXRhVVJMOiB1c2VDYWxsYmFjaygoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZm9ybWF0ID0gJ2ltYWdlL3BuZycsIHF1YWxpdHkgPSAwLjkpID0+IHtcbiAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKGZvcm1hdCwgcXVhbGl0eSk7XG4gICAgfSwgW10pLFxuXG4gICAgY2xlYXJDYW52YXM6IHVzZUNhbGxiYWNrKChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBjdHggPSB1dGlscy5nZXRDb250ZXh0MkQoY2FudmFzKTtcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB9LCBbXSksXG5cbiAgICByZXNpemVDYW52YXM6IHVzZUNhbGxiYWNrKChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBuZXdXaWR0aDogbnVtYmVyLCBuZXdIZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgICAgLy8gU2F2ZSBjdXJyZW50IGNvbnRlbnRcbiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICAgIFxuICAgICAgLy8gUmVzaXplIGNhbnZhc1xuICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gYCR7bmV3V2lkdGh9cHhgO1xuICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke25ld0hlaWdodH1weGA7XG4gICAgICBjYW52YXMud2lkdGggPSBuZXdXaWR0aCAqIGRldmljZVBpeGVsUmF0aW87XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gbmV3SGVpZ2h0ICogZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIFxuICAgICAgLy8gU2NhbGUgY29udGV4dCBmb3IgaGlnaC1EUElcbiAgICAgIGNvbnN0IGN0eCA9IHV0aWxzLmdldENvbnRleHQyRChjYW52YXMpO1xuICAgICAgaWYgKGRldmljZVBpeGVsUmF0aW8gIT09IDEpIHtcbiAgICAgICAgY3R4LnNjYWxlKGRldmljZVBpeGVsUmF0aW8sIGRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIGNvbnRlbnRcbiAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIG5ld1dpZHRoLCBuZXdIZWlnaHQpO1xuICAgICAgfTtcbiAgICAgIGltZy5zcmMgPSBpbWFnZURhdGE7XG4gICAgfSwgW2RldmljZVBpeGVsUmF0aW9dKSxcblxuICAgIGNsb25lQ2FudmFzOiB1c2VDYWxsYmFjaygoc291cmNlQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkgPT4ge1xuICAgICAgY29uc3QgY2xvbmUgPSB1dGlscy5jcmVhdGVDYW52YXMoXG4gICAgICAgIHNvdXJjZUNhbnZhcy53aWR0aCAvIGRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgIHNvdXJjZUNhbnZhcy5oZWlnaHQgLyBkZXZpY2VQaXhlbFJhdGlvXG4gICAgICApO1xuICAgICAgY29uc3QgY2xvbmVDdHggPSB1dGlscy5nZXRDb250ZXh0MkQoY2xvbmUpO1xuICAgICAgY2xvbmVDdHguZHJhd0ltYWdlKHNvdXJjZUNhbnZhcywgMCwgMCk7XG4gICAgICByZXR1cm4gY2xvbmU7XG4gICAgfSwgW10pXG4gIH07XG5cbiAgLy8gQ2FudmFzIHBvb2wgaW1wbGVtZW50YXRpb25cbiAgY29uc3QgcG9vbDogQ2FudmFzUG9vbCA9IHtcbiAgICBnZXRDYW52YXM6IHVzZUNhbGxiYWNrKCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgaWQ/OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGNhbnZhc0lkID0gaWQgfHwgYGNhbnZhc18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNhbnZhcyB3aXRoIHRoaXMgSUQgYWxyZWFkeSBleGlzdHNcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gY2FudmFzUG9vbFJlZi5jdXJyZW50LmdldChjYW52YXNJZCk7XG4gICAgICBpZiAoZXhpc3RpbmcgJiYgIWV4aXN0aW5nLmluVXNlKSB7XG4gICAgICAgIC8vIFJlc2l6ZSBleGlzdGluZyBjYW52YXMgaWYgZGltZW5zaW9ucyBkb24ndCBtYXRjaFxuICAgICAgICBpZiAoZXhpc3RpbmcuZGltZW5zaW9ucy53aWR0aCAhPT0gd2lkdGggfHwgZXhpc3RpbmcuZGltZW5zaW9ucy5oZWlnaHQgIT09IGhlaWdodCkge1xuICAgICAgICAgIHV0aWxzLnJlc2l6ZUNhbnZhcyhleGlzdGluZy5jYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgIGV4aXN0aW5nLmRpbWVuc2lvbnMgPSB7IHdpZHRoLCBoZWlnaHQgfTtcbiAgICAgICAgfVxuICAgICAgICBleGlzdGluZy5pblVzZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIG5ldyBjYW52YXNcbiAgICAgIGNvbnN0IGNhbnZhcyA9IHV0aWxzLmNyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB1dGlscy5nZXRDb250ZXh0MkQoY2FudmFzKTtcbiAgICAgIFxuICAgICAgY29uc3QgbWFuYWdlZENhbnZhczogTWFuYWdlZENhbnZhcyA9IHtcbiAgICAgICAgY2FudmFzLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBpZDogY2FudmFzSWQsXG4gICAgICAgIGRpbWVuc2lvbnM6IHsgd2lkdGgsIGhlaWdodCB9LFxuICAgICAgICBwaXhlbFJhdGlvOiBkZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICBpblVzZTogdHJ1ZSxcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICAvLyBBZGQgdG8gcG9vbCwgcmVtb3Zpbmcgb2xkZXN0IGlmIGF0IGNhcGFjaXR5XG4gICAgICBpZiAoY2FudmFzUG9vbFJlZi5jdXJyZW50LnNpemUgPj0gbWF4UG9vbFNpemUpIHtcbiAgICAgICAgY29uc3Qgb2xkZXN0RW50cnkgPSBBcnJheS5mcm9tKGNhbnZhc1Bvb2xSZWYuY3VycmVudC5lbnRyaWVzKCkpXG4gICAgICAgICAgLmZpbHRlcigoWywgY2FudmFzXSkgPT4gIWNhbnZhcy5pblVzZSlcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYVsxXS5jcmVhdGVkQXQgLSBiWzFdLmNyZWF0ZWRBdClbMF07XG4gICAgICAgIFxuICAgICAgICBpZiAob2xkZXN0RW50cnkpIHtcbiAgICAgICAgICBjYW52YXNQb29sUmVmLmN1cnJlbnQuZGVsZXRlKG9sZGVzdEVudHJ5WzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYW52YXNQb29sUmVmLmN1cnJlbnQuc2V0KGNhbnZhc0lkLCBtYW5hZ2VkQ2FudmFzKTtcbiAgICAgIHJldHVybiBtYW5hZ2VkQ2FudmFzO1xuICAgIH0sIFttYXhQb29sU2l6ZSwgZGV2aWNlUGl4ZWxSYXRpb10pLFxuXG4gICAgcmVsZWFzZUNhbnZhczogdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1Bvb2xSZWYuY3VycmVudC5nZXQoaWQpO1xuICAgICAgaWYgKGNhbnZhcykge1xuICAgICAgICBjYW52YXMuaW5Vc2UgPSBmYWxzZTtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGNhbnZhcyBmb3IgcmV1c2VcbiAgICAgICAgdXRpbHMuY2xlYXJDYW52YXMoY2FudmFzLmNhbnZhcyk7XG4gICAgICB9XG4gICAgfSwgW10pLFxuXG4gICAgY2xlYXJQb29sOiB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICBjYW52YXNQb29sUmVmLmN1cnJlbnQuY2xlYXIoKTtcbiAgICB9LCBbXSksXG5cbiAgICBnZXRDYW52YXNCeUlkOiB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgcmV0dXJuIGNhbnZhc1Bvb2xSZWYuY3VycmVudC5nZXQoaWQpIHx8IG51bGw7XG4gICAgfSwgW10pLFxuXG4gICAgZ2V0QWN0aXZlQ2FudmFzZXM6IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGNhbnZhc1Bvb2xSZWYuY3VycmVudC52YWx1ZXMoKSkuZmlsdGVyKGNhbnZhcyA9PiBjYW52YXMuaW5Vc2UpO1xuICAgIH0sIFtdKVxuICB9O1xuXG4gIC8vIENsZWFudXAgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBwb29sLmNsZWFyUG9vbCgpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBjb25zdCBjb250ZXh0VmFsdWU6IENhbnZhc0NvbnRleHRWYWx1ZSA9IHtcbiAgICBwb29sLFxuICAgIHV0aWxzLFxuICAgIGRldmljZVBpeGVsUmF0aW8sXG4gICAgaXNTdXBwb3J0ZWQ6IGlzU3VwcG9ydGVkKClcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxDYW52YXNDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvQ2FudmFzQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuLyoqXG4gKiBIb29rIHRvIGFjY2VzcyBjYW52YXMgY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FudmFzKCk6IENhbnZhc0NvbnRleHRWYWx1ZSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KENhbnZhc0NvbnRleHQpO1xuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUNhbnZhcyBtdXN0IGJlIHVzZWQgd2l0aGluIGEgQ2FudmFzUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn1cblxuLyoqXG4gKiBIb29rIHRvIGdldCBhIG1hbmFnZWQgY2FudmFzIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VNYW5hZ2VkQ2FudmFzKFxuICB3aWR0aDogbnVtYmVyLFxuICBoZWlnaHQ6IG51bWJlcixcbiAgaWQ/OiBzdHJpbmdcbik6IE1hbmFnZWRDYW52YXMge1xuICBjb25zdCB7IHBvb2wgfSA9IHVzZUNhbnZhcygpO1xuICBcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmPE1hbmFnZWRDYW52YXMgfCBudWxsPihudWxsKTtcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gR2V0IGNhbnZhcyBvbiBtb3VudFxuICAgIGNhbnZhc1JlZi5jdXJyZW50ID0gcG9vbC5nZXRDYW52YXMod2lkdGgsIGhlaWdodCwgaWQpO1xuICAgIFxuICAgIC8vIFJlbGVhc2UgY2FudmFzIG9uIHVubW91bnRcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgIHBvb2wucmVsZWFzZUNhbnZhcyhjYW52YXNSZWYuY3VycmVudC5pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3dpZHRoLCBoZWlnaHQsIGlkLCBwb29sXSk7XG4gIFxuICBpZiAoIWNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW52YXMgbm90IGluaXRpYWxpemVkJyk7XG4gIH1cbiAgXG4gIHJldHVybiBjYW52YXNSZWYuY3VycmVudDtcbn1cblxuLyoqXG4gKiBIb29rIGZvciBjYW52YXMgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDYW52YXNVdGlscygpOiBDYW52YXNVdGlscyB7XG4gIGNvbnN0IHsgdXRpbHMgfSA9IHVzZUNhbnZhcygpO1xuICByZXR1cm4gdXRpbHM7XG59Il0sIm5hbWVzIjpbIkNhbnZhc1Byb3ZpZGVyIiwidXNlQ2FudmFzIiwidXNlQ2FudmFzVXRpbHMiLCJ1c2VNYW5hZ2VkQ2FudmFzIiwiQ2FudmFzQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJjaGlsZHJlbiIsIm1heFBvb2xTaXplIiwiZW5hYmxlSGlnaERQSSIsImNhbnZhc1Bvb2xSZWYiLCJ1c2VSZWYiLCJNYXAiLCJkZXZpY2VQaXhlbFJhdGlvIiwid2luZG93IiwiaXNTdXBwb3J0ZWQiLCJ1c2VDYWxsYmFjayIsInRlc3RDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRDb250ZXh0IiwidXRpbHMiLCJjcmVhdGVDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImNhbnZhcyIsInN0eWxlIiwiY3R4Iiwic2NhbGUiLCJnZXRDb250ZXh0MkQiLCJFcnJvciIsImxvYWRJbWFnZVRvQ2FudmFzIiwiaW1hZ2VVcmwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImltZyIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJvbmxvYWQiLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJlcnJvciIsIm9uZXJyb3IiLCJzcmMiLCJjYW52YXNUb0RhdGFVUkwiLCJmb3JtYXQiLCJxdWFsaXR5IiwidG9EYXRhVVJMIiwiY2xlYXJDYW52YXMiLCJyZXNpemVDYW52YXMiLCJuZXdXaWR0aCIsIm5ld0hlaWdodCIsImltYWdlRGF0YSIsImNsb25lQ2FudmFzIiwic291cmNlQ2FudmFzIiwiY2xvbmUiLCJjbG9uZUN0eCIsInBvb2wiLCJnZXRDYW52YXMiLCJpZCIsImNhbnZhc0lkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImV4aXN0aW5nIiwiY3VycmVudCIsImdldCIsImluVXNlIiwiZGltZW5zaW9ucyIsImNvbnRleHQiLCJtYW5hZ2VkQ2FudmFzIiwicGl4ZWxSYXRpbyIsImNyZWF0ZWRBdCIsInNpemUiLCJvbGRlc3RFbnRyeSIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJmaWx0ZXIiLCJzb3J0IiwiYSIsImIiLCJkZWxldGUiLCJzZXQiLCJyZWxlYXNlQ2FudmFzIiwiY2xlYXJQb29sIiwiY2xlYXIiLCJnZXRDYW52YXNCeUlkIiwiZ2V0QWN0aXZlQ2FudmFzZXMiLCJ2YWx1ZXMiLCJ1c2VFZmZlY3QiLCJjb250ZXh0VmFsdWUiLCJQcm92aWRlciIsInZhbHVlIiwidXNlQ29udGV4dCIsImNhbnZhc1JlZiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztJQTBGZ0JBLGNBQWM7ZUFBZEE7O0lBZ05BQyxTQUFTO2VBQVRBOztJQTBDQUMsY0FBYztlQUFkQTs7SUEvQkFDLGdCQUFnQjtlQUFoQkE7Ozs7K0RBblRpRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0VqRixNQUFNQyw4QkFBZ0JDLElBQUFBLG9CQUFhLEVBQTRCO0FBZ0J4RCxTQUFTTCxlQUFlLEVBQzdCTSxRQUFRLEVBQ1JDLGNBQWMsRUFBRSxFQUNoQkMsZ0JBQWdCLElBQUksRUFDQTtJQUNwQixNQUFNQyxnQkFBZ0JDLElBQUFBLGFBQU0sRUFBNkIsSUFBSUM7SUFDN0QsTUFBTUMsbUJBQW1CSixnQkFBZ0JLLE9BQU9ELGdCQUFnQixJQUFJLElBQUk7SUFFeEUsdUJBQXVCO0lBQ3ZCLE1BQU1FLGNBQWNDLElBQUFBLGtCQUFXLEVBQUM7UUFDOUIsSUFBSTtZQUNGLE1BQU1DLGFBQWFDLFNBQVNDLGFBQWEsQ0FBQztZQUMxQyxPQUFPLENBQUMsQ0FBRUYsQ0FBQUEsV0FBV0csVUFBVSxJQUFJSCxXQUFXRyxVQUFVLENBQUMsS0FBSTtRQUMvRCxFQUFFLE9BQU07WUFDTixPQUFPO1FBQ1Q7SUFDRixHQUFHLEVBQUU7SUFFTCxrQ0FBa0M7SUFDbEMsTUFBTUMsUUFBcUI7UUFDekJDLGNBQWNOLElBQUFBLGtCQUFXLEVBQUMsQ0FBQ08sT0FBZUM7WUFDeEMsTUFBTUMsU0FBU1AsU0FBU0MsYUFBYSxDQUFDO1lBRXRDLG1CQUFtQjtZQUNuQk0sT0FBT0MsS0FBSyxDQUFDSCxLQUFLLEdBQUcsR0FBR0EsTUFBTSxFQUFFLENBQUM7WUFDakNFLE9BQU9DLEtBQUssQ0FBQ0YsTUFBTSxHQUFHLEdBQUdBLE9BQU8sRUFBRSxDQUFDO1lBRW5DLCtCQUEr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
3308535b61e45e144705f0a4019a5e73
/**
 * @jest-environment jsdom
 */ "use strict";
// Mock business layer dependencies
jest.mock('../../src/business-layer', ()=>({
        useTryonMutation: jest.fn(()=>({
                mutate: jest.fn(),
                mutateAsync: jest.fn(),
                data: undefined,
                error: null,
                isError: false,
                isSuccess: false,
                isLoading: false,
                reset: jest.fn()
            })),
        useImageProcessing: jest.fn(()=>({
                processImage: jest.fn(),
                isProcessing: false,
                error: null
            })),
        processImageForTryon: jest.fn().mockResolvedValue({
            processedImage: 'data:image/jpeg;base64,processed',
            originalSize: 1000,
            processedSize: 500,
            compressionRatio: 0.5,
            processingTime: 100
        }),
        resizeImageTo1024x1536: jest.fn().mockResolvedValue('data:image/jpeg;base64,resized')
    }));
// Mock utility dependencies
jest.mock('../../src/utils/image', ()=>({
        fileToBase64: jest.fn().mockResolvedValue('data:image/jpeg;base64,file-converted'),
        compressBase64: jest.fn().mockResolvedValue('data:image/jpeg;base64,compressed'),
        CompressionFailedError: jest.fn().mockImplementation((message)=>{
            const error = new Error(message);
            error.name = 'CompressionFailedError';
            return error;
        })
    }));
// Mock error utilities
jest.mock('../../src/lib/errorToMessage', ()=>({
        errorToMessage: jest.fn((error)=>error?.message || 'Unknown error')
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _index = require("../test-utils/index");
const _useTryonWorkflow = require("../../src/hooks/useTryonWorkflow");
// Setup test environment
(0, _index.setupTestEnvironment)();
// Setup API mocking at the top level
_index.MockAPIUtils.setupServer();
describe('useTryonWorkflow', ()=>{
    beforeEach(()=>{
    // MockAPIUtils.setupServer(); // Moved to top level
    });
    describe('Initialization', ()=>{
        it('should initialize with correct default state', ()=>{
            const { result } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            expect(result.current.isCapturing).toBe(false);
            expect(result.current.leftCardImage).toBeNull();
            expect(result.current.rightCardImage).toBeNull();
            expect(result.current.showPolaroid).toBe(false);
            expect(result.current.userImageFile).toBeNull();
            expect(result.current.apparelImageFile).toBeNull();
            expect(result.current.generatedImage).toBeNull();
            expect(result.current.hasError).toBe(false);
            expect(result.current.progress).toBe(0);
            expect(result.current.error).toBeNull();
            expect(result.current.workflowState).toBe('idle');
        });
        it('should provide all required workflow functions', ()=>{
            const { result } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            expect(typeof result.current.canGenerate).toBe('function');
            expect(typeof result.current.startGeneration).toBe('function');
            expect(typeof result.current.retryGeneration).toBe('function');
            expect(typeof result.current.resetWorkflow).toBe('function');
            expect(typeof result.current.closePolaroid).toBe('function');
            expect(typeof result.current.clearError).toBe('function');
            expect(typeof result.current.handleUserFileUpload).toBe('function');
            expect(typeof result.current.handleApparelFileUpload).toBe('function');
            expect(typeof result.current.handleLeftCardImageUpload).toBe('function');
            expect(typeof result.current.handleRightCardImageUpload).toBe('function');
        });
    });
    describe('File Upload Handling', ()=>{
        it('should handle user file upload correctly', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,user-image-data');
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.userImageFile).toBe(mockFiles.userImage);
            });
        });
        it('should handle apparel file upload correctly', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,apparel-image-data');
            (0, _react.act)(()=>{
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);
            });
        });
        it('should handle left card image upload with processing', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockImageUrl = 'data:image/jpeg;base64,left-card-image';
            testUtils.mockFileRead('data:image/jpeg;base64,processed-left-image');
            await (0, _react.act)(async ()=>{
                await result.current.handleLeftCardImageUpload(mockImageUrl);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.leftCardImage).toBeTruthy();
            });
        });
        it('should handle right card image upload with processing', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockImageUrl = 'data:image/jpeg;base64,right-card-image';
            testUtils.mockFileRead('data:image/jpeg;base64,processed-right-image');
            await (0, _react.act)(async ()=>{
                await result.current.handleRightCardImageUpload(mockImageUrl);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.rightCardImage).toBeTruthy();
            });
        });
        it('should handle file upload errors gracefully', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileReadError('File processing failed');
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
            });
            // Should handle error without crashing
            await (0, _react.waitFor)(()=>{
                expect(result.current.userImageFile).toBeNull();
            });
        });
    });
    describe('Generation Logic', ()=>{
        it('should correctly determine when generation can start', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Initially should not be able to generate
            expect(result.current.canGenerate()).toBe(false);
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            // Upload user image only
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.userImageFile).toBe(mockFiles.userImage);
            });
            // Still should not be able to generate with only one image
            expect(result.current.canGenerate()).toBe(false);
            // Upload apparel image
            (0, _react.act)(()=>{
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);
            });
            // Now should be able to generate
            expect(result.current.canGenerate()).toBe(true);
        });
        it('should handle successful generation workflow', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup mocks
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockSuccessfulApiCall({
                img_generated: 'data:image/jpeg;base64,generated-success'
            });
            // Upload files
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            // Start generation
            await (0, _react.act)(async ()=>{
                await result.current.startGeneration();
            });
            // Check generating state
            await (0, _react.waitFor)(()=>{
                expect(result.current.isCapturing).toBe(true);
                expect(result.current.showPolaroid).toBe(true);
                expect(result.current.workflowState).toBe('generating');
            });
            // Wait for completion
            await waitForWorkflow((workflow)=>!!workflow.generatedImage);
            expect(result.current.isCapturing).toBe(false);
            expect(result.current.generatedImage).toBeTruthy();
            expect(result.current.hasError).toBe(false);
        });
        it('should handle generation errors with proper error state', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup mocks
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockApiError('Generation failed', 500);
            // Upload files
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            // Start generation (will fail)
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to fail
                }
            });
            // Check error state
            await waitForWorkflow((workflow)=>workflow.hasError);
            expect(result.current.isCapturing).toBe(false);
            expect(result.current.hasError).toBe(true);
            expect(result.current.error).toBeTruthy();
            expect(result.current.generatedImage).toBeNull();
        });
        it('should handle timeout scenarios', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)({
                    timeoutMs: 1000
                }));
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup timeout
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockApiTimeout(2000); // Longer than our timeout
            // Upload files
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            // Start generation (will timeout)
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to timeout
                }
            });
            // Check timeout error state
            await waitForWorkflow((workflow)=>workflow.hasError);
            expect(result.current.hasError).toBe(true);
            expect(result.current.error).toBeTruthy();
        });
        it('should handle retry after error', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup initial failure
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockApiError('Initial failure', 500);
            // Upload files and fail generation
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to fail
                }
            });
            await waitForWorkflow((workflow)=>workflow.hasError);
            // Setup successful retry
            testUtils.mockSuccessfulApiCall({
                img_generated: 'data:image/jpeg;base64,retry-success'
            });
            // Retry generation
            await (0, _react.act)(async ()=>{
                await result.current.retryGeneration();
            });
            await waitForWorkflow((workflow)=>!!workflow.generatedImage);
            expect(result.current.hasError).toBe(false);
            expect(result.current.generatedImage).toBeTruthy();
        });
    });
    describe('State Management', ()=>{
        it('should reset workflow state correctly', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup and complete workflow
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockSuccessfulApiCall();
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            await (0, _react.act)(async ()=>{
                await result.current.startGeneration();
            });
            await waitForWorkflow((workflow)=>!!workflow.generatedImage);
            // Reset workflow
            (0, _react.act)(()=>{
                result.current.resetWorkflow();
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.userImageFile).toBeNull();
                expect(result.current.apparelImageFile).toBeNull();
                expect(result.current.generatedImage).toBeNull();
                expect(result.current.leftCardImage).toBeNull();
                expect(result.current.rightCardImage).toBeNull();
                expect(result.current.showPolaroid).toBe(false);
                expect(result.current.hasError).toBe(false);
                expect(result.current.isCapturing).toBe(false);
                expect(result.current.workflowState).toBe('idle');
            });
        });
        it('should close polaroid correctly', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup and complete workflow
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockSuccessfulApiCall();
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            await (0, _react.act)(async ()=>{
                await result.current.startGeneration();
            });
            await waitForWorkflow((workflow)=>workflow.showPolaroid);
            // Close polaroid
            (0, _react.act)(()=>{
                result.current.closePolaroid();
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.showPolaroid).toBe(false);
            });
        });
        it('should clear error state', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            // Setup error scenario
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockApiError('Test error', 500);
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to fail
                }
            });
            await waitForWorkflow((workflow)=>workflow.hasError);
            // Clear error
            (0, _react.act)(()=>{
                result.current.clearError();
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.hasError).toBe(false);
                expect(result.current.error).toBeNull();
            });
        });
    });
    describe('Configuration', ()=>{
        it('should respect custom timeout configuration', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)({
                    timeoutMs: 500
                }));
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockApiTimeout(1000); // Longer than timeout
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.canGenerate()).toBe(true);
            });
            const startTime = Date.now();
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to timeout
                }
            });
            const duration = Date.now() - startTime;
            // Should timeout around 500ms, not 1000ms
            expect(duration).toBeLessThan(800);
        });
        it('should respect compression limit configuration', async ()=>{
            const { result, testUtils } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)({
                    compressionLimitKB: 100
                }));
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
            });
            // Configuration is applied internally, test should not throw errors
            await (0, _react.waitFor)(()=>{
                expect(result.current.userImageFile).toBe(mockFiles.userImage);
            });
        });
        it('should handle debug mode configuration', ()=>{
            const originalConsoleLog = console.log;
            console.log = jest.fn();
            const { result } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)({
                    debug: true
                }));
            // Debug configuration applied
            expect(result.current).toBeDefined();
            console.log = originalConsoleLog;
        });
    });
    describe('Progress Tracking', ()=>{
        it('should track progress during generation', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockSuccessfulApiCall(undefined, 500); // Add delay
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            const initialProgress = result.current.progress;
            await (0, _react.act)(async ()=>{
                await result.current.startGeneration();
            });
            // Progress should be tracked during generation
            await waitForWorkflow((workflow)=>!!workflow.generatedImage);
            expect(initialProgress).toBe(0);
        // Final progress should be higher than initial
        });
        it('should update workflow state throughout process', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            const stateChanges = [];
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockSuccessfulApiCall();
            // Track initial state
            stateChanges.push(result.current.workflowState);
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            await (0, _react.act)(async ()=>{
                await result.current.startGeneration();
            });
            // Track generating state
            await (0, _react.waitFor)(()=>{
                if (result.current.workflowState === 'generating') {
                    stateChanges.push(result.current.workflowState);
                }
            });
            await waitForWorkflow((workflow)=>!!workflow.generatedImage);
            // Track final state
            stateChanges.push(result.current.workflowState);
            expect(stateChanges[0]).toBe('idle');
            expect(stateChanges).toContain('generating');
        });
    });
    describe('Error Recovery', ()=>{
        it('should maintain state consistency after errors', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            testUtils.mockApiError('Network error', 500);
            // Upload files
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            // Fail generation
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to fail
                }
            });
            await waitForWorkflow((workflow)=>workflow.hasError);
            // Files should still be present after error
            expect(result.current.userImageFile).toBe(mockFiles.userImage);
            expect(result.current.apparelImageFile).toBe(mockFiles.apparelImage);
            expect(result.current.canGenerate()).toBe(true);
            expect(result.current.hasError).toBe(true);
        });
        it('should handle multiple consecutive errors', async ()=>{
            const { result, testUtils, waitForWorkflow } = (0, _index.renderBridgeHook)(()=>(0, _useTryonWorkflow.useTryonWorkflow)());
            const mockFiles = _index.WorkflowTestUtils.createMockFiles();
            testUtils.mockFileRead('data:image/jpeg;base64,processed-image');
            (0, _react.act)(()=>{
                result.current.handleUserFileUpload(mockFiles.userImage);
                result.current.handleApparelFileUpload(mockFiles.apparelImage);
            });
            await waitForWorkflow((workflow)=>workflow.canGenerate());
            // First error
            testUtils.mockApiError('First error', 500);
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startGeneration();
                } catch (error) {
                // Expected to fail
                }
            });
            await waitForWorkflow((workflow)=>workflow.hasError);
            // Second error on retry
            testUtils.mockApiError('Second error', 500);
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.retryGeneration();
                } catch (error) {
                // Expected to fail again
                }
            });
            await waitForWorkflow((workflow)=>workflow.hasError);
            // Should still be in error state but functional
            expect(result.current.hasError).toBe(true);
            expect(result.current.canGenerate()).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL2JyaWRnZS1sYXllci91c2VUcnlvbldvcmtmbG93LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuaW1wb3J0IHsgYWN0LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBcbiAgcmVuZGVyQnJpZGdlSG9vaywgXG4gIE1vY2tBUElVdGlscywgXG4gIFdvcmtmbG93VGVzdFV0aWxzLFxuICBzZXR1cFRlc3RFbnZpcm9ubWVudCBcbn0gZnJvbSAnLi4vdGVzdC11dGlscy9pbmRleCc7XG5pbXBvcnQgeyB1c2VUcnlvbldvcmtmbG93IH0gZnJvbSAnQC9ob29rcy91c2VUcnlvbldvcmtmbG93JztcblxuLy8gTW9jayBidXNpbmVzcyBsYXllciBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vLi4vc3JjL2J1c2luZXNzLWxheWVyJywgKCkgPT4gKHtcbiAgdXNlVHJ5b25NdXRhdGlvbjogamVzdC5mbigoKSA9PiAoe1xuICAgIG11dGF0ZTogamVzdC5mbigpLFxuICAgIG11dGF0ZUFzeW5jOiBqZXN0LmZuKCksXG4gICAgZGF0YTogdW5kZWZpbmVkLFxuICAgIGVycm9yOiBudWxsLFxuICAgIGlzRXJyb3I6IGZhbHNlLFxuICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICByZXNldDogamVzdC5mbigpLFxuICB9KSksXG4gIHVzZUltYWdlUHJvY2Vzc2luZzogamVzdC5mbigoKSA9PiAoe1xuICAgIHByb2Nlc3NJbWFnZTogamVzdC5mbigpLFxuICAgIGlzUHJvY2Vzc2luZzogZmFsc2UsXG4gICAgZXJyb3I6IG51bGwsXG4gIH0pKSxcbiAgcHJvY2Vzc0ltYWdlRm9yVHJ5b246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgcHJvY2Vzc2VkSW1hZ2U6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZCcsXG4gICAgb3JpZ2luYWxTaXplOiAxMDAwLFxuICAgIHByb2Nlc3NlZFNpemU6IDUwMCxcbiAgICBjb21wcmVzc2lvblJhdGlvOiAwLjUsXG4gICAgcHJvY2Vzc2luZ1RpbWU6IDEwMCxcbiAgfSksXG4gIHJlc2l6ZUltYWdlVG8xMDI0eDE1MzY6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxyZXNpemVkJyksXG59KSk7XG5cbi8vIE1vY2sgdXRpbGl0eSBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzL2ltYWdlJywgKCkgPT4gKHtcbiAgZmlsZVRvQmFzZTY0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsZmlsZS1jb252ZXJ0ZWQnKSxcbiAgY29tcHJlc3NCYXNlNjQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxjb21wcmVzc2VkJyksXG4gIENvbXByZXNzaW9uRmFpbGVkRXJyb3I6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICBlcnJvci5uYW1lID0gJ0NvbXByZXNzaW9uRmFpbGVkRXJyb3InO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfSksXG59KSk7XG5cbi8vIE1vY2sgZXJyb3IgdXRpbGl0aWVzXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9saWIvZXJyb3JUb01lc3NhZ2UnLCAoKSA9PiAoe1xuICBlcnJvclRvTWVzc2FnZTogamVzdC5mbigoZXJyb3IpID0+IGVycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJyksXG59KSk7XG5cbi8vIFNldHVwIHRlc3QgZW52aXJvbm1lbnRcbnNldHVwVGVzdEVudmlyb25tZW50KCk7XG5cbi8vIFNldHVwIEFQSSBtb2NraW5nIGF0IHRoZSB0b3AgbGV2ZWxcbk1vY2tBUElVdGlscy5zZXR1cFNlcnZlcigpO1xuXG5kZXNjcmliZSgndXNlVHJ5b25Xb3JrZmxvdycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gTW9ja0FQSVV0aWxzLnNldHVwU2VydmVyKCk7IC8vIE1vdmVkIHRvIHRvcCBsZXZlbFxuICB9KTtcblxuICBkZXNjcmliZSgnSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggY29ycmVjdCBkZWZhdWx0IHN0YXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gdXNlVHJ5b25Xb3JrZmxvdygpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQ2FwdHVyaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sZWZ0Q2FyZEltYWdlKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnJpZ2h0Q2FyZEltYWdlKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNob3dQb2xhcm9pZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckltYWdlRmlsZSkudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5hcHBhcmVsSW1hZ2VGaWxlKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmdlbmVyYXRlZEltYWdlKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lmhhc0Vycm9yKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wcm9ncmVzcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC53b3JrZmxvd1N0YXRlKS50b0JlKCdpZGxlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgYWxsIHJlcXVpcmVkIHdvcmtmbG93IGZ1bmN0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQuY2FuR2VuZXJhdGUpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbikudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQucmV0cnlHZW5lcmF0aW9uKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5yZXNldFdvcmtmbG93KS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5jbG9zZVBvbGFyb2lkKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5jbGVhckVycm9yKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC5oYW5kbGVVc2VyRmlsZVVwbG9hZCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmhhbmRsZUxlZnRDYXJkSW1hZ2VVcGxvYWQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmhhbmRsZVJpZ2h0Q2FyZEltYWdlVXBsb2FkKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlsZSBVcGxvYWQgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdXNlciBmaWxlIHVwbG9hZCBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgdGVzdFV0aWxzIH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCx1c2VyLWltYWdlLWRhdGEnKTtcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlVXNlckZpbGVVcGxvYWQobW9ja0ZpbGVzLnVzZXJJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VySW1hZ2VGaWxlKS50b0JlKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhcHBhcmVsIGZpbGUgdXBsb2FkIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCB0ZXN0VXRpbHMgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gdXNlVHJ5b25Xb3JrZmxvdygpKTtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFdvcmtmbG93VGVzdFV0aWxzLmNyZWF0ZU1vY2tGaWxlcygpO1xuXG4gICAgICB0ZXN0VXRpbHMubW9ja0ZpbGVSZWFkKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGFwcGFyZWwtaW1hZ2UtZGF0YScpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBcHBhcmVsRmlsZVVwbG9hZChtb2NrRmlsZXMuYXBwYXJlbEltYWdlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmFwcGFyZWxJbWFnZUZpbGUpLnRvQmUobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxlZnQgY2FyZCBpbWFnZSB1cGxvYWQgd2l0aCBwcm9jZXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscyB9ID0gcmVuZGVyQnJpZGdlSG9vaygoKSA9PiB1c2VUcnlvbldvcmtmbG93KCkpO1xuICAgICAgY29uc3QgbW9ja0ltYWdlVXJsID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsbGVmdC1jYXJkLWltYWdlJztcblxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtbGVmdC1pbWFnZScpO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5oYW5kbGVMZWZ0Q2FyZEltYWdlVXBsb2FkKG1vY2tJbWFnZVVybCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sZWZ0Q2FyZEltYWdlKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJpZ2h0IGNhcmQgaW1hZ2UgdXBsb2FkIHdpdGggcHJvY2Vzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCB0ZXN0VXRpbHMgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gdXNlVHJ5b25Xb3JrZmxvdygpKTtcbiAgICAgIGNvbnN0IG1vY2tJbWFnZVVybCA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHJpZ2h0LWNhcmQtaW1hZ2UnO1xuXG4gICAgICB0ZXN0VXRpbHMubW9ja0ZpbGVSZWFkKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZC1yaWdodC1pbWFnZScpO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5oYW5kbGVSaWdodENhcmRJbWFnZVVwbG9hZChtb2NrSW1hZ2VVcmwpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucmlnaHRDYXJkSW1hZ2UpLnRvQmVUcnV0aHkoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSB1cGxvYWQgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgdGVzdFV0aWxzIH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZEVycm9yKCdGaWxlIHByb2Nlc3NpbmcgZmFpbGVkJyk7XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZVVzZXJGaWxlVXBsb2FkKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgZXJyb3Igd2l0aG91dCBjcmFzaGluZ1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VySW1hZ2VGaWxlKS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHZW5lcmF0aW9uIExvZ2ljJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29ycmVjdGx5IGRldGVybWluZSB3aGVuIGdlbmVyYXRpb24gY2FuIHN0YXJ0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscyB9ID0gcmVuZGVyQnJpZGdlSG9vaygoKSA9PiB1c2VUcnlvbldvcmtmbG93KCkpO1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gV29ya2Zsb3dUZXN0VXRpbHMuY3JlYXRlTW9ja0ZpbGVzKCk7XG5cbiAgICAgIC8vIEluaXRpYWxseSBzaG91bGQgbm90IGJlIGFibGUgdG8gZ2VuZXJhdGVcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jYW5HZW5lcmF0ZSgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtaW1hZ2UnKTtcblxuICAgICAgLy8gVXBsb2FkIHVzZXIgaW1hZ2Ugb25seVxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlVXNlckZpbGVVcGxvYWQobW9ja0ZpbGVzLnVzZXJJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VySW1hZ2VGaWxlKS50b0JlKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0aWxsIHNob3VsZCBub3QgYmUgYWJsZSB0byBnZW5lcmF0ZSB3aXRoIG9ubHkgb25lIGltYWdlXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FuR2VuZXJhdGUoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIFVwbG9hZCBhcHBhcmVsIGltYWdlXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBcHBhcmVsRmlsZVVwbG9hZChtb2NrRmlsZXMuYXBwYXJlbEltYWdlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmFwcGFyZWxJbWFnZUZpbGUpLnRvQmUobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gTm93IHNob3VsZCBiZSBhYmxlIHRvIGdlbmVyYXRlXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FuR2VuZXJhdGUoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN1Y2Nlc3NmdWwgZ2VuZXJhdGlvbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCB0ZXN0VXRpbHMsIHdhaXRGb3JXb3JrZmxvdyB9ID0gcmVuZGVyQnJpZGdlSG9vaygoKSA9PiB1c2VUcnlvbldvcmtmbG93KCkpO1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gV29ya2Zsb3dUZXN0VXRpbHMuY3JlYXRlTW9ja0ZpbGVzKCk7XG5cbiAgICAgIC8vIFNldHVwIG1vY2tzXG4gICAgICB0ZXN0VXRpbHMubW9ja0ZpbGVSZWFkKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZC1pbWFnZScpO1xuICAgICAgdGVzdFV0aWxzLm1vY2tTdWNjZXNzZnVsQXBpQ2FsbCh7XG4gICAgICAgIGltZ19nZW5lcmF0ZWQ6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGdlbmVyYXRlZC1zdWNjZXNzJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFVwbG9hZCBmaWxlc1xuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlVXNlckZpbGVVcGxvYWQobW9ja0ZpbGVzLnVzZXJJbWFnZSk7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZUFwcGFyZWxGaWxlVXBsb2FkKG1vY2tGaWxlcy5hcHBhcmVsSW1hZ2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93LmNhbkdlbmVyYXRlKCkpO1xuXG4gICAgICAvLyBTdGFydCBnZW5lcmF0aW9uXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zdGFydEdlbmVyYXRpb24oKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayBnZW5lcmF0aW5nIHN0YXRlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQ2FwdHVyaW5nKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2hvd1BvbGFyb2lkKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQud29ya2Zsb3dTdGF0ZSkudG9CZSgnZ2VuZXJhdGluZycpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGNvbXBsZXRpb25cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+ICEhd29ya2Zsb3cuZ2VuZXJhdGVkSW1hZ2UpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNDYXB0dXJpbmcpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmdlbmVyYXRlZEltYWdlKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaGFzRXJyb3IpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZ2VuZXJhdGlvbiBlcnJvcnMgd2l0aCBwcm9wZXIgZXJyb3Igc3RhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgdGVzdFV0aWxzLCB3YWl0Rm9yV29ya2Zsb3cgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gdXNlVHJ5b25Xb3JrZmxvdygpKTtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFdvcmtmbG93VGVzdFV0aWxzLmNyZWF0ZU1vY2tGaWxlcygpO1xuXG4gICAgICAvLyBTZXR1cCBtb2Nrc1xuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtaW1hZ2UnKTtcbiAgICAgIHRlc3RVdGlscy5tb2NrQXBpRXJyb3IoJ0dlbmVyYXRpb24gZmFpbGVkJywgNTAwKTtcblxuICAgICAgLy8gVXBsb2FkIGZpbGVzXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVVc2VyRmlsZVVwbG9hZChtb2NrRmlsZXMudXNlckltYWdlKTtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuY2FuR2VuZXJhdGUoKSk7XG5cbiAgICAgIC8vIFN0YXJ0IGdlbmVyYXRpb24gKHdpbGwgZmFpbClcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3RhcnRHZW5lcmF0aW9uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gRXhwZWN0ZWQgdG8gZmFpbFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgZXJyb3Igc3RhdGVcbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93Lmhhc0Vycm9yKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQ2FwdHVyaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5oYXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmdlbmVyYXRlZEltYWdlKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGltZW91dCBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgdGVzdFV0aWxzLCB3YWl0Rm9yV29ya2Zsb3cgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gXG4gICAgICAgIHVzZVRyeW9uV29ya2Zsb3coeyB0aW1lb3V0TXM6IDEwMDAgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgLy8gU2V0dXAgdGltZW91dFxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtaW1hZ2UnKTtcbiAgICAgIHRlc3RVdGlscy5tb2NrQXBpVGltZW91dCgyMDAwKTsgLy8gTG9uZ2VyIHRoYW4gb3VyIHRpbWVvdXRcblxuICAgICAgLy8gVXBsb2FkIGZpbGVzXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVVc2VyRmlsZVVwbG9hZChtb2NrRmlsZXMudXNlckltYWdlKTtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuY2FuR2VuZXJhdGUoKSk7XG5cbiAgICAgIC8vIFN0YXJ0IGdlbmVyYXRpb24gKHdpbGwgdGltZW91dClcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3RhcnRHZW5lcmF0aW9uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gRXhwZWN0ZWQgdG8gdGltZW91dFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgdGltZW91dCBlcnJvciBzdGF0ZVxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuaGFzRXJyb3IpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaGFzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJldHJ5IGFmdGVyIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscywgd2FpdEZvcldvcmtmbG93IH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgLy8gU2V0dXAgaW5pdGlhbCBmYWlsdXJlXG4gICAgICB0ZXN0VXRpbHMubW9ja0ZpbGVSZWFkKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZC1pbWFnZScpO1xuICAgICAgdGVzdFV0aWxzLm1vY2tBcGlFcnJvcignSW5pdGlhbCBmYWlsdXJlJywgNTAwKTtcblxuICAgICAgLy8gVXBsb2FkIGZpbGVzIGFuZCBmYWlsIGdlbmVyYXRpb25cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZVVzZXJGaWxlVXBsb2FkKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBcHBhcmVsRmlsZVVwbG9hZChtb2NrRmlsZXMuYXBwYXJlbEltYWdlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiB3b3JrZmxvdy5jYW5HZW5lcmF0ZSgpKTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zdGFydEdlbmVyYXRpb24oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBFeHBlY3RlZCB0byBmYWlsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiB3b3JrZmxvdy5oYXNFcnJvcik7XG5cbiAgICAgIC8vIFNldHVwIHN1Y2Nlc3NmdWwgcmV0cnlcbiAgICAgIHRlc3RVdGlscy5tb2NrU3VjY2Vzc2Z1bEFwaUNhbGwoe1xuICAgICAgICBpbWdfZ2VuZXJhdGVkOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxyZXRyeS1zdWNjZXNzJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJldHJ5IGdlbmVyYXRpb25cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnJldHJ5R2VuZXJhdGlvbigpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+ICEhd29ya2Zsb3cuZ2VuZXJhdGVkSW1hZ2UpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaGFzRXJyb3IpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmdlbmVyYXRlZEltYWdlKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTdGF0ZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVzZXQgd29ya2Zsb3cgc3RhdGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscywgd2FpdEZvcldvcmtmbG93IH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgLy8gU2V0dXAgYW5kIGNvbXBsZXRlIHdvcmtmbG93XG4gICAgICB0ZXN0VXRpbHMubW9ja0ZpbGVSZWFkKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZC1pbWFnZScpO1xuICAgICAgdGVzdFV0aWxzLm1vY2tTdWNjZXNzZnVsQXBpQ2FsbCgpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVVc2VyRmlsZVVwbG9hZChtb2NrRmlsZXMudXNlckltYWdlKTtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuY2FuR2VuZXJhdGUoKSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+ICEhd29ya2Zsb3cuZ2VuZXJhdGVkSW1hZ2UpO1xuXG4gICAgICAvLyBSZXNldCB3b3JrZmxvd1xuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQucmVzZXRXb3JrZmxvdygpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckltYWdlRmlsZSkudG9CZU51bGwoKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmFwcGFyZWxJbWFnZUZpbGUpLnRvQmVOdWxsKCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5nZW5lcmF0ZWRJbWFnZSkudG9CZU51bGwoKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmxlZnRDYXJkSW1hZ2UpLnRvQmVOdWxsKCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yaWdodENhcmRJbWFnZSkudG9CZU51bGwoKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNob3dQb2xhcm9pZCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5oYXNFcnJvcikudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0NhcHR1cmluZykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC53b3JrZmxvd1N0YXRlKS50b0JlKCdpZGxlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgcG9sYXJvaWQgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscywgd2FpdEZvcldvcmtmbG93IH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgLy8gU2V0dXAgYW5kIGNvbXBsZXRlIHdvcmtmbG93XG4gICAgICB0ZXN0VXRpbHMubW9ja0ZpbGVSZWFkKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZC1pbWFnZScpO1xuICAgICAgdGVzdFV0aWxzLm1vY2tTdWNjZXNzZnVsQXBpQ2FsbCgpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVVc2VyRmlsZVVwbG9hZChtb2NrRmlsZXMudXNlckltYWdlKTtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuY2FuR2VuZXJhdGUoKSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93LnNob3dQb2xhcm9pZCk7XG5cbiAgICAgIC8vIENsb3NlIHBvbGFyb2lkXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5jbG9zZVBvbGFyb2lkKCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zaG93UG9sYXJvaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGVycm9yIHN0YXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscywgd2FpdEZvcldvcmtmbG93IH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgLy8gU2V0dXAgZXJyb3Igc2NlbmFyaW9cbiAgICAgIHRlc3RVdGlscy5tb2NrRmlsZVJlYWQoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlJyk7XG4gICAgICB0ZXN0VXRpbHMubW9ja0FwaUVycm9yKCdUZXN0IGVycm9yJywgNTAwKTtcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlVXNlckZpbGVVcGxvYWQobW9ja0ZpbGVzLnVzZXJJbWFnZSk7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZUFwcGFyZWxGaWxlVXBsb2FkKG1vY2tGaWxlcy5hcHBhcmVsSW1hZ2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93LmNhbkdlbmVyYXRlKCkpO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEV4cGVjdGVkIHRvIGZhaWxcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93Lmhhc0Vycm9yKTtcblxuICAgICAgLy8gQ2xlYXIgZXJyb3JcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmNsZWFyRXJyb3IoKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lmhhc0Vycm9yKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVzcGVjdCBjdXN0b20gdGltZW91dCBjb25maWd1cmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscyB9ID0gcmVuZGVyQnJpZGdlSG9vaygoKSA9PiBcbiAgICAgICAgdXNlVHJ5b25Xb3JrZmxvdyh7IHRpbWVvdXRNczogNTAwIH0pXG4gICAgICApO1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gV29ya2Zsb3dUZXN0VXRpbHMuY3JlYXRlTW9ja0ZpbGVzKCk7XG5cbiAgICAgIHRlc3RVdGlscy5tb2NrRmlsZVJlYWQoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlJyk7XG4gICAgICB0ZXN0VXRpbHMubW9ja0FwaVRpbWVvdXQoMTAwMCk7IC8vIExvbmdlciB0aGFuIHRpbWVvdXRcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlVXNlckZpbGVVcGxvYWQobW9ja0ZpbGVzLnVzZXJJbWFnZSk7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZUFwcGFyZWxGaWxlVXBsb2FkKG1vY2tGaWxlcy5hcHBhcmVsSW1hZ2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FuR2VuZXJhdGUoKSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEV4cGVjdGVkIHRvIHRpbWVvdXRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgLy8gU2hvdWxkIHRpbWVvdXQgYXJvdW5kIDUwMG1zLCBub3QgMTAwMG1zXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig4MDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXNwZWN0IGNvbXByZXNzaW9uIGxpbWl0IGNvbmZpZ3VyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgdGVzdFV0aWxzIH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IFxuICAgICAgICB1c2VUcnlvbldvcmtmbG93KHsgY29tcHJlc3Npb25MaW1pdEtCOiAxMDAgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtaW1hZ2UnKTtcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlVXNlckZpbGVVcGxvYWQobW9ja0ZpbGVzLnVzZXJJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ29uZmlndXJhdGlvbiBpcyBhcHBsaWVkIGludGVybmFsbHksIHRlc3Qgc2hvdWxkIG5vdCB0aHJvdyBlcnJvcnNcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlckltYWdlRmlsZSkudG9CZShtb2NrRmlsZXMudXNlckltYWdlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGVidWcgbW9kZSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxDb25zb2xlTG9nID0gY29uc29sZS5sb2c7XG4gICAgICBjb25zb2xlLmxvZyA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gXG4gICAgICAgIHVzZVRyeW9uV29ya2Zsb3coeyBkZWJ1ZzogdHJ1ZSB9KVxuICAgICAgKTtcblxuICAgICAgLy8gRGVidWcgY29uZmlndXJhdGlvbiBhcHBsaWVkXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nID0gb3JpZ2luYWxDb25zb2xlTG9nO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvZ3Jlc3MgVHJhY2tpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0cmFjayBwcm9ncmVzcyBkdXJpbmcgZ2VuZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCB0ZXN0VXRpbHMsIHdhaXRGb3JXb3JrZmxvdyB9ID0gcmVuZGVyQnJpZGdlSG9vaygoKSA9PiB1c2VUcnlvbldvcmtmbG93KCkpO1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gV29ya2Zsb3dUZXN0VXRpbHMuY3JlYXRlTW9ja0ZpbGVzKCk7XG5cbiAgICAgIHRlc3RVdGlscy5tb2NrRmlsZVJlYWQoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlJyk7XG4gICAgICB0ZXN0VXRpbHMubW9ja1N1Y2Nlc3NmdWxBcGlDYWxsKHVuZGVmaW5lZCwgNTAwKTsgLy8gQWRkIGRlbGF5XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZVVzZXJGaWxlVXBsb2FkKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBcHBhcmVsRmlsZVVwbG9hZChtb2NrRmlsZXMuYXBwYXJlbEltYWdlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiB3b3JrZmxvdy5jYW5HZW5lcmF0ZSgpKTtcblxuICAgICAgY29uc3QgaW5pdGlhbFByb2dyZXNzID0gcmVzdWx0LmN1cnJlbnQucHJvZ3Jlc3M7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb2dyZXNzIHNob3VsZCBiZSB0cmFja2VkIGR1cmluZyBnZW5lcmF0aW9uXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiAhIXdvcmtmbG93LmdlbmVyYXRlZEltYWdlKTtcblxuICAgICAgZXhwZWN0KGluaXRpYWxQcm9ncmVzcykudG9CZSgwKTtcbiAgICAgIC8vIEZpbmFsIHByb2dyZXNzIHNob3VsZCBiZSBoaWdoZXIgdGhhbiBpbml0aWFsXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSB3b3JrZmxvdyBzdGF0ZSB0aHJvdWdob3V0IHByb2Nlc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgdGVzdFV0aWxzLCB3YWl0Rm9yV29ya2Zsb3cgfSA9IHJlbmRlckJyaWRnZUhvb2soKCkgPT4gdXNlVHJ5b25Xb3JrZmxvdygpKTtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFdvcmtmbG93VGVzdFV0aWxzLmNyZWF0ZU1vY2tGaWxlcygpO1xuXG4gICAgICBjb25zdCBzdGF0ZUNoYW5nZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIHRlc3RVdGlscy5tb2NrRmlsZVJlYWQoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlJyk7XG4gICAgICB0ZXN0VXRpbHMubW9ja1N1Y2Nlc3NmdWxBcGlDYWxsKCk7XG5cbiAgICAgIC8vIFRyYWNrIGluaXRpYWwgc3RhdGVcbiAgICAgIHN0YXRlQ2hhbmdlcy5wdXNoKHJlc3VsdC5jdXJyZW50LndvcmtmbG93U3RhdGUpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVVc2VyRmlsZVVwbG9hZChtb2NrRmlsZXMudXNlckltYWdlKTtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuY2FuR2VuZXJhdGUoKSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRyYWNrIGdlbmVyYXRpbmcgc3RhdGVcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LmN1cnJlbnQud29ya2Zsb3dTdGF0ZSA9PT0gJ2dlbmVyYXRpbmcnKSB7XG4gICAgICAgICAgc3RhdGVDaGFuZ2VzLnB1c2gocmVzdWx0LmN1cnJlbnQud29ya2Zsb3dTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiAhIXdvcmtmbG93LmdlbmVyYXRlZEltYWdlKTtcblxuICAgICAgLy8gVHJhY2sgZmluYWwgc3RhdGVcbiAgICAgIHN0YXRlQ2hhbmdlcy5wdXNoKHJlc3VsdC5jdXJyZW50LndvcmtmbG93U3RhdGUpO1xuXG4gICAgICBleHBlY3Qoc3RhdGVDaGFuZ2VzWzBdKS50b0JlKCdpZGxlJyk7XG4gICAgICBleHBlY3Qoc3RhdGVDaGFuZ2VzKS50b0NvbnRhaW4oJ2dlbmVyYXRpbmcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIFJlY292ZXJ5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gc3RhdGUgY29uc2lzdGVuY3kgYWZ0ZXIgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIHRlc3RVdGlscywgd2FpdEZvcldvcmtmbG93IH0gPSByZW5kZXJCcmlkZ2VIb29rKCgpID0+IHVzZVRyeW9uV29ya2Zsb3coKSk7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBXb3JrZmxvd1Rlc3RVdGlscy5jcmVhdGVNb2NrRmlsZXMoKTtcblxuICAgICAgdGVzdFV0aWxzLm1vY2tGaWxlUmVhZCgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxwcm9jZXNzZWQtaW1hZ2UnKTtcbiAgICAgIHRlc3RVdGlscy5tb2NrQXBpRXJyb3IoJ05ldHdvcmsgZXJyb3InLCA1MDApO1xuXG4gICAgICAvLyBVcGxvYWQgZmlsZXNcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZVVzZXJGaWxlVXBsb2FkKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBcHBhcmVsRmlsZVVwbG9hZChtb2NrRmlsZXMuYXBwYXJlbEltYWdlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiB3b3JrZmxvdy5jYW5HZW5lcmF0ZSgpKTtcblxuICAgICAgLy8gRmFpbCBnZW5lcmF0aW9uXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0R2VuZXJhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEV4cGVjdGVkIHRvIGZhaWxcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93Lmhhc0Vycm9yKTtcblxuICAgICAgLy8gRmlsZXMgc2hvdWxkIHN0aWxsIGJlIHByZXNlbnQgYWZ0ZXIgZXJyb3JcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VySW1hZ2VGaWxlKS50b0JlKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmFwcGFyZWxJbWFnZUZpbGUpLnRvQmUobW9ja0ZpbGVzLmFwcGFyZWxJbWFnZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FuR2VuZXJhdGUoKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5oYXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGNvbnNlY3V0aXZlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCB0ZXN0VXRpbHMsIHdhaXRGb3JXb3JrZmxvdyB9ID0gcmVuZGVyQnJpZGdlSG9vaygoKSA9PiB1c2VUcnlvbldvcmtmbG93KCkpO1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gV29ya2Zsb3dUZXN0VXRpbHMuY3JlYXRlTW9ja0ZpbGVzKCk7XG5cbiAgICAgIHRlc3RVdGlscy5tb2NrRmlsZVJlYWQoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlJyk7XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmhhbmRsZVVzZXJGaWxlVXBsb2FkKG1vY2tGaWxlcy51c2VySW1hZ2UpO1xuICAgICAgICByZXN1bHQuY3VycmVudC5oYW5kbGVBcHBhcmVsRmlsZVVwbG9hZChtb2NrRmlsZXMuYXBwYXJlbEltYWdlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yV29ya2Zsb3coKHdvcmtmbG93KSA9PiB3b3JrZmxvdy5jYW5HZW5lcmF0ZSgpKTtcblxuICAgICAgLy8gRmlyc3QgZXJyb3JcbiAgICAgIHRlc3RVdGlscy5tb2NrQXBpRXJyb3IoJ0ZpcnN0IGVycm9yJywgNTAwKTtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3RhcnRHZW5lcmF0aW9uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gRXhwZWN0ZWQgdG8gZmFpbFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcldvcmtmbG93KCh3b3JrZmxvdykgPT4gd29ya2Zsb3cuaGFzRXJyb3IpO1xuXG4gICAgICAvLyBTZWNvbmQgZXJyb3Igb24gcmV0cnlcbiAgICAgIHRlc3RVdGlscy5tb2NrQXBpRXJyb3IoJ1NlY29uZCBlcnJvcicsIDUwMCk7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnJldHJ5R2VuZXJhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEV4cGVjdGVkIHRvIGZhaWwgYWdhaW5cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3JXb3JrZmxvdygod29ya2Zsb3cpID0+IHdvcmtmbG93Lmhhc0Vycm9yKTtcblxuICAgICAgLy8gU2hvdWxkIHN0aWxsIGJlIGluIGVycm9yIHN0YXRlIGJ1dCBmdW5jdGlvbmFsXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaGFzRXJyb3IpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FuR2VuZXJhdGUoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VUcnlvbk11dGF0aW9uIiwiZm4iLCJtdXRhdGUiLCJtdXRhdGVBc3luYyIsImRhdGEiLCJ1bmRlZmluZWQiLCJlcnJvciIsImlzRXJyb3IiLCJpc1N1Y2Nlc3MiLCJpc0xvYWRpbmciLCJyZXNldCIsInVzZUltYWdlUHJvY2Vzc2luZyIsInByb2Nlc3NJbWFnZSIsImlzUHJvY2Vzc2luZyIsInByb2Nlc3NJbWFnZUZvclRyeW9uIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJwcm9jZXNzZWRJbWFnZSIsIm9yaWdpbmFsU2l6ZSIsInByb2Nlc3NlZFNpemUiLCJjb21wcmVzc2lvblJhdGlvIiwicHJvY2Vzc2luZ1RpbWUiLCJyZXNpemVJbWFnZVRvMTAyNHgxNTM2IiwiZmlsZVRvQmFzZTY0IiwiY29tcHJlc3NCYXNlNjQiLCJDb21wcmVzc2lvbkZhaWxlZEVycm9yIiwibW9ja0ltcGxlbWVudGF0aW9uIiwibWVzc2FnZSIsIkVycm9yIiwibmFtZSIsImVycm9yVG9NZXNzYWdlIiwic2V0dXBUZXN0RW52aXJvbm1lbnQiLCJNb2NrQVBJVXRpbHMiLCJzZXR1cFNlcnZlciIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsIml0IiwicmVzdWx0IiwicmVuZGVyQnJpZGdlSG9vayIsInVzZVRyeW9uV29ya2Zsb3ciLCJleHBlY3QiLCJjdXJyZW50IiwiaXNDYXB0dXJpbmciLCJ0b0JlIiwibGVmdENhcmRJbWFnZSIsInRvQmVOdWxsIiwicmlnaHRDYXJkSW1hZ2UiLCJzaG93UG9sYXJvaWQiLCJ1c2VySW1hZ2VGaWxlIiwiYXBwYXJlbEltYWdlRmlsZSIsImdlbmVyYXRlZEltYWdlIiwiaGFzRXJyb3IiLCJwcm9ncmVzcyIsIndvcmtmbG93U3RhdGUiLCJjYW5HZW5lcmF0ZSIsInN0YXJ0R2VuZXJhdGlvbiIsInJldHJ5R2VuZXJhdGlvbiIsInJlc2V0V29ya2Zsb3ciLCJjbG9zZVBvbGFyb2lkIiwiY2xlYXJFcnJvciIsImhhbmRsZVVzZXJGaWxlVXBsb2FkIiwiaGFuZGxlQXBwYXJlbEZpbGVVcGxvYWQiLCJoYW5kbGVMZWZ0Q2FyZEltYWdlVXBsb2FkIiwiaGFuZGxlUmlnaHRDYXJkSW1hZ2VVcGxvYWQiLCJ0ZXN0VXRpbHMiLCJtb2NrRmlsZXMiLCJXb3JrZmxvd1Rlc3RVdGlscyIsImNyZWF0ZU1vY2tGaWxlcyIsIm1vY2tGaWxlUmVhZCIsImFjdCIsInVzZXJJbWFnZSIsIndhaXRGb3IiLCJhcHBhcmVsSW1hZ2UiLCJtb2NrSW1hZ2VVcmwiLCJ0b0JlVHJ1dGh5IiwibW9ja0ZpbGVSZWFkRXJyb3IiLCJ3YWl0Rm9yV29ya2Zsb3ciLCJtb2NrU3VjY2Vzc2Z1bEFwaUNhbGwiLCJpbWdfZ2VuZXJhdGVkIiwid29ya2Zsb3ciLCJtb2NrQXBpRXJyb3IiLCJ0aW1lb3V0TXMiLCJtb2NrQXBpVGltZW91dCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJkdXJhdGlvbiIsInRvQmVMZXNzVGhhbiIsImNvbXByZXNzaW9uTGltaXRLQiIsIm9yaWdpbmFsQ29uc29sZUxvZyIsImNvbnNvbGUiLCJsb2ciLCJkZWJ1ZyIsInRvQmVEZWZpbmVkIiwiaW5pdGlhbFByb2dyZXNzIiwic3RhdGVDaGFuZ2VzIiwicHVzaCIsInRvQ29udGFpbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0NBRUM7QUFVRCxtQ0FBbUM7QUFDbkNBLEtBQUtDLElBQUksQ0FBQyw0QkFBNEIsSUFBTyxDQUFBO1FBQzNDQyxrQkFBa0JGLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQy9CQyxRQUFRSixLQUFLRyxFQUFFO2dCQUNmRSxhQUFhTCxLQUFLRyxFQUFFO2dCQUNwQkcsTUFBTUM7Z0JBQ05DLE9BQU87Z0JBQ1BDLFNBQVM7Z0JBQ1RDLFdBQVc7Z0JBQ1hDLFdBQVc7Z0JBQ1hDLE9BQU9aLEtBQUtHLEVBQUU7WUFDaEIsQ0FBQTtRQUNBVSxvQkFBb0JiLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQ2pDVyxjQUFjZCxLQUFLRyxFQUFFO2dCQUNyQlksY0FBYztnQkFDZFAsT0FBTztZQUNULENBQUE7UUFDQVEsc0JBQXNCaEIsS0FBS0csRUFBRSxHQUFHYyxpQkFBaUIs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
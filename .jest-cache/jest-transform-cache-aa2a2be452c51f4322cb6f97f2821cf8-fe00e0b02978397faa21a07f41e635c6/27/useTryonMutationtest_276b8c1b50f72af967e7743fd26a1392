0a401f4f5c8d1fe852550e797fac20c7
/**
 * @jest-environment jsdom
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactquery = require("@tanstack/react-query");
const _useTryonMutation = require("../../../src/business-layer/mutations/useTryonMutation");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch globally
const mockFetch = jest.fn();
global.fetch = mockFetch;
// Mock abort controller for timeout tests
class MockAbortController {
    constructor(){
        this.signal = {
            aborted: false
        };
        this.abort = jest.fn(()=>{
            this.signal.aborted = true;
        });
    }
}
global.AbortController = MockAbortController;
describe('useTryonMutation', ()=>{
    let queryClient;
    beforeEach(()=>{
        queryClient = new _reactquery.QueryClient({
            defaultOptions: {
                queries: {
                    retry: false,
                    gcTime: 0
                },
                mutations: {
                    retry: false
                }
            }
        });
        mockFetch.mockClear();
        jest.clearAllTimers();
        jest.useFakeTimers();
    });
    afterEach(()=>{
        jest.useRealTimers();
        queryClient.clear();
    });
    const renderWithProvider = (children)=>{
        return (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
            client: queryClient,
            children: children
        }));
    };
    const mockVariables = {
        modelImage: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD',
        apparelImages: [
            'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD'
        ]
    };
    const mockSuccessResponse = {
        img_generated: 'data:image/jpeg;base64,generatedImageBase64Data',
        metadata: {
            processingTime: 5000,
            modelVersion: 'v1.0',
            timestamp: '2023-01-01T00:00:00Z'
        }
    };
    describe('Basic Hook Functionality', ()=>{
        it('should initialize with correct default state', ()=>{
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "isLoading",
                            children: mutation.isLoading.toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "isSuccess",
                            children: mutation.isSuccess.toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "isError",
                            children: mutation.isError.toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "isIdle",
                            children: mutation.isIdle.toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasData",
                            children: Boolean(mutation.data).toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasError",
                            children: Boolean(mutation.error).toString()
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            expect(_react1.screen.getByTestId('status')).toHaveTextContent('idle');
            expect(_react1.screen.getByTestId('isLoading')).toHaveTextContent('false');
            expect(_react1.screen.getByTestId('isSuccess')).toHaveTextContent('false');
            expect(_react1.screen.getByTestId('isError')).toHaveTextContent('false');
            expect(_react1.screen.getByTestId('isIdle')).toHaveTextContent('true');
            expect(_react1.screen.getByTestId('hasData')).toHaveTextContent('false');
            expect(_react1.screen.getByTestId('hasError')).toHaveTextContent('false');
        });
        it('should provide mutate and mutateAsync functions', ()=>{
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasMutate",
                            children: typeof mutation.mutate === 'function' ? 'function' : 'not-function'
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasMutateAsync",
                            children: typeof mutation.mutateAsync === 'function' ? 'function' : 'not-function'
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasReset",
                            children: typeof mutation.reset === 'function' ? 'function' : 'not-function'
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            expect(_react1.screen.getByTestId('hasMutate')).toHaveTextContent('function');
            expect(_react1.screen.getByTestId('hasMutateAsync')).toHaveTextContent('function');
            expect(_react1.screen.getByTestId('hasReset')).toHaveTextContent('function');
        });
    });
    describe('Successful API Calls', ()=>{
        it('should handle successful API response', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "data",
                            children: mutation.data ? JSON.stringify(mutation.data) : 'null'
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            const dataContent = _react1.screen.getByTestId('data').textContent;
            const parsedData = JSON.parse(dataContent);
            expect(parsedData.img_generated).toBe(mockSuccessResponse.img_generated);
            expect(parsedData.metadata).toEqual(mockSuccessResponse.metadata);
        });
        it('should make correct API request with proper payload', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "test",
                    children: "test"
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledTimes(1);
            });
            expect(mockFetch).toHaveBeenCalledWith('/api/tryon', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    modelImage: mockVariables.modelImage,
                    apparelImages: mockVariables.apparelImages
                })
            });
        });
        it('should include metadata in request when provided', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const variablesWithMetadata = {
                ...mockVariables,
                options: {
                    metadata: {
                        custom: 'data',
                        userId: '123'
                    }
                }
            };
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                _react.default.useEffect(()=>{
                    mutation.mutate(variablesWithMetadata);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "test",
                    children: "test"
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledTimes(1);
            });
            const [, requestInit] = mockFetch.mock.calls[0];
            const requestBody = JSON.parse(requestInit.body);
            expect(requestBody.metadata).toEqual({
                custom: 'data',
                userId: '123'
            });
        });
    });
    describe('Error Handling', ()=>{
        it('should handle HTTP error responses', async ()=>{
            const errorResponse = {
                error: 'Validation failed',
                details: [
                    {
                        field: 'modelImage',
                        message: 'Invalid format'
                    }
                ],
                code: 'VALIDATION_ERROR'
            };
            mockFetch.mockResolvedValueOnce({
                ok: false,
                status: 400,
                statusText: 'Bad Request',
                json: async ()=>errorResponse
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "error",
                            children: mutation.error ? JSON.stringify(mutation.error) : 'null'
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 3000
            });
            const errorContent = _react1.screen.getByTestId('error').textContent;
            const parsedError = JSON.parse(errorContent);
            expect(parsedError.error).toBe('Validation failed');
            expect(parsedError.details).toEqual(errorResponse.details);
            expect(parsedError.status).toBe(400);
            expect(parsedError.retryable).toBe(false);
        });
        it('should handle network errors', async ()=>{
            mockFetch.mockRejectedValueOnce(new Error('Network error'));
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasError",
                            children: mutation.isError.toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "errorType",
                            children: mutation.error ? typeof mutation.error : 'null'
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "errorMessage",
                            children: mutation.error instanceof Error ? mutation.error.message : 'not-error'
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 3000
            });
            expect(_react1.screen.getByTestId('hasError')).toHaveTextContent('true');
            expect(_react1.screen.getByTestId('errorMessage')).toHaveTextContent('Network error');
        });
        it('should handle invalid API response format', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        invalid: 'response'
                    })
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasError",
                            children: mutation.isError.toString()
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "errorMessage",
                            children: mutation.error instanceof Error ? mutation.error.message : 'not-error'
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 3000
            });
            expect(_react1.screen.getByTestId('hasError')).toHaveTextContent('true');
            expect(_react1.screen.getByTestId('errorMessage')).toHaveTextContent('Invalid API response: missing img_generated field');
        });
    });
    describe('Retry Logic', ()=>{
        it('should retry on retryable errors with exponential backoff', async ()=>{
            // First call fails with 500 error (retryable)
            mockFetch.mockResolvedValueOnce({
                ok: false,
                status: 500,
                statusText: 'Internal Server Error',
                json: async ()=>({
                        error: 'Server error'
                    })
            }).mockResolvedValueOnce({
                ok: false,
                status: 500,
                statusText: 'Internal Server Error',
                json: async ()=>({
                        error: 'Server error'
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: true,
                    maxRetries: 3,
                    initialRetryDelay: 100
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": "status",
                        children: mutation.status
                    })
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            // Fast-forward through retry delays
            await (0, _react1.act)(async ()=>{
                await jest.advanceTimersByTimeAsync(1000);
            });
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            expect(mockFetch).toHaveBeenCalledTimes(3);
        });
        it('should not retry on non-retryable errors', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: false,
                status: 400,
                statusText: 'Bad Request',
                json: async ()=>({
                        error: 'Validation error'
                    })
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: true,
                    maxRetries: 3
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": "status",
                        children: mutation.status
                    })
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            });
            expect(mockFetch).toHaveBeenCalledTimes(1);
        });
        it('should respect maxRetries configuration', async ()=>{
            mockFetch.mockResolvedValue({
                ok: false,
                status: 500,
                statusText: 'Internal Server Error',
                json: async ()=>({
                        error: 'Server error'
                    })
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: true,
                    maxRetries: 2,
                    initialRetryDelay: 50
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": "status",
                        children: mutation.status
                    })
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.act)(async ()=>{
                await jest.advanceTimersByTimeAsync(1000);
            });
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            });
            expect(mockFetch).toHaveBeenCalledTimes(3); // 1 initial + 2 retries
        });
    });
    describe('Timeout Handling', ()=>{
        it('should handle request timeout', async ()=>{
            const timeoutPromise = new Promise((_, reject)=>{
                setTimeout(()=>reject(new Error('Request timeout')), 1000);
            });
            mockFetch.mockImplementationOnce(()=>timeoutPromise);
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate({
                        ...mockVariables,
                        options: {
                            timeout: 500
                        }
                    });
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": "status",
                        children: mutation.status
                    })
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.act)(async ()=>{
                await jest.advanceTimersByTimeAsync(600);
            });
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 3000
            });
        });
    });
    describe('Lifecycle Callbacks', ()=>{
        it('should call onSuccess callback', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const onSuccess = jest.fn();
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    onSuccess
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            expect(onSuccess).toHaveBeenCalledWith(mockSuccessResponse, mockVariables, expect.objectContaining({
                variables: mockVariables,
                startTime: expect.any(Number),
                retryCount: 0
            }));
        });
        it('should call onError callback', async ()=>{
            mockFetch.mockRejectedValueOnce(new Error('Network error'));
            const onError = jest.fn();
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    onError,
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 3000
            });
            expect(onError).toHaveBeenCalledWith(expect.objectContaining({
                error: expect.stringContaining('Network connection'),
                retryable: true,
                category: 'network',
                code: 'NETWORK_ERROR',
                severity: 'medium',
                recoveryActions: expect.arrayContaining([
                    expect.objectContaining({
                        type: 'check_connection'
                    })
                ])
            }), mockVariables, expect.objectContaining({
                variables: mockVariables
            }));
        });
        it('should call onMutate callback and use returned context', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const onMutate = jest.fn().mockReturnValue({
                customData: 'test'
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    onMutate
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            expect(onMutate).toHaveBeenCalledWith(mockVariables);
        });
        it('should call onSettled callback on both success and error', async ()=>{
            const onSettled = jest.fn();
            // Test success case
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    onSettled
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            const { unmount } = renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            expect(onSettled).toHaveBeenCalledWith(mockSuccessResponse, null, mockVariables, expect.objectContaining({
                variables: mockVariables
            }));
            unmount();
            onSettled.mockClear();
            // Test error case
            mockFetch.mockRejectedValueOnce(new Error('Test error'));
            const TestComponentError = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    onSettled,
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponentError, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 5000
            });
            expect(onSettled).toHaveBeenCalledWith(undefined, expect.objectContaining({
                error: expect.stringContaining('unexpected error'),
                category: 'unknown',
                code: 'UNKNOWN_ERROR',
                severity: 'high',
                retryable: true
            }), mockVariables, expect.objectContaining({
                variables: mockVariables
            }));
        });
    });
    describe('Reset Functionality', ()=>{
        it('should reset mutation state', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)();
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                const handleReset = ()=>{
                    mutation.reset();
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: handleReset,
                            "data-testid": "reset-button",
                            children: "Reset"
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            }, {
                timeout: 5000
            });
            (0, _react1.act)(()=>{
                _react1.screen.getByTestId('reset-button').click();
            });
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('idle');
            });
        });
    });
    describe('Configuration Options', ()=>{
        it('should disable retry when enableRetry is false', async ()=>{
            mockFetch.mockResolvedValue({
                ok: false,
                status: 500,
                statusText: 'Internal Server Error',
                json: async ()=>({
                        error: 'Server error'
                    })
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mockVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            });
            expect(mockFetch).toHaveBeenCalledTimes(1);
        });
    });
    describe('Image Processing Integration', ()=>{
        // Mock File constructor
        const createMockFile = (name, type, content = 'test-image-data')=>{
            const blob = new Blob([
                content
            ], {
                type
            });
            return new File([
                blob
            ], name, {
                type
            });
        };
        // Mock Canvas and Image for image processing
        const mockCanvas = {
            width: 0,
            height: 0,
            getContext: jest.fn(()=>({
                    drawImage: jest.fn(),
                    imageSmoothingEnabled: true,
                    imageSmoothingQuality: 'high',
                    fillStyle: '',
                    fillRect: jest.fn(),
                    getImageData: jest.fn(()=>({
                            data: new Uint8ClampedArray(4 * 100 * 100),
                            width: 100,
                            height: 100
                        })),
                    putImageData: jest.fn()
                })),
            toDataURL: jest.fn(()=>'data:image/jpeg;base64,processed-image-data'),
            toBlob: jest.fn((callback)=>{
                const blob = new Blob([
                    'processed'
                ], {
                    type: 'image/jpeg'
                });
                callback(blob);
            })
        };
        beforeEach(()=>{
            global.HTMLCanvasElement.prototype.getContext = mockCanvas.getContext;
            global.HTMLCanvasElement.prototype.toDataURL = mockCanvas.toDataURL;
            global.HTMLCanvasElement.prototype.toBlob = mockCanvas.toBlob;
            // Mock Image constructor
            global.Image = class MockImage {
                set src(value) {
                    setTimeout(()=>{
                        if (this.onload) this.onload();
                    }, 0);
                }
                constructor(){
                    this.onload = null;
                    this.onerror = null;
                    this.width = 1024;
                    this.height = 1536;
                    this.crossOrigin = '';
                }
            };
            // Mock FileReader for file processing
            global.FileReader = class MockFileReader {
                readAsDataURL(file) {
                    setTimeout(()=>{
                        this.result = 'data:image/jpeg;base64,processed-image-data';
                        if (this.onload) {
                            this.onload({
                                target: {
                                    result: this.result
                                }
                            });
                        }
                    }, 0);
                }
                constructor(){
                    this.onload = null;
                    this.onerror = null;
                    this.result = null;
                }
            };
            // Mock document.createElement for canvas creation
            const originalCreateElement = document.createElement;
            document.createElement = jest.fn((tagName)=>{
                if (tagName === 'canvas') {
                    return {
                        width: 0,
                        height: 0,
                        getContext: mockCanvas.getContext,
                        toDataURL: mockCanvas.toDataURL,
                        toBlob: mockCanvas.toBlob
                    };
                }
                return originalCreateElement.call(document, tagName);
            });
        });
        it('should process File objects through image processing pipeline', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const mockFile = createMockFile('test-image.jpg', 'image/jpeg');
            const mockApparelFile = createMockFile('apparel.png', 'image/png');
            const variablesWithFiles = {
                modelImage: mockFile,
                apparelImages: [
                    mockApparelFile
                ]
            };
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false,
                    imageProcessing: {
                        targetWidth: 1024,
                        targetHeight: 1536,
                        maxSizeKB: 1024
                    }
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(variablesWithFiles);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "context",
                            children: mutation.context ? 'has-context' : 'no-context'
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            }, {
                timeout: 5000
            });
            expect(_react1.screen.getByTestId('context')).toHaveTextContent('has-context');
            expect(mockFetch).toHaveBeenCalledWith('/api/tryon', expect.objectContaining({
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: expect.stringContaining('processed-image-data')
            }));
        });
        it('should handle mixed File and base64 inputs', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const mockFile = createMockFile('test-image.jpg', 'image/jpeg');
            const mixedVariables = {
                modelImage: 'data:image/jpeg;base64,existing-base64-data',
                apparelImages: [
                    mockFile,
                    'data:image/png;base64,another-base64-image'
                ]
            };
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate(mixedVariables);
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            }, {
                timeout: 5000
            });
            expect(mockFetch).toHaveBeenCalledTimes(1);
        });
        it('should handle image processing errors gracefully', async ()=>{
            // Mock FileReader to simulate file processing error
            const originalFileReader = global.FileReader;
            global.FileReader = class MockFileReader {
                readAsDataURL(file) {
                    setTimeout(()=>{
                        if (this.onerror) {
                            this.onerror({
                                target: {
                                    error: new Error('File reading failed')
                                }
                            });
                        }
                    }, 0);
                }
                constructor(){
                    this.onload = null;
                    this.onerror = null;
                    this.result = null;
                }
            };
            const mockFile = createMockFile('invalid.txt', 'text/plain');
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate({
                        modelImage: mockFile,
                        apparelImages: []
                    });
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "status",
                            children: mutation.status
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "hasError",
                            children: mutation.isError.toString()
                        })
                    ]
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('error');
            }, {
                timeout: 3000
            });
            expect(_react1.screen.getByTestId('hasError')).toHaveTextContent('true');
            // Restore FileReader
            global.FileReader = originalFileReader;
        });
        it('should pass processed variables to API with correct format', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const mockFile = createMockFile('test.jpg', 'image/jpeg');
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false
                });
                _react.default.useEffect(()=>{
                    mutation.mutate({
                        modelImage: mockFile,
                        apparelImages: [
                            mockFile
                        ]
                    });
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            const [url, requestInit] = mockFetch.mock.calls[0];
            expect(url).toBe('/api/tryon');
            const requestBody = JSON.parse(requestInit.body);
            expect(requestBody.modelImage).toMatch(/^data:image\/jpeg;base64,/);
            expect(requestBody.apparelImages).toHaveLength(1);
            expect(requestBody.apparelImages[0]).toMatch(/^data:image\/jpeg;base64,/);
        });
        it('should include image processing results in mutation context', async ()=>{
            mockFetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockSuccessResponse
            });
            const mockFile = createMockFile('test.jpg', 'image/jpeg');
            let capturedContext = null;
            const onSuccess = jest.fn((data, variables, context)=>{
                capturedContext = context;
            });
            const TestComponent = ()=>{
                const mutation = (0, _useTryonMutation.useTryonMutation)({
                    enableRetry: false,
                    onSuccess
                });
                _react.default.useEffect(()=>{
                    mutation.mutate({
                        modelImage: mockFile,
                        apparelImages: []
                    });
                }, []);
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "status",
                    children: mutation.status
                });
            };
            renderWithProvider(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId('status')).toHaveTextContent('success');
            });
            expect(onSuccess).toHaveBeenCalled();
            expect(capturedContext).toBeTruthy();
            expect(capturedContext.imageProcessingResults).toBeTruthy();
            expect(capturedContext.imageProcessingResults.totalProcessingTime).toBeGreaterThan(0);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL2J1c2luZXNzLWxheWVyL211dGF0aW9ucy91c2VUcnlvbk11dGF0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBRdWVyeUNsaWVudFByb3ZpZGVyIH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IHVzZVRyeW9uTXV0YXRpb24gfSBmcm9tICcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvbXV0YXRpb25zL3VzZVRyeW9uTXV0YXRpb24nO1xuaW1wb3J0IHR5cGUgeyBcbiAgVHJ5b25NdXRhdGlvblZhcmlhYmxlcyxcbiAgVHJ5b25NdXRhdGlvblZhcmlhYmxlc1dpdGhGaWxlcywgXG4gIFRyeW9uTXV0YXRpb25SZXNwb25zZSxcbiAgVHJ5b25NdXRhdGlvbkVycm9yLFxuICBVc2VUcnlvbk11dGF0aW9uQ29uZmlnIFxufSBmcm9tICcuLi8uLi8uLi9zcmMvYnVzaW5lc3MtbGF5ZXIvdHlwZXMvdHJ5b24udHlwZXMnO1xuXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XG5jb25zdCBtb2NrRmV0Y2ggPSBqZXN0LmZuKCk7XG5nbG9iYWwuZmV0Y2ggPSBtb2NrRmV0Y2g7XG5cbi8vIE1vY2sgYWJvcnQgY29udHJvbGxlciBmb3IgdGltZW91dCB0ZXN0c1xuY2xhc3MgTW9ja0Fib3J0Q29udHJvbGxlciB7XG4gIHNpZ25hbCA9IHsgYWJvcnRlZDogZmFsc2UgfTtcbiAgYWJvcnQgPSBqZXN0LmZuKCgpID0+IHtcbiAgICB0aGlzLnNpZ25hbC5hYm9ydGVkID0gdHJ1ZTtcbiAgfSk7XG59XG5nbG9iYWwuQWJvcnRDb250cm9sbGVyID0gTW9ja0Fib3J0Q29udHJvbGxlciBhcyBhbnk7XG5cbmRlc2NyaWJlKCd1c2VUcnlvbk11dGF0aW9uJywgKCkgPT4ge1xuICBsZXQgcXVlcnlDbGllbnQ6IFF1ZXJ5Q2xpZW50O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHF1ZXJ5Q2xpZW50ID0gbmV3IFF1ZXJ5Q2xpZW50KHtcbiAgICAgIGRlZmF1bHRPcHRpb25zOiB7XG4gICAgICAgIHF1ZXJpZXM6IHsgcmV0cnk6IGZhbHNlLCBnY1RpbWU6IDAgfSxcbiAgICAgICAgbXV0YXRpb25zOiB7IHJldHJ5OiBmYWxzZSB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBtb2NrRmV0Y2gubW9ja0NsZWFyKCk7XG4gICAgamVzdC5jbGVhckFsbFRpbWVycygpO1xuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgIHF1ZXJ5Q2xpZW50LmNsZWFyKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHJlbmRlcldpdGhQcm92aWRlciA9IChjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlKSA9PiB7XG4gICAgcmV0dXJuIHJlbmRlcihcbiAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBtb2NrVmFyaWFibGVzOiBUcnlvbk11dGF0aW9uVmFyaWFibGVzID0ge1xuICAgIG1vZGVsSW1hZ2U6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRCcsXG4gICAgYXBwYXJlbEltYWdlczogWydkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRCddXG4gIH07XG5cbiAgY29uc3QgbW9ja1N1Y2Nlc3NSZXNwb25zZTogVHJ5b25NdXRhdGlvblJlc3BvbnNlID0ge1xuICAgIGltZ19nZW5lcmF0ZWQ6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGdlbmVyYXRlZEltYWdlQmFzZTY0RGF0YScsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHByb2Nlc3NpbmdUaW1lOiA1MDAwLFxuICAgICAgbW9kZWxWZXJzaW9uOiAndjEuMCcsXG4gICAgICB0aW1lc3RhbXA6ICcyMDIzLTAxLTAxVDAwOjAwOjAwWidcbiAgICB9XG4gIH07XG5cbiAgZGVzY3JpYmUoJ0Jhc2ljIEhvb2sgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBjb3JyZWN0IGRlZmF1bHQgc3RhdGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImlzTG9hZGluZ1wiPnttdXRhdGlvbi5pc0xvYWRpbmcudG9TdHJpbmcoKX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJpc1N1Y2Nlc3NcIj57bXV0YXRpb24uaXNTdWNjZXNzLnRvU3RyaW5nKCl9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaXNFcnJvclwiPnttdXRhdGlvbi5pc0Vycm9yLnRvU3RyaW5nKCl9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaXNJZGxlXCI+e211dGF0aW9uLmlzSWRsZS50b1N0cmluZygpfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhc0RhdGFcIj57Qm9vbGVhbihtdXRhdGlvbi5kYXRhKS50b1N0cmluZygpfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhc0Vycm9yXCI+e0Jvb2xlYW4obXV0YXRpb24uZXJyb3IpLnRvU3RyaW5nKCl9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2lkbGUnKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lzTG9hZGluZycpKS50b0hhdmVUZXh0Q29udGVudCgnZmFsc2UnKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lzU3VjY2VzcycpKS50b0hhdmVUZXh0Q29udGVudCgnZmFsc2UnKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lzRXJyb3InKSkudG9IYXZlVGV4dENvbnRlbnQoJ2ZhbHNlJyk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpc0lkbGUnKSkudG9IYXZlVGV4dENvbnRlbnQoJ3RydWUnKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2hhc0RhdGEnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2ZhbHNlJyk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdoYXNFcnJvcicpKS50b0hhdmVUZXh0Q29udGVudCgnZmFsc2UnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBtdXRhdGUgYW5kIG11dGF0ZUFzeW5jIGZ1bmN0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhc011dGF0ZVwiPnt0eXBlb2YgbXV0YXRpb24ubXV0YXRlID09PSAnZnVuY3Rpb24nID8gJ2Z1bmN0aW9uJyA6ICdub3QtZnVuY3Rpb24nfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhc011dGF0ZUFzeW5jXCI+e3R5cGVvZiBtdXRhdGlvbi5tdXRhdGVBc3luYyA9PT0gJ2Z1bmN0aW9uJyA/ICdmdW5jdGlvbicgOiAnbm90LWZ1bmN0aW9uJ308L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJoYXNSZXNldFwiPnt0eXBlb2YgbXV0YXRpb24ucmVzZXQgPT09ICdmdW5jdGlvbicgPyAnZnVuY3Rpb24nIDogJ25vdC1mdW5jdGlvbid9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdoYXNNdXRhdGUnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdoYXNNdXRhdGVBc3luYycpKS50b0hhdmVUZXh0Q29udGVudCgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2hhc1Jlc2V0JykpLnRvSGF2ZVRleHRDb250ZW50KCdmdW5jdGlvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3VjY2Vzc2Z1bCBBUEkgQ2FsbHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3VjY2Vzc2Z1bCBBUEkgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tTdWNjZXNzUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbXV0YXRpb24gPSB1c2VUcnlvbk11dGF0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIG11dGF0aW9uLm11dGF0ZShtb2NrVmFyaWFibGVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImRhdGFcIj57bXV0YXRpb24uZGF0YSA/IEpTT04uc3RyaW5naWZ5KG11dGF0aW9uLmRhdGEpIDogJ251bGwnfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnc3VjY2VzcycpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGFDb250ZW50ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdkYXRhJykudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShkYXRhQ29udGVudCEpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEuaW1nX2dlbmVyYXRlZCkudG9CZShtb2NrU3VjY2Vzc1Jlc3BvbnNlLmltZ19nZW5lcmF0ZWQpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEubWV0YWRhdGEpLnRvRXF1YWwobW9ja1N1Y2Nlc3NSZXNwb25zZS5tZXRhZGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1ha2UgY29ycmVjdCBBUEkgcmVxdWVzdCB3aXRoIHByb3BlciBwYXlsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrU3VjY2Vzc1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBtdXRhdGlvbi5tdXRhdGUobW9ja1ZhcmlhYmxlcyk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cInRlc3RcIj50ZXN0PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS90cnlvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWxJbWFnZTogbW9ja1ZhcmlhYmxlcy5tb2RlbEltYWdlLFxuICAgICAgICAgIGFwcGFyZWxJbWFnZXM6IG1vY2tWYXJpYWJsZXMuYXBwYXJlbEltYWdlcyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBtZXRhZGF0YSBpbiByZXF1ZXN0IHdoZW4gcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tTdWNjZXNzUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdmFyaWFibGVzV2l0aE1ldGFkYXRhOiBUcnlvbk11dGF0aW9uVmFyaWFibGVzID0ge1xuICAgICAgICAuLi5tb2NrVmFyaWFibGVzLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgbWV0YWRhdGE6IHsgY3VzdG9tOiAnZGF0YScsIHVzZXJJZDogJzEyMycgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKHZhcmlhYmxlc1dpdGhNZXRhZGF0YSk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cInRlc3RcIj50ZXN0PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBbLCByZXF1ZXN0SW5pdF0gPSBtb2NrRmV0Y2gubW9jay5jYWxsc1swXTtcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gSlNPTi5wYXJzZShyZXF1ZXN0SW5pdC5ib2R5KTtcbiAgICAgIGV4cGVjdChyZXF1ZXN0Qm9keS5tZXRhZGF0YSkudG9FcXVhbCh7IGN1c3RvbTogJ2RhdGEnLCB1c2VySWQ6ICcxMjMnIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgSFRUUCBlcnJvciByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvclJlc3BvbnNlID0ge1xuICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgZGV0YWlsczogW3sgZmllbGQ6ICdtb2RlbEltYWdlJywgbWVzc2FnZTogJ0ludmFsaWQgZm9ybWF0JyB9XSxcbiAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InXG4gICAgICB9O1xuXG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgc3RhdHVzVGV4dDogJ0JhZCBSZXF1ZXN0JyxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gZXJyb3JSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZXJyb3JcIj57bXV0YXRpb24uZXJyb3IgPyBKU09OLnN0cmluZ2lmeShtdXRhdGlvbi5lcnJvcikgOiAnbnVsbCd9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RhdHVzJykpLnRvSGF2ZVRleHRDb250ZW50KCdlcnJvcicpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuXG4gICAgICBjb25zdCBlcnJvckNvbnRlbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Vycm9yJykudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBwYXJzZWRFcnJvciA9IEpTT04ucGFyc2UoZXJyb3JDb250ZW50ISk7XG4gICAgICBleHBlY3QocGFyc2VkRXJyb3IuZXJyb3IpLnRvQmUoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XG4gICAgICBleHBlY3QocGFyc2VkRXJyb3IuZGV0YWlscykudG9FcXVhbChlcnJvclJlc3BvbnNlLmRldGFpbHMpO1xuICAgICAgZXhwZWN0KHBhcnNlZEVycm9yLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHBhcnNlZEVycm9yLnJldHJ5YWJsZSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oeyBlbmFibGVSZXRyeTogZmFsc2UgfSk7XG4gICAgICAgIFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIG11dGF0aW9uLm11dGF0ZShtb2NrVmFyaWFibGVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImhhc0Vycm9yXCI+e211dGF0aW9uLmlzRXJyb3IudG9TdHJpbmcoKX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJlcnJvclR5cGVcIj57bXV0YXRpb24uZXJyb3IgPyB0eXBlb2YgbXV0YXRpb24uZXJyb3IgOiAnbnVsbCd9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZXJyb3JNZXNzYWdlXCI+e211dGF0aW9uLmVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBtdXRhdGlvbi5lcnJvci5tZXNzYWdlIDogJ25vdC1lcnJvcid9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RhdHVzJykpLnRvSGF2ZVRleHRDb250ZW50KCdlcnJvcicpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdoYXNFcnJvcicpKS50b0hhdmVUZXh0Q29udGVudCgndHJ1ZScpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZXJyb3JNZXNzYWdlJykpLnRvSGF2ZVRleHRDb250ZW50KCdOZXR3b3JrIGVycm9yJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIEFQSSByZXNwb25zZSBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IGludmFsaWQ6ICdyZXNwb25zZScgfSksIC8vIE1pc3NpbmcgaW1nX2dlbmVyYXRlZFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbih7IGVuYWJsZVJldHJ5OiBmYWxzZSB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaGFzRXJyb3JcIj57bXV0YXRpb24uaXNFcnJvci50b1N0cmluZygpfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImVycm9yTWVzc2FnZVwiPnttdXRhdGlvbi5lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gbXV0YXRpb24uZXJyb3IubWVzc2FnZSA6ICdub3QtZXJyb3InfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnZXJyb3InKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnaGFzRXJyb3InKSkudG9IYXZlVGV4dENvbnRlbnQoJ3RydWUnKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Vycm9yTWVzc2FnZScpKS50b0hhdmVUZXh0Q29udGVudCgnSW52YWxpZCBBUEkgcmVzcG9uc2U6IG1pc3NpbmcgaW1nX2dlbmVyYXRlZCBmaWVsZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmV0cnkgTG9naWMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXRyeSBvbiByZXRyeWFibGUgZXJyb3JzIHdpdGggZXhwb25lbnRpYWwgYmFja29mZicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0IGNhbGwgZmFpbHMgd2l0aCA1MDAgZXJyb3IgKHJldHJ5YWJsZSlcbiAgICAgIG1vY2tGZXRjaFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgc3RhdHVzVGV4dDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgc3RhdHVzVGV4dDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrU3VjY2Vzc1Jlc3BvbnNlLFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbXV0YXRpb24gPSB1c2VUcnlvbk11dGF0aW9uKHtcbiAgICAgICAgICBlbmFibGVSZXRyeTogdHJ1ZSxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICAgIGluaXRpYWxSZXRyeURlbGF5OiAxMDBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIG11dGF0aW9uLm11dGF0ZShtb2NrVmFyaWFibGVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgLy8gRmFzdC1mb3J3YXJkIHRocm91Z2ggcmV0cnkgZGVsYXlzXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWVBc3luYygxMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RhdHVzJykpLnRvSGF2ZVRleHRDb250ZW50KCdzdWNjZXNzJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmV0cnkgb24gbm9uLXJldHJ5YWJsZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgc3RhdHVzVGV4dDogJ0JhZCBSZXF1ZXN0JyxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgZXJyb3I6ICdWYWxpZGF0aW9uIGVycm9yJyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oe1xuICAgICAgICAgIGVuYWJsZVJldHJ5OiB0cnVlLFxuICAgICAgICAgIG1heFJldHJpZXM6IDNcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIG11dGF0aW9uLm11dGF0ZShtb2NrVmFyaWFibGVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnZXJyb3InKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgbWF4UmV0cmllcyBjb25maWd1cmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgc3RhdHVzVGV4dDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IGVycm9yOiAnU2VydmVyIGVycm9yJyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oe1xuICAgICAgICAgIGVuYWJsZVJldHJ5OiB0cnVlLFxuICAgICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgICAgaW5pdGlhbFJldHJ5RGVsYXk6IDUwXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBtdXRhdGlvbi5tdXRhdGUobW9ja1ZhcmlhYmxlcyk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic3RhdHVzXCI+e211dGF0aW9uLnN0YXR1c308L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZUFzeW5jKDEwMDApO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2Vycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpOyAvLyAxIGluaXRpYWwgKyAyIHJldHJpZXNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1RpbWVvdXQgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVxdWVzdCB0aW1lb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lb3V0JykpLCAxMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrRmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB0aW1lb3V0UHJvbWlzZSk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbih7IGVuYWJsZVJldHJ5OiBmYWxzZSB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKHtcbiAgICAgICAgICAgIC4uLm1vY2tWYXJpYWJsZXMsXG4gICAgICAgICAgICBvcHRpb25zOiB7IHRpbWVvdXQ6IDUwMCB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic3RhdHVzXCI+e211dGF0aW9uLnN0YXR1c308L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZUFzeW5jKDYwMCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnZXJyb3InKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xpZmVjeWNsZSBDYWxsYmFja3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU3VjY2VzcyBjYWxsYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1N1Y2Nlc3NSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblN1Y2Nlc3MgPSBqZXN0LmZuKCk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbih7IG9uU3VjY2VzcyB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ3N1Y2Nlc3MnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob25TdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbW9ja1N1Y2Nlc3NSZXNwb25zZSxcbiAgICAgICAgbW9ja1ZhcmlhYmxlcyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHZhcmlhYmxlczogbW9ja1ZhcmlhYmxlcyxcbiAgICAgICAgICBzdGFydFRpbWU6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgICByZXRyeUNvdW50OiAwXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uRXJyb3IgY2FsbGJhY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgY29uc3Qgb25FcnJvciA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbXV0YXRpb24gPSB1c2VUcnlvbk11dGF0aW9uKHsgb25FcnJvciwgZW5hYmxlUmV0cnk6IGZhbHNlIH0pO1xuICAgICAgICBcbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBtdXRhdGlvbi5tdXRhdGUobW9ja1ZhcmlhYmxlcyk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnZXJyb3InKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcblxuICAgICAgZXhwZWN0KG9uRXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdOZXR3b3JrIGNvbm5lY3Rpb24nKSxcbiAgICAgICAgICByZXRyeWFibGU6IHRydWUsXG4gICAgICAgICAgY2F0ZWdvcnk6ICduZXR3b3JrJyxcbiAgICAgICAgICBjb2RlOiAnTkVUV09SS19FUlJPUicsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgICAgIHJlY292ZXJ5QWN0aW9uczogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgIHR5cGU6ICdjaGVja19jb25uZWN0aW9uJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICBdKVxuICAgICAgICB9KSxcbiAgICAgICAgbW9ja1ZhcmlhYmxlcyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHZhcmlhYmxlczogbW9ja1ZhcmlhYmxlc1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBvbk11dGF0ZSBjYWxsYmFjayBhbmQgdXNlIHJldHVybmVkIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tTdWNjZXNzUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25NdXRhdGUgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgY3VzdG9tRGF0YTogJ3Rlc3QnIH0pO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oeyBvbk11dGF0ZSB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ3N1Y2Nlc3MnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob25NdXRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tWYXJpYWJsZXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2V0dGxlZCBjYWxsYmFjayBvbiBib3RoIHN1Y2Nlc3MgYW5kIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZXR0bGVkID0gamVzdC5mbigpO1xuXG4gICAgICAvLyBUZXN0IHN1Y2Nlc3MgY2FzZVxuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrU3VjY2Vzc1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbih7IG9uU2V0dGxlZCB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnc3VjY2VzcycpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChvblNldHRsZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBtb2NrU3VjY2Vzc1Jlc3BvbnNlLFxuICAgICAgICBudWxsLFxuICAgICAgICBtb2NrVmFyaWFibGVzLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdmFyaWFibGVzOiBtb2NrVmFyaWFibGVzXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICB1bm1vdW50KCk7XG4gICAgICBvblNldHRsZWQubW9ja0NsZWFyKCk7XG5cbiAgICAgIC8vIFRlc3QgZXJyb3IgY2FzZVxuICAgICAgbW9ja0ZldGNoLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnRFcnJvciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbXV0YXRpb24gPSB1c2VUcnlvbk11dGF0aW9uKHsgb25TZXR0bGVkLCBlbmFibGVSZXRyeTogZmFsc2UgfSk7XG4gICAgICAgIFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIG11dGF0aW9uLm11dGF0ZShtb2NrVmFyaWFibGVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwic3RhdHVzXCI+e211dGF0aW9uLnN0YXR1c308L2Rpdj47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXIoPFRlc3RDb21wb25lbnRFcnJvciAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2Vycm9yJyk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDUwMDAgfSk7XG5cbiAgICAgIGV4cGVjdChvblNldHRsZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3VuZXhwZWN0ZWQgZXJyb3InKSxcbiAgICAgICAgICBjYXRlZ29yeTogJ3Vua25vd24nLFxuICAgICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgICBzZXZlcml0eTogJ2hpZ2gnLFxuICAgICAgICAgIHJldHJ5YWJsZTogdHJ1ZVxuICAgICAgICB9KSxcbiAgICAgICAgbW9ja1ZhcmlhYmxlcyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHZhcmlhYmxlczogbW9ja1ZhcmlhYmxlc1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc2V0IEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXNldCBtdXRhdGlvbiBzdGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1N1Y2Nlc3NSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlUmVzZXQgPSAoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ucmVzZXQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic3RhdHVzXCI+e211dGF0aW9uLnN0YXR1c308L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmVzZXR9IGRhdGEtdGVzdGlkPVwicmVzZXQtYnV0dG9uXCI+UmVzZXQ8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ3N1Y2Nlc3MnKTtcbiAgICAgIH0sIHsgdGltZW91dDogNTAwMCB9KTtcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgc2NyZWVuLmdldEJ5VGVzdElkKCdyZXNldC1idXR0b24nKS5jbGljaygpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2lkbGUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uZmlndXJhdGlvbiBPcHRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzYWJsZSByZXRyeSB3aGVuIGVuYWJsZVJldHJ5IGlzIGZhbHNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgc3RhdHVzVGV4dDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IGVycm9yOiAnU2VydmVyIGVycm9yJyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oe1xuICAgICAgICAgIGVuYWJsZVJldHJ5OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1vY2tWYXJpYWJsZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ2Vycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW1hZ2UgUHJvY2Vzc2luZyBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICAvLyBNb2NrIEZpbGUgY29uc3RydWN0b3JcbiAgICBjb25zdCBjcmVhdGVNb2NrRmlsZSA9IChuYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY29udGVudDogc3RyaW5nID0gJ3Rlc3QtaW1hZ2UtZGF0YScpOiBGaWxlID0+IHtcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZSB9KTtcbiAgICAgIHJldHVybiBuZXcgRmlsZShbYmxvYl0sIG5hbWUsIHsgdHlwZSB9KTtcbiAgICB9O1xuXG4gICAgLy8gTW9jayBDYW52YXMgYW5kIEltYWdlIGZvciBpbWFnZSBwcm9jZXNzaW5nXG4gICAgY29uc3QgbW9ja0NhbnZhcyA9IHtcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwLFxuICAgICAgZ2V0Q29udGV4dDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBkcmF3SW1hZ2U6IGplc3QuZm4oKSxcbiAgICAgICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkOiB0cnVlLFxuICAgICAgICBpbWFnZVNtb290aGluZ1F1YWxpdHk6ICdoaWdoJyxcbiAgICAgICAgZmlsbFN0eWxlOiAnJyxcbiAgICAgICAgZmlsbFJlY3Q6IGplc3QuZm4oKSxcbiAgICAgICAgZ2V0SW1hZ2VEYXRhOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgZGF0YTogbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KDQgKiAxMDAgKiAxMDApLCAvLyAxMDB4MTAwIFJHQkEgZGF0YVxuICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgaGVpZ2h0OiAxMDBcbiAgICAgICAgfSkpLFxuICAgICAgICBwdXRJbWFnZURhdGE6IGplc3QuZm4oKVxuICAgICAgfSkpLFxuICAgICAgdG9EYXRhVVJMOiBqZXN0LmZuKCgpID0+ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHByb2Nlc3NlZC1pbWFnZS1kYXRhJyksXG4gICAgICB0b0Jsb2I6IGplc3QuZm4oKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbJ3Byb2Nlc3NlZCddLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KTtcbiAgICAgICAgY2FsbGJhY2soYmxvYik7XG4gICAgICB9KVxuICAgIH07XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGdsb2JhbC5IVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUuZ2V0Q29udGV4dCA9IG1vY2tDYW52YXMuZ2V0Q29udGV4dCBhcyBhbnk7XG4gICAgICBnbG9iYWwuSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvRGF0YVVSTCA9IG1vY2tDYW52YXMudG9EYXRhVVJMIGFzIGFueTtcbiAgICAgIGdsb2JhbC5IVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUudG9CbG9iID0gbW9ja0NhbnZhcy50b0Jsb2IgYXMgYW55O1xuICAgICAgXG4gICAgICAvLyBNb2NrIEltYWdlIGNvbnN0cnVjdG9yXG4gICAgICBnbG9iYWwuSW1hZ2UgPSBjbGFzcyBNb2NrSW1hZ2Uge1xuICAgICAgICBvbmxvYWQ6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICAgICAgICBvbmVycm9yOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgd2lkdGggPSAxMDI0O1xuICAgICAgICBoZWlnaHQgPSAxNTM2O1xuICAgICAgICBjcm9zc09yaWdpbiA9ICcnO1xuICAgICAgICBcbiAgICAgICAgc2V0IHNyYyh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5vbmxvYWQpIHRoaXMub25sb2FkKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICAvLyBNb2NrIEZpbGVSZWFkZXIgZm9yIGZpbGUgcHJvY2Vzc2luZ1xuICAgICAgZ2xvYmFsLkZpbGVSZWFkZXIgPSBjbGFzcyBNb2NrRmlsZVJlYWRlciB7XG4gICAgICAgIG9ubG9hZDogKChldmVudDogYW55KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICAgICAgICBvbmVycm9yOiAoKGV2ZW50OiBhbnkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIHJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICByZWFkQXNEYXRhVVJMKGZpbGU6IEZpbGUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQscHJvY2Vzc2VkLWltYWdlLWRhdGEnO1xuICAgICAgICAgICAgaWYgKHRoaXMub25sb2FkKSB7XG4gICAgICAgICAgICAgIHRoaXMub25sb2FkKHsgdGFyZ2V0OiB7IHJlc3VsdDogdGhpcy5yZXN1bHQgfSB9IGFzIGFueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICAvLyBNb2NrIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgZm9yIGNhbnZhcyBjcmVhdGlvblxuICAgICAgY29uc3Qgb3JpZ2luYWxDcmVhdGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudDtcbiAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSBqZXN0LmZuKCh0YWdOYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdjYW52YXMnKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgZ2V0Q29udGV4dDogbW9ja0NhbnZhcy5nZXRDb250ZXh0LFxuICAgICAgICAgICAgdG9EYXRhVVJMOiBtb2NrQ2FudmFzLnRvRGF0YVVSTCxcbiAgICAgICAgICAgIHRvQmxvYjogbW9ja0NhbnZhcy50b0Jsb2JcbiAgICAgICAgICB9IGFzIGFueTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3JpZ2luYWxDcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsIHRhZ05hbWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgRmlsZSBvYmplY3RzIHRocm91Z2ggaW1hZ2UgcHJvY2Vzc2luZyBwaXBlbGluZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1N1Y2Nlc3NSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb2NrRmlsZSA9IGNyZWF0ZU1vY2tGaWxlKCd0ZXN0LWltYWdlLmpwZycsICdpbWFnZS9qcGVnJyk7XG4gICAgICBjb25zdCBtb2NrQXBwYXJlbEZpbGUgPSBjcmVhdGVNb2NrRmlsZSgnYXBwYXJlbC5wbmcnLCAnaW1hZ2UvcG5nJyk7XG5cbiAgICAgIGNvbnN0IHZhcmlhYmxlc1dpdGhGaWxlczogVHJ5b25NdXRhdGlvblZhcmlhYmxlc1dpdGhGaWxlcyA9IHtcbiAgICAgICAgbW9kZWxJbWFnZTogbW9ja0ZpbGUsXG4gICAgICAgIGFwcGFyZWxJbWFnZXM6IFttb2NrQXBwYXJlbEZpbGVdXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oe1xuICAgICAgICAgIGVuYWJsZVJldHJ5OiBmYWxzZSxcbiAgICAgICAgICBpbWFnZVByb2Nlc3Npbmc6IHtcbiAgICAgICAgICAgIHRhcmdldFdpZHRoOiAxMDI0LFxuICAgICAgICAgICAgdGFyZ2V0SGVpZ2h0OiAxNTM2LFxuICAgICAgICAgICAgbWF4U2l6ZUtCOiAxMDI0XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKHZhcmlhYmxlc1dpdGhGaWxlcyBhcyBhbnkpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiY29udGV4dFwiPnttdXRhdGlvbi5jb250ZXh0ID8gJ2hhcy1jb250ZXh0JyA6ICduby1jb250ZXh0J308L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ3N1Y2Nlc3MnKTtcbiAgICAgIH0sIHsgdGltZW91dDogNTAwMCB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY29udGV4dCcpKS50b0hhdmVUZXh0Q29udGVudCgnaGFzLWNvbnRleHQnKTtcbiAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3RyeW9uJywgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdwcm9jZXNzZWQtaW1hZ2UtZGF0YScpXG4gICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXhlZCBGaWxlIGFuZCBiYXNlNjQgaW5wdXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrU3VjY2Vzc1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gY3JlYXRlTW9ja0ZpbGUoJ3Rlc3QtaW1hZ2UuanBnJywgJ2ltYWdlL2pwZWcnKTtcblxuICAgICAgY29uc3QgbWl4ZWRWYXJpYWJsZXM6IFRyeW9uTXV0YXRpb25WYXJpYWJsZXNXaXRoRmlsZXMgPSB7XG4gICAgICAgIG1vZGVsSW1hZ2U6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGV4aXN0aW5nLWJhc2U2NC1kYXRhJyxcbiAgICAgICAgYXBwYXJlbEltYWdlczogW21vY2tGaWxlLCAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGFub3RoZXItYmFzZTY0LWltYWdlJ11cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gdXNlVHJ5b25NdXRhdGlvbih7IGVuYWJsZVJldHJ5OiBmYWxzZSB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKG1peGVkVmFyaWFibGVzIGFzIGFueSk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnc3VjY2VzcycpO1xuICAgICAgfSwgeyB0aW1lb3V0OiA1MDAwIH0pO1xuXG4gICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbWFnZSBwcm9jZXNzaW5nIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBGaWxlUmVhZGVyIHRvIHNpbXVsYXRlIGZpbGUgcHJvY2Vzc2luZyBlcnJvclxuICAgICAgY29uc3Qgb3JpZ2luYWxGaWxlUmVhZGVyID0gZ2xvYmFsLkZpbGVSZWFkZXI7XG4gICAgICBnbG9iYWwuRmlsZVJlYWRlciA9IGNsYXNzIE1vY2tGaWxlUmVhZGVyIHtcbiAgICAgICAgb25sb2FkOiAoKGV2ZW50OiBhbnkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIG9uZXJyb3I6ICgoZXZlbnQ6IGFueSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgcmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHJlYWRBc0RhdGFVUkwoZmlsZTogRmlsZSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMub25lcnJvcikge1xuICAgICAgICAgICAgICB0aGlzLm9uZXJyb3IoeyB0YXJnZXQ6IHsgZXJyb3I6IG5ldyBFcnJvcignRmlsZSByZWFkaW5nIGZhaWxlZCcpIH0gfSBhcyBhbnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBjcmVhdGVNb2NrRmlsZSgnaW52YWxpZC50eHQnLCAndGV4dC9wbGFpbicpO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24oeyBlbmFibGVSZXRyeTogZmFsc2UgfSk7XG4gICAgICAgIFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIG11dGF0aW9uLm11dGF0ZSh7XG4gICAgICAgICAgICBtb2RlbEltYWdlOiBtb2NrRmlsZSxcbiAgICAgICAgICAgIGFwcGFyZWxJbWFnZXM6IFtdXG4gICAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaGFzRXJyb3JcIj57bXV0YXRpb24uaXNFcnJvci50b1N0cmluZygpfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnZXJyb3InKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnaGFzRXJyb3InKSkudG9IYXZlVGV4dENvbnRlbnQoJ3RydWUnKTtcblxuICAgICAgLy8gUmVzdG9yZSBGaWxlUmVhZGVyXG4gICAgICBnbG9iYWwuRmlsZVJlYWRlciA9IG9yaWdpbmFsRmlsZVJlYWRlcjtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFzcyBwcm9jZXNzZWQgdmFyaWFibGVzIHRvIEFQSSB3aXRoIGNvcnJlY3QgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrU3VjY2Vzc1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gY3JlYXRlTW9ja0ZpbGUoJ3Rlc3QuanBnJywgJ2ltYWdlL2pwZWcnKTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbXV0YXRpb24gPSB1c2VUcnlvbk11dGF0aW9uKHsgZW5hYmxlUmV0cnk6IGZhbHNlIH0pO1xuICAgICAgICBcbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBtdXRhdGlvbi5tdXRhdGUoe1xuICAgICAgICAgICAgbW9kZWxJbWFnZTogbW9ja0ZpbGUsXG4gICAgICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbbW9ja0ZpbGVdXG4gICAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJzdGF0dXNcIj57bXV0YXRpb24uc3RhdHVzfTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMnKSkudG9IYXZlVGV4dENvbnRlbnQoJ3N1Y2Nlc3MnKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBbdXJsLCByZXF1ZXN0SW5pdF0gPSBtb2NrRmV0Y2gubW9jay5jYWxsc1swXTtcbiAgICAgIGV4cGVjdCh1cmwpLnRvQmUoJy9hcGkvdHJ5b24nKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBKU09OLnBhcnNlKHJlcXVlc3RJbml0LmJvZHkpO1xuICAgICAgZXhwZWN0KHJlcXVlc3RCb2R5Lm1vZGVsSW1hZ2UpLnRvTWF0Y2goL15kYXRhOmltYWdlXFwvanBlZztiYXNlNjQsLyk7XG4gICAgICBleHBlY3QocmVxdWVzdEJvZHkuYXBwYXJlbEltYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlcXVlc3RCb2R5LmFwcGFyZWxJbWFnZXNbMF0pLnRvTWF0Y2goL15kYXRhOmltYWdlXFwvanBlZztiYXNlNjQsLyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgaW1hZ2UgcHJvY2Vzc2luZyByZXN1bHRzIGluIG11dGF0aW9uIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tTdWNjZXNzUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBjcmVhdGVNb2NrRmlsZSgndGVzdC5qcGcnLCAnaW1hZ2UvanBlZycpO1xuICAgICAgbGV0IGNhcHR1cmVkQ29udGV4dDogYW55ID0gbnVsbDtcblxuICAgICAgY29uc3Qgb25TdWNjZXNzID0gamVzdC5mbigoZGF0YSwgdmFyaWFibGVzLCBjb250ZXh0KSA9PiB7XG4gICAgICAgIGNhcHR1cmVkQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbXV0YXRpb24gPSB1c2VUcnlvbk11dGF0aW9uKHsgXG4gICAgICAgICAgZW5hYmxlUmV0cnk6IGZhbHNlLFxuICAgICAgICAgIG9uU3VjY2Vzc1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbXV0YXRpb24ubXV0YXRlKHtcbiAgICAgICAgICAgIG1vZGVsSW1hZ2U6IG1vY2tGaWxlLFxuICAgICAgICAgICAgYXBwYXJlbEltYWdlczogW11cbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1c1wiPnttdXRhdGlvbi5zdGF0dXN9PC9kaXY+O1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cycpKS50b0hhdmVUZXh0Q29udGVudCgnc3VjY2VzcycpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChvblN1Y2Nlc3MpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChjYXB0dXJlZENvbnRleHQpLnRvQmVUcnV0aHkoKTtcbiAgICAgIGV4cGVjdChjYXB0dXJlZENvbnRleHQuaW1hZ2VQcm9jZXNzaW5nUmVzdWx0cykudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KGNhcHR1cmVkQ29udGV4dC5pbWFnZVByb2Nlc3NpbmdSZXN1bHRzLnRvdGFsUHJvY2Vzc2luZ1RpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsibW9ja0ZldGNoIiwiamVzdCIsImZuIiwiZ2xvYmFsIiwiZmV0Y2giLCJNb2NrQWJvcnRDb250cm9sbGVyIiwic2lnbmFsIiwiYWJvcnRlZCIsImFib3J0IiwiQWJvcnRDb250cm9sbGVyIiwiZGVzY3JpYmUiLCJxdWVyeUNsaWVudCIsImJlZm9yZUVhY2giLCJRdWVyeUNsaWVudCIsImRlZmF1bHRPcHRpb25zIiwicXVlcmllcyIsInJldHJ5IiwiZ2NUaW1lIiwibXV0YXRpb25zIiwibW9ja0NsZWFyIiwiY2xlYXJBbGxUaW1lcnMiLCJ1c2VGYWtlVGltZXJzIiwiYWZ0ZXJFYWNoIiwidXNlUmVhbFRpbWVycyIsImNsZWFyIiwicmVuZGVyV2l0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJyZW5kZXIiLCJRdWVyeUNsaWVudFByb3ZpZGVyIiwiY2xpZW50IiwibW9ja1ZhcmlhYmxlcyIsIm1vZGVsSW1hZ2UiLCJhcHBhcmVsSW1hZ2VzIiwibW9ja1N1Y2Nlc3NSZXNwb25zZSIsImltZ19nZW5lcmF0ZWQiLCJtZXRhZGF0YSIsInByb2Nlc3NpbmdUaW1lIiwibW9kZWxWZXJzaW9uIiwidGltZXN0YW1wIiwiaXQiLCJUZXN0Q29tcG9uZW50IiwibXV0YXRpb24iLCJ1c2VUcnlvbk11dGF0aW9uIiwiZGl2IiwiZGF0YS10ZXN0aWQiLCJzdGF0dXMiLCJpc0xvYWRpbmciLCJ0b1N0cmluZyIsImlzU3VjY2VzcyIsImlzRXJyb3IiLCJpc0lkbGUiLCJCb29sZWFuIiwiZGF0YSIsImVycm9yIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXN0SWQiLCJ0b0hhdmVUZXh0Q29udGVudCIsIm11dGF0ZSIsIm11dGF0ZUFzeW5jIiwicmVzZXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJvayIsImpzb24iLCJSZWFjdCIsInVzZUVmZmVjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ3YWl0Rm9yIiwiZGF0YUNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsInBhcnNlZERhdGEiLCJwYXJzZSIsInRvQmUiLCJ0b0VxdWFsIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInZhcmlhYmxlc1dpdGhNZXRhZGF0YSIsIm9wdGlvbnMiLCJjdXN0b20iLCJ1c2VySWQiLCJyZXF1ZXN0SW5pdCIsIm1vY2siLCJjYWxscyIsInJlcXVlc3RCb2R5IiwiZXJyb3JSZXNwb25zZSIsImRldGFpbHMiLCJmaWVsZCIsIm1lc3NhZ2UiLCJjb2RlIiwic3RhdHVzVGV4dCIsInRpbWVvdXQiLCJlcnJvckNvbnRlbnQiLCJwYXJzZWRFcnJvciIsInJldHJ5YWJsZSIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsIkVycm9yIiwiZW5hYmxlUmV0cnkiLCJpbnZhbGlkIiwibWF4UmV0cmllcyIsImluaXRpYWxSZXRyeURlbGF5IiwiYWN0IiwiYWR2YW5jZVRpbWVyc0J5VGltZUFzeW5jIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ0aW1lb3V0UHJvbWlzZSIsIlByb21pc2UiLCJfIiwicmVqZWN0Iiwic2V0VGltZW91dCIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJvblN1Y2Nlc3MiLCJvYmplY3RDb250YWluaW5nIiwidmFyaWFibGVzIiwic3RhcnRUaW1lIiwiYW55IiwiTnVtYmVyIiwicmV0cnlDb3VudCIsIm9uRXJyb3IiLCJzdHJpbmdDb250YWluaW5nIiwiY2F0ZWdvcnkiLCJzZXZlcml0eSIsInJlY292ZXJ5QWN0aW9ucyIsImFycmF5Q29udGFpbmluZyIsInR5cGUiLCJvbk11dGF0ZSIsIm1vY2tSZXR1cm5WYWx1ZSIsImN1c3RvbURhdGEiLCJvblNldHRsZWQiLCJ1bm1vdW50IiwiVGVzdENvbXBvbmVudEVycm9yIiwidW5kZWZpbmVkIiwiaGFuZGxlUmVzZXQiLCJidXR0b24iLCJvbkNsaWNrIiwiY2xpY2siLCJjcmVhdGVNb2NrRmlsZSIsIm5hbWUiLCJjb250ZW50IiwiYmxvYiIsIkJsb2IiLCJGaWxlIiwibW9ja0NhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsImltYWdlU21vb3RoaW5nUXVhbGl0eSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZ2V0SW1hZ2VEYXRhIiwiVWludDhDbGFtcGVkQXJyYXkiLCJwdXRJbWFnZURhdGEiLCJ0b0RhdGFVUkwiLCJ0b0Jsb2IiLCJjYWxsYmFjayIsIkhUTUxDYW52YXNFbGVtZW50IiwicHJvdG90eXBlIiwiSW1hZ2UiLCJNb2NrSW1hZ2UiLCJzcmMiLCJ2YWx1ZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJjcm9zc09yaWdpbiIsIkZpbGVSZWFkZXIiLCJNb2NrRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJmaWxlIiwicmVzdWx0IiwidGFyZ2V0Iiwib3JpZ2luYWxDcmVhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGFnTmFtZSIsImNhbGwiLCJtb2NrRmlsZSIsIm1vY2tBcHBhcmVsRmlsZSIsInZhcmlhYmxlc1dpdGhGaWxlcyIsImltYWdlUHJvY2Vzc2luZyIsInRhcmdldFdpZHRoIiwidGFyZ2V0SGVpZ2h0IiwibWF4U2l6ZUtCIiwiY29udGV4dCIsIm1peGVkVmFyaWFibGVzIiwib3JpZ2luYWxGaWxlUmVhZGVyIiwidXJsIiwidG9NYXRjaCIsInRvSGF2ZUxlbmd0aCIsImNhcHR1cmVkQ29udGV4dCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0JlVHJ1dGh5IiwiaW1hZ2VQcm9jZXNzaW5nUmVzdWx0cyIsInRvdGFsUHJvY2Vzc2luZ1RpbWUiLCJ0b0JlR3JlYXRlclRoYW4iXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDOzs7Ozs4REFDaUI7d0JBQzJCOzRCQUNJO2tDQUNoQjs7Ozs7O0FBU2pDLHNCQUFzQjtBQUN0QixNQUFNQSxZQUFZQyxLQUFLQyxFQUFFO0FBQ3pCQyxPQUFPQyxLQUFLLEdBQUdKO0FBRWYsMENBQTBDO0FBQzFDLE1BQU1LOzthQUNKQyxTQUFTO1lBQUVDLFNBQVM7UUFBTTthQUMxQkMsUUFBUVAsS0FBS0MsRUFBRSxDQUFDO1lBQ2QsSUFBSSxDQUFDSSxNQUFNLENBQUNDLE9BQU8sR0FBRztRQUN4Qjs7QUFDRjtBQUNBSixPQUFPTSxlQUFlLEdBQUdKO0FBRXpCSyxTQUFTLG9CQUFvQjtJQUMzQixJQUFJQztJQUVKQyxXQUFX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
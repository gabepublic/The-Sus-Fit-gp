{"version":3,"sources":["/Users/willstreeter/WebstormProjects/vibe-coding/those-people/The-Sus-Fit-gp/src/business-layer/providers/ErrorBoundary.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport type { BusinessLayerError } from '../types/error.types';\nimport { \n  formatErrorForDisplay, \n  logAndClassifyError,\n  type ErrorRecoveryAction \n} from '../utils/errorHandling';\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error?: BusinessLayerError;\n}\n\ninterface ErrorBoundaryProps {\n  children: React.ReactNode;\n  fallback?: React.ComponentType<{ error: BusinessLayerError; resetError: () => void }>;\n  onError?: (error: BusinessLayerError, errorInfo: React.ErrorInfo) => void;\n}\n\nconst DefaultErrorFallback: React.FC<{ error: BusinessLayerError; resetError: () => void }> = ({ \n  error, \n  resetError \n}) => {\n  // Use comprehensive error handling to format the error\n  const { title, message, actions, canRetry } = formatErrorForDisplay(error);\n\n  const handleActionClick = (action: ErrorRecoveryAction) => {\n    switch (action.type) {\n      case 'retry':\n        resetError();\n        break;\n      case 'check_connection':\n        // Could open a help modal or redirect to network troubleshooting\n        window.open('https://support.google.com/chrome/answer/95669', '_blank');\n        break;\n      case 'contact_support':\n        // Could open support modal or redirect to support page\n        console.log('Contact support requested');\n        break;\n      default:\n        console.log(`Action not implemented: ${action.type}`);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-[200px] p-6 bg-red-50 border border-red-200 rounded-lg\">\n      <div className=\"text-red-600 text-lg font-semibold mb-2\">\n        {title}\n      </div>\n      <div className=\"text-red-500 text-sm mb-4 text-center max-w-md\">\n        {message}\n      </div>\n      {error.code && (\n        <div className=\"text-red-400 text-xs mb-4\">\n          Error Code: {error.code}\n        </div>\n      )}\n      \n      {/* Recovery Actions */}\n      <div className=\"flex flex-col gap-2 w-full max-w-sm\">\n        {actions.map((action, index) => (\n          <button\n            key={index}\n            onClick={() => handleActionClick(action)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm\"\n          >\n            {action.description}\n          </button>\n        ))}\n        \n        {/* Always show reset button if no other retry action */}\n        {canRetry && !actions.some(a => a.type === 'retry') && (\n          <button\n            onClick={resetError}\n            className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\n          >\n            Try Again\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    const businessError: BusinessLayerError = {\n      name: error.name,\n      message: error.message,\n      code: 'COMPONENT_ERROR',\n      timestamp: new Date().toISOString(),\n      ...(('cause' in error) && { details: { cause: (error as Error & { cause?: unknown }).cause } }),\n    };\n\n    return {\n      hasError: true,\n      error: businessError,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    const businessError: BusinessLayerError = {\n      name: error.name,\n      message: error.message,\n      code: 'COMPONENT_ERROR',\n      timestamp: new Date().toISOString(),\n      details: {\n        componentStack: errorInfo.componentStack,\n      },\n    };\n\n    // Use comprehensive error logging system\n    logAndClassifyError(businessError, {\n      errorBoundary: true,\n      componentStack: errorInfo.componentStack,\n      timestamp: new Date().toISOString()\n    });\n\n    this.props.onError?.(businessError, errorInfo);\n    \n    // Log to console in development for debugging\n    if (process.env.NODE_ENV === 'development') {\n      console.error('ErrorBoundary caught an error:', error, errorInfo);\n    }\n  }\n\n  resetError = () => {\n    this.setState({ hasError: false, error: undefined });\n  };\n\n  render() {\n    if (this.state.hasError && this.state.error) {\n      const FallbackComponent = this.props.fallback || DefaultErrorFallback;\n      return <FallbackComponent error={this.state.error} resetError={this.resetError} />;\n    }\n\n    return this.props.children;\n  }\n}"],"names":["ErrorBoundary","DefaultErrorFallback","error","resetError","title","message","actions","canRetry","formatErrorForDisplay","handleActionClick","action","type","window","open","console","log","div","className","code","map","index","button","onClick","description","some","a","React","Component","constructor","props","setState","hasError","undefined","state","getDerivedStateFromError","businessError","name","timestamp","Date","toISOString","details","cause","componentDidCatch","errorInfo","componentStack","logAndClassifyError","errorBoundary","onError","process","env","NODE_ENV","render","FallbackComponent","fallback","children"],"mappings":"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"}
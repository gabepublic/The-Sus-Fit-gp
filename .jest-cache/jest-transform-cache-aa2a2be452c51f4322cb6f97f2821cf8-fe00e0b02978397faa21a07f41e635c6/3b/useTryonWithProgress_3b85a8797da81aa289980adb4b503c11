a86d1cbec6971a2d765530526ffe7d4a
// Try-On Hook with Progress Tracking
// Combines mutation, optimistic updates, and progress tracking for easy component integration
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    useBatchTryonWithProgress: function() {
        return useBatchTryonWithProgress;
    },
    useSimpleTryonWithProgress: function() {
        return useSimpleTryonWithProgress;
    },
    useTryonWithProgress: function() {
        return useTryonWithProgress;
    }
});
const _react = require("react");
const _useTryonMutation = require("../mutations/useTryonMutation");
const _useOptimisticUpdates = require("./useOptimisticUpdates");
/**
 * Default configuration
 */ const DEFAULT_PROGRESS_CONFIG = {
    autoOptimistic: true
};
function useTryonWithProgress(config = {}) {
    const mergedConfig = (0, _react.useMemo)(()=>({
            ...DEFAULT_PROGRESS_CONFIG,
            enableOptimisticUpdates: config.autoOptimistic !== false,
            optimisticConfig: {
                showPreview: true,
                updateHistory: true,
                showProgress: true,
                estimatedProcessingTime: 8000,
                ...config.defaultOptimisticConfig
            },
            cacheInvalidationConfig: {
                invalidateHistory: true,
                invalidateUserData: true,
                invalidateStats: true,
                invalidateTags: true,
                preloadRelated: true,
                ...config.defaultCacheConfig
            },
            ...config
        }), [
        config
    ]);
    const [currentOptimisticId, setCurrentOptimisticId] = (0, _react.useState)(null);
    // Initialize mutation hook with optimistic updates enabled
    const mutation = (0, _useTryonMutation.useTryonMutation)(mergedConfig);
    // Initialize optimistic updates hook
    const optimisticUpdates = (0, _useOptimisticUpdates.useOptimisticUpdates)({
        enabled: mergedConfig.enableOptimisticUpdates
    });
    // Enhanced execute function with automatic progress tracking
    const executeTryon = (0, _react.useCallback)(async (variables)=>{
        let optimisticId = null;
        try {
            // Start optimistic updates if enabled
            if (mergedConfig.enableOptimisticUpdates) {
                optimisticId = optimisticUpdates.startOptimistic(mergedConfig.optimisticConfig);
                setCurrentOptimisticId(optimisticId);
            }
            // Execute mutation
            const result = await mutation.mutateAsync(variables);
            // Complete optimistic updates if they were started
            if (optimisticId && mergedConfig.enableOptimisticUpdates) {
                optimisticUpdates.completeOptimistic(optimisticId, result);
                setCurrentOptimisticId(null);
            }
            return result;
        } catch (error) {
            // Rollback optimistic updates on error
            if (optimisticId && mergedConfig.enableOptimisticUpdates) {
                optimisticUpdates.rollbackOptimistic(optimisticId, error);
                setCurrentOptimisticId(null);
            }
            throw error;
        }
    }, [
        mutation,
        optimisticUpdates,
        mergedConfig
    ]);
    // Sync version that doesn't return a promise
    const executeTryonSync = (0, _react.useCallback)((variables)=>{
        executeTryon(variables).catch((error)=>{
            console.error('Try-on execution failed:', error);
        });
    }, [
        executeTryon
    ]);
    // Manual optimistic update controls
    const startOptimistic = (0, _react.useCallback)((variables)=>{
        const optimisticId = optimisticUpdates.startOptimistic(mergedConfig.optimisticConfig);
        setCurrentOptimisticId(optimisticId);
        return optimisticId;
    }, [
        optimisticUpdates,
        mergedConfig.optimisticConfig
    ]);
    const completeOptimistic = (0, _react.useCallback)((optimisticId, result)=>{
        optimisticUpdates.completeOptimistic(optimisticId, result);
        if (currentOptimisticId === optimisticId) {
            setCurrentOptimisticId(null);
        }
    }, [
        optimisticUpdates,
        currentOptimisticId
    ]);
    const rollbackOptimistic = (0, _react.useCallback)((optimisticId, error)=>{
        optimisticUpdates.rollbackOptimistic(optimisticId, error);
        if (currentOptimisticId === optimisticId) {
            setCurrentOptimisticId(null);
        }
    }, [
        optimisticUpdates,
        currentOptimisticId
    ]);
    // Derived state
    const hasActiveOptimistic = Boolean(currentOptimisticId) || optimisticUpdates.activeUpdates.length > 0;
    return {
        // Execution methods
        executeTryon,
        executeTryonSync,
        // Mutation state
        data: mutation.data,
        error: mutation.error,
        isLoading: mutation.isLoading,
        isSuccess: mutation.isSuccess,
        isError: mutation.isError,
        isIdle: mutation.isIdle,
        status: mutation.status,
        reset: mutation.reset,
        // Optimistic updates state
        currentOptimisticId,
        hasActiveOptimistic,
        activeOptimisticUpdates: optimisticUpdates.activeUpdates,
        // Manual optimistic controls
        startOptimistic,
        completeOptimistic,
        rollbackOptimistic
    };
}
function useSimpleTryonWithProgress(options = {}) {
    const config = {
        defaultOptimisticConfig: {
            showProgress: options.showProgress !== false,
            estimatedProcessingTime: options.estimatedProcessingTime || 8000
        },
        defaultCacheConfig: {
            userContext: {
                userId: options.userId,
                tags: options.tags
            }
        }
    };
    const { executeTryon, isLoading, currentOptimisticId, error, data } = useTryonWithProgress(config);
    return {
        executeTryon,
        isLoading,
        currentOptimisticId,
        error,
        data
    };
}
function useBatchTryonWithProgress(config = {}) {
    const [activeBatchIds, setActiveBatchIds] = (0, _react.useState)([]);
    const [batchResults, setBatchResults] = (0, _react.useState)({
        success: 0,
        failed: 0,
        total: 0
    });
    const tryonWithProgress = useTryonWithProgress(config);
    const executeBatch = (0, _react.useCallback)(async (variablesList)=>{
        setBatchResults({
            success: 0,
            failed: 0,
            total: variablesList.length
        });
        const batchIds = [];
        try {
            const results = await Promise.allSettled(variablesList.map(async (variables)=>{
                const optimisticId = tryonWithProgress.startOptimistic(variables);
                batchIds.push(optimisticId);
                setActiveBatchIds((prev)=>[
                        ...prev,
                        optimisticId
                    ]);
                try {
                    const result = await tryonWithProgress.executeTryon(variables);
                    setBatchResults((prev)=>({
                            ...prev,
                            success: prev.success + 1
                        }));
                    return result;
                } catch (error) {
                    setBatchResults((prev)=>({
                            ...prev,
                            failed: prev.failed + 1
                        }));
                    throw error;
                } finally{
                    setActiveBatchIds((prev)=>prev.filter((id)=>id !== optimisticId));
                }
            }));
            return results.map((result)=>{
                if (result.status === 'fulfilled') {
                    return result.value;
                } else {
                    throw result.reason;
                }
            });
        } finally{
            setActiveBatchIds([]);
        }
    }, [
        tryonWithProgress
    ]);
    const cancelBatch = (0, _react.useCallback)(()=>{
        activeBatchIds.forEach((id)=>{
            tryonWithProgress.rollbackOptimistic(id, new Error('Batch cancelled'));
        });
        setActiveBatchIds([]);
        setBatchResults({
            success: 0,
            failed: 0,
            total: 0
        });
    }, [
        activeBatchIds,
        tryonWithProgress
    ]);
    const batchProgress = (0, _react.useMemo)(()=>{
        const { success, failed, total } = batchResults;
        const completed = success + failed;
        const inProgress = total - completed;
        const progressPercentage = total > 0 ? completed / total * 100 : 0;
        return {
            total,
            completed: success,
            failed,
            inProgress,
            progressPercentage
        };
    }, [
        batchResults
    ]);
    return {
        executeBatch,
        batchProgress,
        activeBatchIds,
        cancelBatch
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3Avc3JjL2J1c2luZXNzLWxheWVyL2hvb2tzL3VzZVRyeW9uV2l0aFByb2dyZXNzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRyeS1PbiBIb29rIHdpdGggUHJvZ3Jlc3MgVHJhY2tpbmdcbi8vIENvbWJpbmVzIG11dGF0aW9uLCBvcHRpbWlzdGljIHVwZGF0ZXMsIGFuZCBwcm9ncmVzcyB0cmFja2luZyBmb3IgZWFzeSBjb21wb25lbnQgaW50ZWdyYXRpb25cblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlVHJ5b25NdXRhdGlvbiB9IGZyb20gJy4uL211dGF0aW9ucy91c2VUcnlvbk11dGF0aW9uJztcbmltcG9ydCB7IHVzZU9wdGltaXN0aWNVcGRhdGVzIH0gZnJvbSAnLi91c2VPcHRpbWlzdGljVXBkYXRlcyc7XG5pbXBvcnQgdHlwZSB7XG4gIFRyeW9uTXV0YXRpb25WYXJpYWJsZXMsXG4gIFRyeW9uTXV0YXRpb25SZXNwb25zZSxcbiAgVXNlVHJ5b25NdXRhdGlvbkNvbmZpZ1xufSBmcm9tICcuLi90eXBlcy90cnlvbi50eXBlcyc7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBmb3IgdGhlIHRyeS1vbiB3aXRoIHByb2dyZXNzIGhvb2tcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VUcnlvbldpdGhQcm9ncmVzc0NvbmZpZyBleHRlbmRzIFVzZVRyeW9uTXV0YXRpb25Db25maWcge1xuICAvKiogV2hldGhlciB0byBhdXRvbWF0aWNhbGx5IHN0YXJ0IG9wdGltaXN0aWMgdXBkYXRlcyAqL1xuICBhdXRvT3B0aW1pc3RpYz86IGJvb2xlYW47XG4gIC8qKiBEZWZhdWx0IG9wdGltaXN0aWMgY29uZmlndXJhdGlvbiAqL1xuICBkZWZhdWx0T3B0aW1pc3RpY0NvbmZpZz86IHtcbiAgICBzaG93UHJldmlldz86IGJvb2xlYW47XG4gICAgdXBkYXRlSGlzdG9yeT86IGJvb2xlYW47XG4gICAgc2hvd1Byb2dyZXNzPzogYm9vbGVhbjtcbiAgICBwcmV2aWV3UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgZXN0aW1hdGVkUHJvY2Vzc2luZ1RpbWU/OiBudW1iZXI7XG4gIH07XG4gIC8qKiBEZWZhdWx0IGNhY2hlIGludmFsaWRhdGlvbiBjb25maWd1cmF0aW9uICovXG4gIGRlZmF1bHRDYWNoZUNvbmZpZz86IHtcbiAgICBpbnZhbGlkYXRlSGlzdG9yeT86IGJvb2xlYW47XG4gICAgaW52YWxpZGF0ZVVzZXJEYXRhPzogYm9vbGVhbjtcbiAgICBpbnZhbGlkYXRlU3RhdHM/OiBib29sZWFuO1xuICAgIGludmFsaWRhdGVUYWdzPzogYm9vbGVhbjtcbiAgICBwcmVsb2FkUmVsYXRlZD86IGJvb2xlYW47XG4gICAgdXNlckNvbnRleHQ/OiB7XG4gICAgICB1c2VySWQ/OiBzdHJpbmc7XG4gICAgICB0YWdzPzogc3RyaW5nW107XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdHlwZSBmb3IgdGhlIHRyeS1vbiB3aXRoIHByb2dyZXNzIGhvb2tcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VUcnlvbldpdGhQcm9ncmVzc1JldHVybiB7XG4gIC8qKiBFeGVjdXRlIHRyeS1vbiBtdXRhdGlvbiB3aXRoIGF1dG9tYXRpYyBwcm9ncmVzcyB0cmFja2luZyAqL1xuICBleGVjdXRlVHJ5b246ICh2YXJpYWJsZXM6IFRyeW9uTXV0YXRpb25WYXJpYWJsZXMpID0+IFByb21pc2U8VHJ5b25NdXRhdGlvblJlc3BvbnNlPjtcbiAgLyoqIEV4ZWN1dGUgdHJ5LW9uIG11dGF0aW9uIHN5bmNocm9ub3VzbHkgKGZpcmUgYW5kIGZvcmdldCkgKi9cbiAgZXhlY3V0ZVRyeW9uU3luYzogKHZhcmlhYmxlczogVHJ5b25NdXRhdGlvblZhcmlhYmxlcykgPT4gdm9pZDtcbiAgLyoqIEN1cnJlbnQgbXV0YXRpb24gcmVzdWx0ICovXG4gIGRhdGE6IFRyeW9uTXV0YXRpb25SZXNwb25zZSB8IHVuZGVmaW5lZDtcbiAgLyoqIEN1cnJlbnQgZXJyb3IgKi9cbiAgZXJyb3I6IHVua25vd247XG4gIC8qKiBXaGV0aGVyIG11dGF0aW9uIGlzIGxvYWRpbmcgKi9cbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICAvKiogV2hldGhlciBtdXRhdGlvbiBzdWNjZWVkZWQgKi9cbiAgaXNTdWNjZXNzOiBib29sZWFuO1xuICAvKiogV2hldGhlciBtdXRhdGlvbiBmYWlsZWQgKi9cbiAgaXNFcnJvcjogYm9vbGVhbjtcbiAgLyoqIFdoZXRoZXIgbXV0YXRpb24gaXMgaWRsZSAqL1xuICBpc0lkbGU6IGJvb2xlYW47XG4gIC8qKiBDdXJyZW50IG11dGF0aW9uIHN0YXR1cyAqL1xuICBzdGF0dXM6ICdpZGxlJyB8ICdsb2FkaW5nJyB8ICdlcnJvcicgfCAnc3VjY2Vzcyc7XG4gIC8qKiBSZXNldCBtdXRhdGlvbiBzdGF0ZSAqL1xuICByZXNldDogKCkgPT4gdm9pZDtcbiAgLyoqIEN1cnJlbnQgb3B0aW1pc3RpYyB1cGRhdGUgSUQgKi9cbiAgY3VycmVudE9wdGltaXN0aWNJZDogc3RyaW5nIHwgbnVsbDtcbiAgLyoqIFdoZXRoZXIgb3B0aW1pc3RpYyB1cGRhdGVzIGFyZSBhY3RpdmUgKi9cbiAgaGFzQWN0aXZlT3B0aW1pc3RpYzogYm9vbGVhbjtcbiAgLyoqIFN0YXJ0IG9wdGltaXN0aWMgdXBkYXRlIG1hbnVhbGx5ICovXG4gIHN0YXJ0T3B0aW1pc3RpYzogKHZhcmlhYmxlczogVHJ5b25NdXRhdGlvblZhcmlhYmxlcykgPT4gc3RyaW5nO1xuICAvKiogQ29tcGxldGUgb3B0aW1pc3RpYyB1cGRhdGUgbWFudWFsbHkgKi9cbiAgY29tcGxldGVPcHRpbWlzdGljOiAob3B0aW1pc3RpY0lkOiBzdHJpbmcsIHJlc3VsdDogVHJ5b25NdXRhdGlvblJlc3BvbnNlKSA9PiB2b2lkO1xuICAvKiogUm9sbGJhY2sgb3B0aW1pc3RpYyB1cGRhdGUgbWFudWFsbHkgKi9cbiAgcm9sbGJhY2tPcHRpbWlzdGljOiAob3B0aW1pc3RpY0lkOiBzdHJpbmcsIGVycm9yPzogdW5rbm93bikgPT4gdm9pZDtcbiAgLyoqIEFjdGl2ZSBvcHRpbWlzdGljIHVwZGF0ZXMgKi9cbiAgYWN0aXZlT3B0aW1pc3RpY1VwZGF0ZXM6IGFueVtdO1xufVxuXG4vKipcbiAqIERlZmF1bHQgY29uZmlndXJhdGlvblxuICovXG5jb25zdCBERUZBVUxUX1BST0dSRVNTX0NPTkZJRzogUmVxdWlyZWQ8UGljazxVc2VUcnlvbldpdGhQcm9ncmVzc0NvbmZpZywgJ2F1dG9PcHRpbWlzdGljJz4+ID0ge1xuICBhdXRvT3B0aW1pc3RpYzogdHJ1ZVxufTtcblxuLyoqXG4gKiBIb29rIHRoYXQgY29tYmluZXMgdHJ5LW9uIG11dGF0aW9uIHdpdGggcHJvZ3Jlc3MgdHJhY2tpbmcgYW5kIG9wdGltaXN0aWMgdXBkYXRlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlVHJ5b25XaXRoUHJvZ3Jlc3MoXG4gIGNvbmZpZzogVXNlVHJ5b25XaXRoUHJvZ3Jlc3NDb25maWcgPSB7fVxuKTogVXNlVHJ5b25XaXRoUHJvZ3Jlc3NSZXR1cm4ge1xuICBjb25zdCBtZXJnZWRDb25maWcgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgLi4uREVGQVVMVF9QUk9HUkVTU19DT05GSUcsXG4gICAgZW5hYmxlT3B0aW1pc3RpY1VwZGF0ZXM6IGNvbmZpZy5hdXRvT3B0aW1pc3RpYyAhPT0gZmFsc2UsXG4gICAgb3B0aW1pc3RpY0NvbmZpZzoge1xuICAgICAgc2hvd1ByZXZpZXc6IHRydWUsXG4gICAgICB1cGRhdGVIaXN0b3J5OiB0cnVlLFxuICAgICAgc2hvd1Byb2dyZXNzOiB0cnVlLFxuICAgICAgZXN0aW1hdGVkUHJvY2Vzc2luZ1RpbWU6IDgwMDAsXG4gICAgICAuLi5jb25maWcuZGVmYXVsdE9wdGltaXN0aWNDb25maWdcbiAgICB9LFxuICAgIGNhY2hlSW52YWxpZGF0aW9uQ29uZmlnOiB7XG4gICAgICBpbnZhbGlkYXRlSGlzdG9yeTogdHJ1ZSxcbiAgICAgIGludmFsaWRhdGVVc2VyRGF0YTogdHJ1ZSxcbiAgICAgIGludmFsaWRhdGVTdGF0czogdHJ1ZSxcbiAgICAgIGludmFsaWRhdGVUYWdzOiB0cnVlLFxuICAgICAgcHJlbG9hZFJlbGF0ZWQ6IHRydWUsXG4gICAgICAuLi5jb25maWcuZGVmYXVsdENhY2hlQ29uZmlnXG4gICAgfSxcbiAgICAuLi5jb25maWdcbiAgfSksIFtjb25maWddKTtcblxuICBjb25zdCBbY3VycmVudE9wdGltaXN0aWNJZCwgc2V0Q3VycmVudE9wdGltaXN0aWNJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBJbml0aWFsaXplIG11dGF0aW9uIGhvb2sgd2l0aCBvcHRpbWlzdGljIHVwZGF0ZXMgZW5hYmxlZFxuICBjb25zdCBtdXRhdGlvbiA9IHVzZVRyeW9uTXV0YXRpb24obWVyZ2VkQ29uZmlnKTtcblxuICAvLyBJbml0aWFsaXplIG9wdGltaXN0aWMgdXBkYXRlcyBob29rXG4gIGNvbnN0IG9wdGltaXN0aWNVcGRhdGVzID0gdXNlT3B0aW1pc3RpY1VwZGF0ZXMoe1xuICAgIGVuYWJsZWQ6IG1lcmdlZENvbmZpZy5lbmFibGVPcHRpbWlzdGljVXBkYXRlc1xuICB9KTtcblxuICAvLyBFbmhhbmNlZCBleGVjdXRlIGZ1bmN0aW9uIHdpdGggYXV0b21hdGljIHByb2dyZXNzIHRyYWNraW5nXG4gIGNvbnN0IGV4ZWN1dGVUcnlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICh2YXJpYWJsZXM6IFRyeW9uTXV0YXRpb25WYXJpYWJsZXMpOiBQcm9taXNlPFRyeW9uTXV0YXRpb25SZXNwb25zZT4gPT4ge1xuICAgIGxldCBvcHRpbWlzdGljSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFN0YXJ0IG9wdGltaXN0aWMgdXBkYXRlcyBpZiBlbmFibGVkXG4gICAgICBpZiAobWVyZ2VkQ29uZmlnLmVuYWJsZU9wdGltaXN0aWNVcGRhdGVzKSB7XG4gICAgICAgIG9wdGltaXN0aWNJZCA9IG9wdGltaXN0aWNVcGRhdGVzLnN0YXJ0T3B0aW1pc3RpYyhtZXJnZWRDb25maWcub3B0aW1pc3RpY0NvbmZpZyk7XG4gICAgICAgIHNldEN1cnJlbnRPcHRpbWlzdGljSWQob3B0aW1pc3RpY0lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSBtdXRhdGlvblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbXV0YXRpb24ubXV0YXRlQXN5bmModmFyaWFibGVzKTtcblxuICAgICAgLy8gQ29tcGxldGUgb3B0aW1pc3RpYyB1cGRhdGVzIGlmIHRoZXkgd2VyZSBzdGFydGVkXG4gICAgICBpZiAob3B0aW1pc3RpY0lkICYmIG1lcmdlZENvbmZpZy5lbmFibGVPcHRpbWlzdGljVXBkYXRlcykge1xuICAgICAgICBvcHRpbWlzdGljVXBkYXRlcy5jb21wbGV0ZU9wdGltaXN0aWMob3B0aW1pc3RpY0lkLCByZXN1bHQpO1xuICAgICAgICBzZXRDdXJyZW50T3B0aW1pc3RpY0lkKG51bGwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBSb2xsYmFjayBvcHRpbWlzdGljIHVwZGF0ZXMgb24gZXJyb3JcbiAgICAgIGlmIChvcHRpbWlzdGljSWQgJiYgbWVyZ2VkQ29uZmlnLmVuYWJsZU9wdGltaXN0aWNVcGRhdGVzKSB7XG4gICAgICAgIG9wdGltaXN0aWNVcGRhdGVzLnJvbGxiYWNrT3B0aW1pc3RpYyhvcHRpbWlzdGljSWQsIGVycm9yKTtcbiAgICAgICAgc2V0Q3VycmVudE9wdGltaXN0aWNJZChudWxsKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSwgW211dGF0aW9uLCBvcHRpbWlzdGljVXBkYXRlcywgbWVyZ2VkQ29uZmlnXSk7XG5cbiAgLy8gU3luYyB2ZXJzaW9uIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlXG4gIGNvbnN0IGV4ZWN1dGVUcnlvblN5bmMgPSB1c2VDYWxsYmFjaygodmFyaWFibGVzOiBUcnlvbk11dGF0aW9uVmFyaWFibGVzKTogdm9pZCA9PiB7XG4gICAgZXhlY3V0ZVRyeW9uKHZhcmlhYmxlcykuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignVHJ5LW9uIGV4ZWN1dGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH0pO1xuICB9LCBbZXhlY3V0ZVRyeW9uXSk7XG5cbiAgLy8gTWFudWFsIG9wdGltaXN0aWMgdXBkYXRlIGNvbnRyb2xzXG4gIGNvbnN0IHN0YXJ0T3B0aW1pc3RpYyA9IHVzZUNhbGxiYWNrKCh2YXJpYWJsZXM6IFRyeW9uTXV0YXRpb25WYXJpYWJsZXMpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IG9wdGltaXN0aWNJZCA9IG9wdGltaXN0aWNVcGRhdGVzLnN0YXJ0T3B0aW1pc3RpYyhtZXJnZWRDb25maWcub3B0aW1pc3RpY0NvbmZpZyk7XG4gICAgc2V0Q3VycmVudE9wdGltaXN0aWNJZChvcHRpbWlzdGljSWQpO1xuICAgIHJldHVybiBvcHRpbWlzdGljSWQ7XG4gIH0sIFtvcHRpbWlzdGljVXBkYXRlcywgbWVyZ2VkQ29uZmlnLm9wdGltaXN0aWNDb25maWddKTtcblxuICBjb25zdCBjb21wbGV0ZU9wdGltaXN0aWMgPSB1c2VDYWxsYmFjaygob3B0aW1pc3RpY0lkOiBzdHJpbmcsIHJlc3VsdDogVHJ5b25NdXRhdGlvblJlc3BvbnNlKSA9PiB7XG4gICAgb3B0aW1pc3RpY1VwZGF0ZXMuY29tcGxldGVPcHRpbWlzdGljKG9wdGltaXN0aWNJZCwgcmVzdWx0KTtcbiAgICBpZiAoY3VycmVudE9wdGltaXN0aWNJZCA9PT0gb3B0aW1pc3RpY0lkKSB7XG4gICAgICBzZXRDdXJyZW50T3B0aW1pc3RpY0lkKG51bGwpO1xuICAgIH1cbiAgfSwgW29wdGltaXN0aWNVcGRhdGVzLCBjdXJyZW50T3B0aW1pc3RpY0lkXSk7XG5cbiAgY29uc3Qgcm9sbGJhY2tPcHRpbWlzdGljID0gdXNlQ2FsbGJhY2soKG9wdGltaXN0aWNJZDogc3RyaW5nLCBlcnJvcj86IHVua25vd24pID0+IHtcbiAgICBvcHRpbWlzdGljVXBkYXRlcy5yb2xsYmFja09wdGltaXN0aWMob3B0aW1pc3RpY0lkLCBlcnJvcik7XG4gICAgaWYgKGN1cnJlbnRPcHRpbWlzdGljSWQgPT09IG9wdGltaXN0aWNJZCkge1xuICAgICAgc2V0Q3VycmVudE9wdGltaXN0aWNJZChudWxsKTtcbiAgICB9XG4gIH0sIFtvcHRpbWlzdGljVXBkYXRlcywgY3VycmVudE9wdGltaXN0aWNJZF0pO1xuXG4gIC8vIERlcml2ZWQgc3RhdGVcbiAgY29uc3QgaGFzQWN0aXZlT3B0aW1pc3RpYyA9IEJvb2xlYW4oY3VycmVudE9wdGltaXN0aWNJZCkgfHwgb3B0aW1pc3RpY1VwZGF0ZXMuYWN0aXZlVXBkYXRlcy5sZW5ndGggPiAwO1xuXG4gIHJldHVybiB7XG4gICAgLy8gRXhlY3V0aW9uIG1ldGhvZHNcbiAgICBleGVjdXRlVHJ5b24sXG4gICAgZXhlY3V0ZVRyeW9uU3luYyxcbiAgICBcbiAgICAvLyBNdXRhdGlvbiBzdGF0ZVxuICAgIGRhdGE6IG11dGF0aW9uLmRhdGEsXG4gICAgZXJyb3I6IG11dGF0aW9uLmVycm9yLFxuICAgIGlzTG9hZGluZzogbXV0YXRpb24uaXNMb2FkaW5nLFxuICAgIGlzU3VjY2VzczogbXV0YXRpb24uaXNTdWNjZXNzLFxuICAgIGlzRXJyb3I6IG11dGF0aW9uLmlzRXJyb3IsXG4gICAgaXNJZGxlOiBtdXRhdGlvbi5pc0lkbGUsXG4gICAgc3RhdHVzOiBtdXRhdGlvbi5zdGF0dXMsXG4gICAgcmVzZXQ6IG11dGF0aW9uLnJlc2V0LFxuICAgIFxuICAgIC8vIE9wdGltaXN0aWMgdXBkYXRlcyBzdGF0ZVxuICAgIGN1cnJlbnRPcHRpbWlzdGljSWQsXG4gICAgaGFzQWN0aXZlT3B0aW1pc3RpYyxcbiAgICBhY3RpdmVPcHRpbWlzdGljVXBkYXRlczogb3B0aW1pc3RpY1VwZGF0ZXMuYWN0aXZlVXBkYXRlcyxcbiAgICBcbiAgICAvLyBNYW51YWwgb3B0aW1pc3RpYyBjb250cm9sc1xuICAgIHN0YXJ0T3B0aW1pc3RpYyxcbiAgICBjb21wbGV0ZU9wdGltaXN0aWMsXG4gICAgcm9sbGJhY2tPcHRpbWlzdGljXG4gIH07XG59XG5cbi8qKlxuICogU2ltcGxpZmllZCBob29rIGZvciBiYXNpYyB0cnktb24gd2l0aCBwcm9ncmVzcyAobW9zdCBjb21tb24gdXNlIGNhc2UpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTaW1wbGVUcnlvbldpdGhQcm9ncmVzcyhcbiAgb3B0aW9uczoge1xuICAgIHVzZXJJZD86IHN0cmluZztcbiAgICB0YWdzPzogc3RyaW5nW107XG4gICAgZXN0aW1hdGVkUHJvY2Vzc2luZ1RpbWU/OiBudW1iZXI7XG4gICAgc2hvd1Byb2dyZXNzPzogYm9vbGVhbjtcbiAgfSA9IHt9XG4pOiBQaWNrPFVzZVRyeW9uV2l0aFByb2dyZXNzUmV0dXJuLCAnZXhlY3V0ZVRyeW9uJyB8ICdpc0xvYWRpbmcnIHwgJ2N1cnJlbnRPcHRpbWlzdGljSWQnIHwgJ2Vycm9yJyB8ICdkYXRhJz4ge1xuICBjb25zdCBjb25maWc6IFVzZVRyeW9uV2l0aFByb2dyZXNzQ29uZmlnID0ge1xuICAgIGRlZmF1bHRPcHRpbWlzdGljQ29uZmlnOiB7XG4gICAgICBzaG93UHJvZ3Jlc3M6IG9wdGlvbnMuc2hvd1Byb2dyZXNzICE9PSBmYWxzZSxcbiAgICAgIGVzdGltYXRlZFByb2Nlc3NpbmdUaW1lOiBvcHRpb25zLmVzdGltYXRlZFByb2Nlc3NpbmdUaW1lIHx8IDgwMDBcbiAgICB9LFxuICAgIGRlZmF1bHRDYWNoZUNvbmZpZzoge1xuICAgICAgdXNlckNvbnRleHQ6IHtcbiAgICAgICAgdXNlcklkOiBvcHRpb25zLnVzZXJJZCxcbiAgICAgICAgdGFnczogb3B0aW9ucy50YWdzXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHtcbiAgICBleGVjdXRlVHJ5b24sXG4gICAgaXNMb2FkaW5nLFxuICAgIGN1cnJlbnRPcHRpbWlzdGljSWQsXG4gICAgZXJyb3IsXG4gICAgZGF0YVxuICB9ID0gdXNlVHJ5b25XaXRoUHJvZ3Jlc3MoY29uZmlnKTtcblxuICByZXR1cm4ge1xuICAgIGV4ZWN1dGVUcnlvbixcbiAgICBpc0xvYWRpbmcsXG4gICAgY3VycmVudE9wdGltaXN0aWNJZCxcbiAgICBlcnJvcixcbiAgICBkYXRhXG4gIH07XG59XG5cbi8qKlxuICogSG9vayBmb3IgYmF0Y2ggdHJ5LW9uIG9wZXJhdGlvbnMgd2l0aCBwcm9ncmVzcyB0cmFja2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQmF0Y2hUcnlvbldpdGhQcm9ncmVzcyhcbiAgY29uZmlnOiBVc2VUcnlvbldpdGhQcm9ncmVzc0NvbmZpZyA9IHt9XG4pOiB7XG4gIGV4ZWN1dGVCYXRjaDogKHZhcmlhYmxlc0xpc3Q6IFRyeW9uTXV0YXRpb25WYXJpYWJsZXNbXSkgPT4gUHJvbWlzZTxUcnlvbk11dGF0aW9uUmVzcG9uc2VbXT47XG4gIGJhdGNoUHJvZ3Jlc3M6IHtcbiAgICB0b3RhbDogbnVtYmVyO1xuICAgIGNvbXBsZXRlZDogbnVtYmVyO1xuICAgIGZhaWxlZDogbnVtYmVyO1xuICAgIGluUHJvZ3Jlc3M6IG51bWJlcjtcbiAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IG51bWJlcjtcbiAgfTtcbiAgYWN0aXZlQmF0Y2hJZHM6IHN0cmluZ1tdO1xuICBjYW5jZWxCYXRjaDogKCkgPT4gdm9pZDtcbn0ge1xuICBjb25zdCBbYWN0aXZlQmF0Y2hJZHMsIHNldEFjdGl2ZUJhdGNoSWRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtiYXRjaFJlc3VsdHMsIHNldEJhdGNoUmVzdWx0c10gPSB1c2VTdGF0ZTx7IHN1Y2Nlc3M6IG51bWJlcjsgZmFpbGVkOiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfT4oe1xuICAgIHN1Y2Nlc3M6IDAsXG4gICAgZmFpbGVkOiAwLFxuICAgIHRvdGFsOiAwXG4gIH0pO1xuXG4gIGNvbnN0IHRyeW9uV2l0aFByb2dyZXNzID0gdXNlVHJ5b25XaXRoUHJvZ3Jlc3MoY29uZmlnKTtcblxuICBjb25zdCBleGVjdXRlQmF0Y2ggPSB1c2VDYWxsYmFjayhhc3luYyAodmFyaWFibGVzTGlzdDogVHJ5b25NdXRhdGlvblZhcmlhYmxlc1tdKTogUHJvbWlzZTxUcnlvbk11dGF0aW9uUmVzcG9uc2VbXT4gPT4ge1xuICAgIHNldEJhdGNoUmVzdWx0cyh7IHN1Y2Nlc3M6IDAsIGZhaWxlZDogMCwgdG90YWw6IHZhcmlhYmxlc0xpc3QubGVuZ3RoIH0pO1xuICAgIGNvbnN0IGJhdGNoSWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoXG4gICAgICAgIHZhcmlhYmxlc0xpc3QubWFwKGFzeW5jICh2YXJpYWJsZXMpID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpbWlzdGljSWQgPSB0cnlvbldpdGhQcm9ncmVzcy5zdGFydE9wdGltaXN0aWModmFyaWFibGVzKTtcbiAgICAgICAgICBiYXRjaElkcy5wdXNoKG9wdGltaXN0aWNJZCk7XG4gICAgICAgICAgc2V0QWN0aXZlQmF0Y2hJZHMocHJldiA9PiBbLi4ucHJldiwgb3B0aW1pc3RpY0lkXSk7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJ5b25XaXRoUHJvZ3Jlc3MuZXhlY3V0ZVRyeW9uKHZhcmlhYmxlcyk7XG4gICAgICAgICAgICBzZXRCYXRjaFJlc3VsdHMocHJldiA9PiAoeyAuLi5wcmV2LCBzdWNjZXNzOiBwcmV2LnN1Y2Nlc3MgKyAxIH0pKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldEJhdGNoUmVzdWx0cyhwcmV2ID0+ICh7IC4uLnByZXYsIGZhaWxlZDogcHJldi5mYWlsZWQgKyAxIH0pKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRBY3RpdmVCYXRjaElkcyhwcmV2ID0+IHByZXYuZmlsdGVyKGlkID0+IGlkICE9PSBvcHRpbWlzdGljSWQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcmVzdWx0cy5tYXAocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyByZXN1bHQucmVhc29uO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0QWN0aXZlQmF0Y2hJZHMoW10pO1xuICAgIH1cbiAgfSwgW3RyeW9uV2l0aFByb2dyZXNzXSk7XG5cbiAgY29uc3QgY2FuY2VsQmF0Y2ggPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgYWN0aXZlQmF0Y2hJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICB0cnlvbldpdGhQcm9ncmVzcy5yb2xsYmFja09wdGltaXN0aWMoaWQsIG5ldyBFcnJvcignQmF0Y2ggY2FuY2VsbGVkJykpO1xuICAgIH0pO1xuICAgIHNldEFjdGl2ZUJhdGNoSWRzKFtdKTtcbiAgICBzZXRCYXRjaFJlc3VsdHMoeyBzdWNjZXNzOiAwLCBmYWlsZWQ6IDAsIHRvdGFsOiAwIH0pO1xuICB9LCBbYWN0aXZlQmF0Y2hJZHMsIHRyeW9uV2l0aFByb2dyZXNzXSk7XG5cbiAgY29uc3QgYmF0Y2hQcm9ncmVzcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgc3VjY2VzcywgZmFpbGVkLCB0b3RhbCB9ID0gYmF0Y2hSZXN1bHRzO1xuICAgIGNvbnN0IGNvbXBsZXRlZCA9IHN1Y2Nlc3MgKyBmYWlsZWQ7XG4gICAgY29uc3QgaW5Qcm9ncmVzcyA9IHRvdGFsIC0gY29tcGxldGVkO1xuICAgIGNvbnN0IHByb2dyZXNzUGVyY2VudGFnZSA9IHRvdGFsID4gMCA/IChjb21wbGV0ZWQgLyB0b3RhbCkgKiAxMDAgOiAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsLFxuICAgICAgY29tcGxldGVkOiBzdWNjZXNzLFxuICAgICAgZmFpbGVkLFxuICAgICAgaW5Qcm9ncmVzcyxcbiAgICAgIHByb2dyZXNzUGVyY2VudGFnZVxuICAgIH07XG4gIH0sIFtiYXRjaFJlc3VsdHNdKTtcblxuICByZXR1cm4ge1xuICAgIGV4ZWN1dGVCYXRjaCxcbiAgICBiYXRjaFByb2dyZXNzLFxuICAgIGFjdGl2ZUJhdGNoSWRzLFxuICAgIGNhbmNlbEJhdGNoXG4gIH07XG59Il0sIm5hbWVzIjpbInVzZUJhdGNoVHJ5b25XaXRoUHJvZ3Jlc3MiLCJ1c2VTaW1wbGVUcnlvbldpdGhQcm9ncmVzcyIsInVzZVRyeW9uV2l0aFByb2dyZXNzIiwiREVGQVVMVF9QUk9HUkVTU19DT05GSUciLCJhdXRvT3B0aW1pc3RpYyIsImNvbmZpZyIsIm1lcmdlZENvbmZpZyIsInVzZU1lbW8iLCJlbmFibGVPcHRpbWlzdGljVXBkYXRlcyIsIm9wdGltaXN0aWNDb25maWciLCJzaG93UHJldmlldyIsInVwZGF0ZUhpc3RvcnkiLCJzaG93UHJvZ3Jlc3MiLCJlc3RpbWF0ZWRQcm9jZXNzaW5nVGltZSIsImRlZmF1bHRPcHRpbWlzdGljQ29uZmlnIiwiY2FjaGVJbnZhbGlkYXRpb25Db25maWciLCJpbnZhbGlkYXRlSGlzdG9yeSIsImludmFsaWRhdGVVc2VyRGF0YSIsImludmFsaWRhdGVTdGF0cyIsImludmFsaWRhdGVUYWdzIiwicHJlbG9hZFJlbGF0ZWQiLCJkZWZhdWx0Q2FjaGVDb25maWciLCJjdXJyZW50T3B0aW1pc3RpY0lkIiwic2V0Q3VycmVudE9wdGltaXN0aWNJZCIsInVzZVN0YXRlIiwibXV0YXRpb24iLCJ1c2VUcnlvbk11dGF0aW9uIiwib3B0aW1pc3RpY1VwZGF0ZXMiLCJ1c2VPcHRpbWlzdGljVXBkYXRlcyIsImVuYWJsZWQiLCJleGVjdXRlVHJ5b24iLCJ1c2VDYWxsYmFjayIsInZhcmlhYmxlcyIsIm9wdGltaXN0aWNJZCIsInN0YXJ0T3B0aW1pc3RpYyIsInJlc3VsdCIsIm11dGF0ZUFzeW5jIiwiY29tcGxldGVPcHRpbWlzdGljIiwiZXJyb3IiLCJyb2xsYmFja09wdGltaXN0aWMiLCJleGVjdXRlVHJ5b25TeW5jIiwiY2F0Y2giLCJjb25zb2xlIiwiaGFzQWN0aXZlT3B0aW1pc3RpYyIsIkJvb2xlYW4iLCJhY3RpdmVVcGRhdGVzIiwibGVuZ3RoIiwiZGF0YSIsImlzTG9hZGluZyIsImlzU3VjY2VzcyIsImlzRXJyb3IiLCJpc0lkbGUiLCJzdGF0dXMiLCJyZXNldCIsImFjdGl2ZU9wdGltaXN0aWNVcGRhdGVzIiwib3B0aW9ucyIsInVzZXJDb250ZXh0IiwidXNlcklkIiwidGFncyIsImFjdGl2ZUJhdGNoSWRzIiwic2V0QWN0aXZlQmF0Y2hJZHMiLCJiYXRjaFJlc3VsdHMiLCJzZXRCYXRjaFJlc3VsdHMiLCJzdWNjZXNzIiwiZmFpbGVkIiwidG90YWwiLCJ0cnlvbldpdGhQcm9ncmVzcyIsImV4ZWN1dGVCYXRjaCIsInZhcmlhYmxlc0xpc3QiLCJiYXRjaElkcyIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsIm1hcCIsInB1c2giLCJwcmV2IiwiZmlsdGVyIiwiaWQiLCJ2YWx1ZSIsInJlYXNvbiIsImNhbmNlbEJhdGNoIiwiZm9yRWFjaCIsIkVycm9yIiwiYmF0Y2hQcm9ncmVzcyIsImNvbXBsZXRlZCIsImluUHJvZ3Jlc3MiLCJwcm9ncmVzc1BlcmNlbnRhZ2UiXSwibWFwcGluZ3MiOiJBQUFBLHFDQUFxQztBQUNyQyw4RkFBOEY7Ozs7Ozs7Ozs7OztJQThQOUVBLHlCQUF5QjtlQUF6QkE7O0lBekNBQywwQkFBMEI7ZUFBMUJBOztJQTlI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
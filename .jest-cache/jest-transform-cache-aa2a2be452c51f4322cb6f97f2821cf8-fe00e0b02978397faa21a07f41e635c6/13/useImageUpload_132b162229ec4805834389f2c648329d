1bb421867ef862967a79f55548b52482
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    UploadState: function() {
        return UploadState;
    },
    useDropzoneUpload: function() {
        return useDropzoneUpload;
    },
    useImageUpload: function() {
        return useImageUpload;
    },
    useSingleImageUpload: function() {
        return useSingleImageUpload;
    }
});
const _react = require("react");
const _businesslayer = require("../business-layer");
var UploadState = /*#__PURE__*/ function(UploadState) {
    UploadState["IDLE"] = "idle";
    UploadState["VALIDATING"] = "validating";
    UploadState["PROCESSING"] = "processing";
    UploadState["COMPLETE"] = "complete";
    UploadState["ERROR"] = "error";
    return UploadState;
}({});
/**
 * Default upload configuration
 */ const DEFAULT_CONFIG = {
    maxSizeBytes: 10 * 1024 * 1024,
    allowedTypes: [
        'image/jpeg',
        'image/png',
        'image/webp',
        'image/gif'
    ],
    generateThumbnails: true,
    thumbnailSizes: [
        150,
        300,
        600
    ],
    enableDragDrop: true,
    autoProcess: false,
    validation: {
        minWidth: 256,
        minHeight: 256,
        maxWidth: 4096,
        maxHeight: 4096,
        aspectRatio: undefined,
        aspectRatioTolerance: 0.1
    }
};
function useImageUpload(config = {}, onUpload, onError) {
    const finalConfig = {
        ...DEFAULT_CONFIG,
        ...config
    };
    // State
    const [uploadState, setUploadState] = (0, _react.useState)("idle");
    const [uploadedFiles, setUploadedFiles] = (0, _react.useState)([]);
    const [currentFile, setCurrentFile] = (0, _react.useState)(null);
    const [progress, setProgress] = (0, _react.useState)(null);
    const [error, setError] = (0, _react.useState)(null);
    const [dragDropState, setDragDropState] = (0, _react.useState)({
        isDragActive: false,
        isDragAccept: false,
        isDragReject: false,
        draggedFiles: []
    });
    // Refs
    const fileInputRef = (0, _react.useRef)(null);
    const uploadIdCounter = (0, _react.useRef)(0);
    // Business layer hooks
    const { data: validationResult } = (0, _businesslayer.useImageValidation)(currentFile?.file || null, false);
    const { data: metadata } = (0, _businesslayer.useImageMetadata)(currentFile?.file || null, false);
    const { data: thumbnail } = (0, _businesslayer.useImageThumbnail)(currentFile?.file || null, 150, false);
    // Generate unique upload ID
    const generateUploadId = (0, _react.useCallback)(()=>{
        return `upload_${Date.now()}_${++uploadIdCounter.current}`;
    }, []);
    // Update progress
    const updateProgress = (0, _react.useCallback)((stage, percentage, message)=>{
        setProgress({
            stage,
            percentage,
            message
        });
    }, []);
    // Handle errors
    const handleError = (0, _react.useCallback)((error, type = 'unknown')=>{
        const uploadError = {
            type,
            message: error instanceof Error ? error.message : String(error),
            originalError: error instanceof Error ? error : undefined
        };
        setError(uploadError);
        setUploadState("error");
        onError?.(uploadError);
    }, [
        onError
    ]);
    // Validate file
    const validateFile = (0, _react.useCallback)(async (file)=>{
        const errors = [];
        const warnings = [];
        // File type validation
        if (!finalConfig.allowedTypes.includes(file.type)) {
            errors.push(`File type ${file.type} is not supported. Allowed types: ${finalConfig.allowedTypes.join(', ')}`);
        }
        // File size validation
        if (file.size > finalConfig.maxSizeBytes) {
            errors.push(`File size ${(file.size / 1024 / 1024).toFixed(2)}MB exceeds limit of ${(finalConfig.maxSizeBytes / 1024 / 1024).toFixed(2)}MB`);
        }
        // Image dimension validation (requires metadata)
        try {
            const imageMetadata = await new Promise((resolve, reject)=>{
                const img = new Image();
                img.onload = ()=>{
                    resolve({
                        dimensions: {
                            width: img.naturalWidth,
                            height: img.naturalHeight
                        },
                        format: file.type,
                        size: file.size
                    });
                };
                img.onerror = reject;
                img.src = URL.createObjectURL(file);
            });
            const { width, height } = imageMetadata.dimensions;
            const { validation } = finalConfig;
            if (validation.minWidth && width < validation.minWidth || validation.minHeight && height < validation.minHeight) {
                errors.push(`Image dimensions ${width}x${height} are too small. Minimum: ${validation.minWidth || 0}x${validation.minHeight || 0}`);
            }
            if (validation.maxWidth && width > validation.maxWidth || validation.maxHeight && height > validation.maxHeight) {
                errors.push(`Image dimensions ${width}x${height} are too large. Maximum: ${validation.maxWidth || 'unlimited'}x${validation.maxHeight || 'unlimited'}`);
            }
            if (validation.aspectRatio) {
                const aspectRatio = width / height;
                const targetRatio = validation.aspectRatio;
                const tolerance = validation.aspectRatioTolerance || 0.1;
                if (Math.abs(aspectRatio - targetRatio) > tolerance) {
                    warnings.push(`Image aspect ratio ${aspectRatio.toFixed(2)} differs from recommended ${targetRatio.toFixed(2)}`);
                }
            }
            return {
                isValid: errors.length === 0,
                errors,
                warnings,
                metadata: imageMetadata
            };
        } catch (error) {
            errors.push('Failed to validate image dimensions');
            return {
                isValid: false,
                errors,
                warnings
            };
        }
    }, [
        finalConfig
    ]);
    // Generate thumbnails
    const generateThumbnails = (0, _react.useCallback)(async (file)=>{
        const thumbnails = {};
        if (!finalConfig.generateThumbnails) {
            return thumbnails;
        }
        try {
            for (const size of finalConfig.thumbnailSizes){
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                if (!ctx) continue;
                const img = new Image();
                await new Promise((resolve, reject)=>{
                    img.onload = resolve;
                    img.onerror = reject;
                    img.src = URL.createObjectURL(file);
                });
                // Calculate dimensions maintaining aspect ratio
                const aspectRatio = img.width / img.height;
                let width = size;
                let height = size;
                if (aspectRatio > 1) {
                    height = size / aspectRatio;
                } else {
                    width = size * aspectRatio;
                }
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);
                thumbnails[size] = canvas.toDataURL('image/jpeg', 0.8);
                URL.revokeObjectURL(img.src);
            }
        } catch (error) {
            console.warn('Failed to generate thumbnails:', error);
        }
        return thumbnails;
    }, [
        finalConfig.generateThumbnails,
        finalConfig.thumbnailSizes
    ]);
    // Process uploaded file
    const processFile = (0, _react.useCallback)(async (file)=>{
        const uploadId = generateUploadId();
        setUploadState("validating");
        updateProgress('validation', 10, 'Validating file...');
        // Validate file
        const validation = await validateFile(file);
        if (!validation.isValid) {
            throw new Error(validation.errors.join(', '));
        }
        updateProgress('processing', 30, 'Processing image...');
        // Generate preview
        const preview = URL.createObjectURL(file);
        updateProgress('thumbnail', 60, 'Generating thumbnails...');
        // Generate thumbnails
        const thumbnails = await generateThumbnails(file);
        updateProgress('complete', 80, 'Finalizing...');
        // Auto-process if enabled
        let processedResult;
        if (finalConfig.autoProcess) {
            try {
                processedResult = await (0, _businesslayer.processImageForTryon)(file);
            } catch (error) {
                console.warn('Auto-processing failed:', error);
            }
        }
        const uploadedFile = {
            file,
            preview,
            thumbnails,
            metadata: validation.metadata,
            processedResult,
            uploadId,
            uploadTime: Date.now()
        };
        updateProgress('complete', 100, 'Upload complete');
        setUploadState("complete");
        return uploadedFile;
    }, [
        generateUploadId,
        updateProgress,
        validateFile,
        generateThumbnails,
        finalConfig.autoProcess
    ]);
    // Handle file upload
    const uploadFile = (0, _react.useCallback)(async (file)=>{
        try {
            setError(null);
            const uploadedFile = await processFile(file);
            setUploadedFiles((prev)=>[
                    ...prev,
                    uploadedFile
                ]);
            setCurrentFile(uploadedFile);
            onUpload?.(uploadedFile);
            return uploadedFile;
        } catch (error) {
            handleError(error, 'processing');
            throw error;
        }
    }, [
        processFile,
        onUpload,
        handleError
    ]);
    // Handle multiple file uploads
    const uploadFiles = (0, _react.useCallback)(async (files)=>{
        const results = [];
        for (const file of files){
            try {
                const result = await uploadFile(file);
                results.push(result);
            } catch (error) {
                console.error('Failed to upload file:', file.name, error);
            }
        }
        return results;
    }, [
        uploadFile
    ]);
    // Remove uploaded file
    const removeFile = (0, _react.useCallback)((uploadId)=>{
        setUploadedFiles((prev)=>{
            const updated = prev.filter((f)=>f.uploadId !== uploadId);
            const removedFile = prev.find((f)=>f.uploadId === uploadId);
            if (removedFile) {
                URL.revokeObjectURL(removedFile.preview);
                Object.values(removedFile.thumbnails).forEach((url)=>{
                    if (url.startsWith('blob:')) {
                        URL.revokeObjectURL(url);
                    }
                });
            }
            return updated;
        });
        if (currentFile?.uploadId === uploadId) {
            setCurrentFile(null);
        }
    }, [
        currentFile
    ]);
    // Clear all files
    const clearFiles = (0, _react.useCallback)(()=>{
        uploadedFiles.forEach((file)=>{
            URL.revokeObjectURL(file.preview);
            Object.values(file.thumbnails).forEach((url)=>{
                if (url.startsWith('blob:')) {
                    URL.revokeObjectURL(url);
                }
            });
        });
        setUploadedFiles([]);
        setCurrentFile(null);
        setError(null);
        setUploadState("idle");
        setProgress(null);
    }, [
        uploadedFiles
    ]);
    // Trigger file picker
    const openFilePicker = (0, _react.useCallback)(()=>{
        fileInputRef.current?.click();
    }, []);
    // Handle file input change
    const handleFileInputChange = (0, _react.useCallback)((event)=>{
        const files = Array.from(event.target.files || []);
        if (files.length > 0) {
            uploadFiles(files);
        }
        // Reset input to allow same file selection
        event.target.value = '';
    }, [
        uploadFiles
    ]);
    // Drag and drop handlers
    const handleDragEnter = (0, _react.useCallback)((event)=>{
        event.preventDefault();
        event.stopPropagation();
        const files = Array.from(event.dataTransfer.files);
        const hasValidFiles = files.some((file)=>finalConfig.allowedTypes.includes(file.type));
        setDragDropState({
            isDragActive: true,
            isDragAccept: hasValidFiles,
            isDragReject: !hasValidFiles,
            draggedFiles: files
        });
    }, [
        finalConfig.allowedTypes
    ]);
    const handleDragLeave = (0, _react.useCallback)((event)=>{
        event.preventDefault();
        event.stopPropagation();
        setDragDropState({
            isDragActive: false,
            isDragAccept: false,
            isDragReject: false,
            draggedFiles: []
        });
    }, []);
    const handleDragOver = (0, _react.useCallback)((event)=>{
        event.preventDefault();
        event.stopPropagation();
    }, []);
    const handleDrop = (0, _react.useCallback)((event)=>{
        event.preventDefault();
        event.stopPropagation();
        const files = Array.from(event.dataTransfer.files).filter((file)=>finalConfig.allowedTypes.includes(file.type));
        setDragDropState({
            isDragActive: false,
            isDragAccept: false,
            isDragReject: false,
            draggedFiles: []
        });
        if (files.length > 0) {
            uploadFiles(files);
        }
    }, [
        finalConfig.allowedTypes,
        uploadFiles
    ]);
    // Cleanup on unmount
    (0, _react.useEffect)(()=>{
        return ()=>{
            uploadedFiles.forEach((file)=>{
                URL.revokeObjectURL(file.preview);
                Object.values(file.thumbnails).forEach((url)=>{
                    if (url.startsWith('blob:')) {
                        URL.revokeObjectURL(url);
                    }
                });
            });
        };
    }, []);
    return {
        // State
        uploadState,
        uploadedFiles,
        currentFile,
        progress,
        error,
        dragDropState,
        // Actions
        uploadFile,
        uploadFiles,
        removeFile,
        clearFiles,
        openFilePicker,
        // File input props
        fileInputProps: {
            ref: fileInputRef,
            type: 'file',
            accept: finalConfig.allowedTypes.join(','),
            multiple: true,
            onChange: handleFileInputChange,
            style: {
                display: 'none'
            }
        },
        // Drag and drop props (only if enabled)
        ...finalConfig.enableDragDrop ? {
            dragDropProps: {
                onDragEnter: handleDragEnter,
                onDragLeave: handleDragLeave,
                onDragOver: handleDragOver,
                onDrop: handleDrop
            }
        } : {},
        // Utils
        validateFile,
        generateThumbnails
    };
}
function useSingleImageUpload(config = {}, onUpload, onError) {
    const upload = useImageUpload(config, onUpload, onError);
    const uploadSingleFile = (0, _react.useCallback)(async (file)=>{
        upload.clearFiles(); // Clear previous files
        return upload.uploadFile(file);
    }, [
        upload
    ]);
    return {
        ...upload,
        uploadFile: uploadSingleFile,
        file: upload.currentFile
    };
}
function useDropzoneUpload(config = {}, onUpload, onError) {
    const upload = useImageUpload({
        ...config,
        enableDragDrop: true
    }, undefined, onError);
    // Handle batch upload completion
    (0, _react.useEffect)(()=>{
        if (upload.uploadedFiles.length > 0 && upload.uploadState === "complete") {
            onUpload?.(upload.uploadedFiles);
        }
    }, [
        upload.uploadedFiles,
        upload.uploadState,
        onUpload
    ]);
    return {
        dragDropState: upload.dragDropState,
        dragDropProps: upload.dragDropProps,
        uploadedFiles: upload.uploadedFiles,
        progress: upload.progress,
        error: upload.error,
        clearFiles: upload.clearFiles,
        removeFile: upload.removeFile
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3Avc3JjL2hvb2tzL3VzZUltYWdlVXBsb2FkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuLy8gSW1hZ2UgVXBsb2FkIEhvb2tzXG4vLyBTcGVjaWFsaXplZCBob29rcyBmb3IgaGFuZGxpbmcgZmlsZSB1cGxvYWQgb3BlcmF0aW9ucyB3aXRoIHZhbGlkYXRpb24gYW5kIHByZXZpZXcgbWFuYWdlbWVudFxuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgXG4gIHVzZUltYWdlVmFsaWRhdGlvbixcbiAgdXNlSW1hZ2VNZXRhZGF0YSxcbiAgdXNlSW1hZ2VUaHVtYm5haWwsXG4gIHByb2Nlc3NJbWFnZUZvclRyeW9uLFxuICB0eXBlIEltYWdlUHJvY2Vzc2luZ1Jlc3VsdFxufSBmcm9tICcuLi9idXNpbmVzcy1sYXllcic7XG5pbXBvcnQgeyBmaWxlVG9CYXNlNjQgfSBmcm9tICcuLi91dGlscy9pbWFnZSc7XG5cbi8qKlxuICogSW1hZ2UgbWV0YWRhdGEgaW50ZXJmYWNlXG4gKi9cbmludGVyZmFjZSBJbWFnZU1ldGFkYXRhIHtcbiAgZGltZW5zaW9uczogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9O1xuICBmb3JtYXQ6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFVwbG9hZCBzdGF0ZSBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIFVwbG9hZFN0YXRlIHtcbiAgSURMRSA9ICdpZGxlJyxcbiAgVkFMSURBVElORyA9ICd2YWxpZGF0aW5nJyxcbiAgUFJPQ0VTU0lORyA9ICdwcm9jZXNzaW5nJyxcbiAgQ09NUExFVEUgPSAnY29tcGxldGUnLFxuICBFUlJPUiA9ICdlcnJvcidcbn1cblxuLyoqXG4gKiBGaWxlIHZhbGlkYXRpb24gcmVzdWx0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVZhbGlkYXRpb25SZXN1bHQge1xuICBpc1ZhbGlkOiBib29sZWFuO1xuICBlcnJvcnM6IHN0cmluZ1tdO1xuICB3YXJuaW5nczogc3RyaW5nW107XG4gIG1ldGFkYXRhPzogSW1hZ2VNZXRhZGF0YTtcbn1cblxuLyoqXG4gKiBVcGxvYWQgcHJvZ3Jlc3MgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGxvYWRQcm9ncmVzcyB7XG4gIHN0YWdlOiAndmFsaWRhdGlvbicgfCAncHJvY2Vzc2luZycgfCAndGh1bWJuYWlsJyB8ICdjb21wbGV0ZSc7XG4gIHBlcmNlbnRhZ2U6IG51bWJlcjtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFVwbG9hZCBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkQ29uZmlnIHtcbiAgLyoqIE1heGltdW0gZmlsZSBzaXplIGluIGJ5dGVzICovXG4gIG1heFNpemVCeXRlcz86IG51bWJlcjtcbiAgLyoqIEFsbG93ZWQgZmlsZSB0eXBlcyAqL1xuICBhbGxvd2VkVHlwZXM/OiBzdHJpbmdbXTtcbiAgLyoqIEF1dG8tZ2VuZXJhdGUgdGh1bWJuYWlscyAqL1xuICBnZW5lcmF0ZVRodW1ibmFpbHM/OiBib29sZWFuO1xuICAvKiogVGh1bWJuYWlsIHNpemVzIHRvIGdlbmVyYXRlICovXG4gIHRodW1ibmFpbFNpemVzPzogbnVtYmVyW107XG4gIC8qKiBFbmFibGUgZHJhZyBhbmQgZHJvcCAqL1xuICBlbmFibGVEcmFnRHJvcD86IGJvb2xlYW47XG4gIC8qKiBBdXRvLXByb2Nlc3MgYWZ0ZXIgdXBsb2FkICovXG4gIGF1dG9Qcm9jZXNzPzogYm9vbGVhbjtcbiAgLyoqIFZhbGlkYXRpb24gb3B0aW9ucyAqL1xuICB2YWxpZGF0aW9uPzoge1xuICAgIG1pbldpZHRoPzogbnVtYmVyO1xuICAgIG1pbkhlaWdodD86IG51bWJlcjtcbiAgICBtYXhXaWR0aD86IG51bWJlcjtcbiAgICBtYXhIZWlnaHQ/OiBudW1iZXI7XG4gICAgYXNwZWN0UmF0aW8/OiBudW1iZXI7XG4gICAgYXNwZWN0UmF0aW9Ub2xlcmFuY2U/OiBudW1iZXI7XG4gIH07XG59XG5cbi8qKlxuICogVXBsb2FkZWQgZmlsZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwbG9hZGVkRmlsZSB7XG4gIGZpbGU6IEZpbGU7XG4gIHByZXZpZXc6IHN0cmluZztcbiAgdGh1bWJuYWlsczogUmVjb3JkPG51bWJlciwgc3RyaW5nPjtcbiAgbWV0YWRhdGE/OiBJbWFnZU1ldGFkYXRhO1xuICBwcm9jZXNzZWRSZXN1bHQ/OiBJbWFnZVByb2Nlc3NpbmdSZXN1bHQ7XG4gIHVwbG9hZElkOiBzdHJpbmc7XG4gIHVwbG9hZFRpbWU6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBVcGxvYWQgZXJyb3JcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGxvYWRFcnJvciB7XG4gIHR5cGU6ICd2YWxpZGF0aW9uJyB8ICdwcm9jZXNzaW5nJyB8ICduZXR3b3JrJyB8ICd1bmtub3duJztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlPzogc3RyaW5nO1xuICBvcmlnaW5hbEVycm9yPzogRXJyb3I7XG59XG5cbi8qKlxuICogRHJhZyBhbmQgZHJvcCBzdGF0ZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIERyYWdEcm9wU3RhdGUge1xuICBpc0RyYWdBY3RpdmU6IGJvb2xlYW47XG4gIGlzRHJhZ0FjY2VwdDogYm9vbGVhbjtcbiAgaXNEcmFnUmVqZWN0OiBib29sZWFuO1xuICBkcmFnZ2VkRmlsZXM6IEZpbGVbXTtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IHVwbG9hZCBjb25maWd1cmF0aW9uXG4gKi9cbmNvbnN0IERFRkFVTFRfQ09ORklHOiBSZXF1aXJlZDxVcGxvYWRDb25maWc+ID0ge1xuICBtYXhTaXplQnl0ZXM6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUJcbiAgYWxsb3dlZFR5cGVzOiBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3dlYnAnLCAnaW1hZ2UvZ2lmJ10sXG4gIGdlbmVyYXRlVGh1bWJuYWlsczogdHJ1ZSxcbiAgdGh1bWJuYWlsU2l6ZXM6IFsxNTAsIDMwMCwgNjAwXSxcbiAgZW5hYmxlRHJhZ0Ryb3A6IHRydWUsXG4gIGF1dG9Qcm9jZXNzOiBmYWxzZSxcbiAgdmFsaWRhdGlvbjoge1xuICAgIG1pbldpZHRoOiAyNTYsXG4gICAgbWluSGVpZ2h0OiAyNTYsXG4gICAgbWF4V2lkdGg6IDQwOTYsXG4gICAgbWF4SGVpZ2h0OiA0MDk2LFxuICAgIGFzcGVjdFJhdGlvOiB1bmRlZmluZWQsXG4gICAgYXNwZWN0UmF0aW9Ub2xlcmFuY2U6IDAuMVxuICB9XG59O1xuXG4vKipcbiAqIE1haW4gaW1hZ2UgdXBsb2FkIGhvb2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUltYWdlVXBsb2FkKFxuICBjb25maWc6IFVwbG9hZENvbmZpZyA9IHt9LFxuICBvblVwbG9hZD86IChmaWxlOiBVcGxvYWRlZEZpbGUpID0+IHZvaWQsXG4gIG9uRXJyb3I/OiAoZXJyb3I6IFVwbG9hZEVycm9yKSA9PiB2b2lkXG4pIHtcbiAgY29uc3QgZmluYWxDb25maWcgPSB7IC4uLkRFRkFVTFRfQ09ORklHLCAuLi5jb25maWcgfTtcbiAgXG4gIC8vIFN0YXRlXG4gIGNvbnN0IFt1cGxvYWRTdGF0ZSwgc2V0VXBsb2FkU3RhdGVdID0gdXNlU3RhdGU8VXBsb2FkU3RhdGU+KFVwbG9hZFN0YXRlLklETEUpO1xuICBjb25zdCBbdXBsb2FkZWRGaWxlcywgc2V0VXBsb2FkZWRGaWxlc10gPSB1c2VTdGF0ZTxVcGxvYWRlZEZpbGVbXT4oW10pO1xuICBjb25zdCBbY3VycmVudEZpbGUsIHNldEN1cnJlbnRGaWxlXSA9IHVzZVN0YXRlPFVwbG9hZGVkRmlsZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlPFVwbG9hZFByb2dyZXNzIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8VXBsb2FkRXJyb3IgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2RyYWdEcm9wU3RhdGUsIHNldERyYWdEcm9wU3RhdGVdID0gdXNlU3RhdGU8RHJhZ0Ryb3BTdGF0ZT4oe1xuICAgIGlzRHJhZ0FjdGl2ZTogZmFsc2UsXG4gICAgaXNEcmFnQWNjZXB0OiBmYWxzZSxcbiAgICBpc0RyYWdSZWplY3Q6IGZhbHNlLFxuICAgIGRyYWdnZWRGaWxlczogW11cbiAgfSk7XG5cbiAgLy8gUmVmc1xuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IHVwbG9hZElkQ291bnRlciA9IHVzZVJlZigwKTtcblxuICAvLyBCdXNpbmVzcyBsYXllciBob29rc1xuICBjb25zdCB7IGRhdGE6IHZhbGlkYXRpb25SZXN1bHQgfSA9IHVzZUltYWdlVmFsaWRhdGlvbihjdXJyZW50RmlsZT8uZmlsZSB8fCBudWxsLCBmYWxzZSk7XG4gIGNvbnN0IHsgZGF0YTogbWV0YWRhdGEgfSA9IHVzZUltYWdlTWV0YWRhdGEoY3VycmVudEZpbGU/LmZpbGUgfHwgbnVsbCwgZmFsc2UpO1xuICBjb25zdCB7IGRhdGE6IHRodW1ibmFpbCB9ID0gdXNlSW1hZ2VUaHVtYm5haWwoY3VycmVudEZpbGU/LmZpbGUgfHwgbnVsbCwgMTUwLCBmYWxzZSk7XG5cbiAgLy8gR2VuZXJhdGUgdW5pcXVlIHVwbG9hZCBJRFxuICBjb25zdCBnZW5lcmF0ZVVwbG9hZElkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBgdXBsb2FkXyR7RGF0ZS5ub3coKX1fJHsrK3VwbG9hZElkQ291bnRlci5jdXJyZW50fWA7XG4gIH0sIFtdKTtcblxuICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgY29uc3QgdXBkYXRlUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoc3RhZ2U6IFVwbG9hZFByb2dyZXNzWydzdGFnZSddLCBwZXJjZW50YWdlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgIHNldFByb2dyZXNzKHsgc3RhZ2UsIHBlcmNlbnRhZ2UsIG1lc3NhZ2UgfSk7XG4gIH0sIFtdKTtcblxuICAvLyBIYW5kbGUgZXJyb3JzXG4gIGNvbnN0IGhhbmRsZUVycm9yID0gdXNlQ2FsbGJhY2soKGVycm9yOiB1bmtub3duLCB0eXBlOiBVcGxvYWRFcnJvclsndHlwZSddID0gJ3Vua25vd24nKSA9PiB7XG4gICAgY29uc3QgdXBsb2FkRXJyb3I6IFVwbG9hZEVycm9yID0ge1xuICAgICAgdHlwZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IHVuZGVmaW5lZFxuICAgIH07XG5cbiAgICBzZXRFcnJvcih1cGxvYWRFcnJvcik7XG4gICAgc2V0VXBsb2FkU3RhdGUoVXBsb2FkU3RhdGUuRVJST1IpO1xuICAgIG9uRXJyb3I/Lih1cGxvYWRFcnJvcik7XG4gIH0sIFtvbkVycm9yXSk7XG5cbiAgLy8gVmFsaWRhdGUgZmlsZVxuICBjb25zdCB2YWxpZGF0ZUZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAoZmlsZTogRmlsZSk6IFByb21pc2U8RmlsZVZhbGlkYXRpb25SZXN1bHQ+ID0+IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBGaWxlIHR5cGUgdmFsaWRhdGlvblxuICAgIGlmICghZmluYWxDb25maWcuYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKGBGaWxlIHR5cGUgJHtmaWxlLnR5cGV9IGlzIG5vdCBzdXBwb3J0ZWQuIEFsbG93ZWQgdHlwZXM6ICR7ZmluYWxDb25maWcuYWxsb3dlZFR5cGVzLmpvaW4oJywgJyl9YCk7XG4gICAgfVxuXG4gICAgLy8gRmlsZSBzaXplIHZhbGlkYXRpb25cbiAgICBpZiAoZmlsZS5zaXplID4gZmluYWxDb25maWcubWF4U2l6ZUJ5dGVzKSB7XG4gICAgICBlcnJvcnMucHVzaChgRmlsZSBzaXplICR7KGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfU1CIGV4Y2VlZHMgbGltaXQgb2YgJHsoZmluYWxDb25maWcubWF4U2l6ZUJ5dGVzIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9TUJgKTtcbiAgICB9XG5cbiAgICAvLyBJbWFnZSBkaW1lbnNpb24gdmFsaWRhdGlvbiAocmVxdWlyZXMgbWV0YWRhdGEpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGltYWdlTWV0YWRhdGEgPSBhd2FpdCBuZXcgUHJvbWlzZTxJbWFnZU1ldGFkYXRhPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgZGltZW5zaW9uczogeyB3aWR0aDogaW1nLm5hdHVyYWxXaWR0aCwgaGVpZ2h0OiBpbWcubmF0dXJhbEhlaWdodCB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmaWxlLnR5cGUsXG4gICAgICAgICAgICBzaXplOiBmaWxlLnNpemVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gaW1hZ2VNZXRhZGF0YS5kaW1lbnNpb25zO1xuICAgICAgY29uc3QgeyB2YWxpZGF0aW9uIH0gPSBmaW5hbENvbmZpZztcblxuICAgICAgaWYgKCh2YWxpZGF0aW9uLm1pbldpZHRoICYmIHdpZHRoIDwgdmFsaWRhdGlvbi5taW5XaWR0aCkgfHwgKHZhbGlkYXRpb24ubWluSGVpZ2h0ICYmIGhlaWdodCA8IHZhbGlkYXRpb24ubWluSGVpZ2h0KSkge1xuICAgICAgICBlcnJvcnMucHVzaChgSW1hZ2UgZGltZW5zaW9ucyAke3dpZHRofXgke2hlaWdodH0gYXJlIHRvbyBzbWFsbC4gTWluaW11bTogJHt2YWxpZGF0aW9uLm1pbldpZHRoIHx8IDB9eCR7dmFsaWRhdGlvbi5taW5IZWlnaHQgfHwgMH1gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCh2YWxpZGF0aW9uLm1heFdpZHRoICYmIHdpZHRoID4gdmFsaWRhdGlvbi5tYXhXaWR0aCkgfHwgKHZhbGlkYXRpb24ubWF4SGVpZ2h0ICYmIGhlaWdodCA+IHZhbGlkYXRpb24ubWF4SGVpZ2h0KSkge1xuICAgICAgICBlcnJvcnMucHVzaChgSW1hZ2UgZGltZW5zaW9ucyAke3dpZHRofXgke2hlaWdodH0gYXJlIHRvbyBsYXJnZS4gTWF4aW11bTogJHt2YWxpZGF0aW9uLm1heFdpZHRoIHx8ICd1bmxpbWl0ZWQnfXgke3ZhbGlkYXRpb24ubWF4SGVpZ2h0IHx8ICd1bmxpbWl0ZWQnfWApO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWRhdGlvbi5hc3BlY3RSYXRpbykge1xuICAgICAgICBjb25zdCBhc3BlY3RSYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgICAgICBjb25zdCB0YXJnZXRSYXRpbyA9IHZhbGlkYXRpb24uYXNwZWN0UmF0aW87XG4gICAgICAgIGNvbnN0IHRvbGVyYW5jZSA9IHZhbGlkYXRpb24uYXNwZWN0UmF0aW9Ub2xlcmFuY2UgfHwgMC4xO1xuICAgICAgICBcbiAgICAgICAgaWYgKE1hdGguYWJzKGFzcGVjdFJhdGlvIC0gdGFyZ2V0UmF0aW8pID4gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgd2FybmluZ3MucHVzaChgSW1hZ2UgYXNwZWN0IHJhdGlvICR7YXNwZWN0UmF0aW8udG9GaXhlZCgyKX0gZGlmZmVycyBmcm9tIHJlY29tbWVuZGVkICR7dGFyZ2V0UmF0aW8udG9GaXhlZCgyKX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgICBlcnJvcnMsXG4gICAgICAgIHdhcm5pbmdzLFxuICAgICAgICBtZXRhZGF0YTogaW1hZ2VNZXRhZGF0YVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXJyb3JzLnB1c2goJ0ZhaWxlZCB0byB2YWxpZGF0ZSBpbWFnZSBkaW1lbnNpb25zJyk7XG4gICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JzLCB3YXJuaW5ncyB9O1xuICAgIH1cbiAgfSwgW2ZpbmFsQ29uZmlnXSk7XG5cbiAgLy8gR2VuZXJhdGUgdGh1bWJuYWlsc1xuICBjb25zdCBnZW5lcmF0ZVRodW1ibmFpbHMgPSB1c2VDYWxsYmFjayhhc3luYyAoZmlsZTogRmlsZSk6IFByb21pc2U8UmVjb3JkPG51bWJlciwgc3RyaW5nPj4gPT4ge1xuICAgIGNvbnN0IHRodW1ibmFpbHM6IFJlY29yZDxudW1iZXIsIHN0cmluZz4gPSB7fTtcblxuICAgIGlmICghZmluYWxDb25maWcuZ2VuZXJhdGVUaHVtYm5haWxzKSB7XG4gICAgICByZXR1cm4gdGh1bWJuYWlscztcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgZm9yIChjb25zdCBzaXplIG9mIGZpbmFsQ29uZmlnLnRodW1ibmFpbFNpemVzKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghY3R4KSBjb250aW51ZTtcblxuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGltZy5vbmxvYWQgPSByZXNvbHZlO1xuICAgICAgICAgIGltZy5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgZGltZW5zaW9ucyBtYWludGFpbmluZyBhc3BlY3QgcmF0aW9cbiAgICAgICAgY29uc3QgYXNwZWN0UmF0aW8gPSBpbWcud2lkdGggLyBpbWcuaGVpZ2h0O1xuICAgICAgICBsZXQgd2lkdGggPSBzaXplO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gc2l6ZTtcblxuICAgICAgICBpZiAoYXNwZWN0UmF0aW8gPiAxKSB7XG4gICAgICAgICAgaGVpZ2h0ID0gc2l6ZSAvIGFzcGVjdFJhdGlvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpZHRoID0gc2l6ZSAqIGFzcGVjdFJhdGlvO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICB0aHVtYm5haWxzW3NpemVdID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIDAuOCk7XG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoaW1nLnNyYyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdlbmVyYXRlIHRodW1ibmFpbHM6JywgZXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiB0aHVtYm5haWxzO1xuICB9LCBbZmluYWxDb25maWcuZ2VuZXJhdGVUaHVtYm5haWxzLCBmaW5hbENvbmZpZy50aHVtYm5haWxTaXplc10pO1xuXG4gIC8vIFByb2Nlc3MgdXBsb2FkZWQgZmlsZVxuICBjb25zdCBwcm9jZXNzRmlsZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlOiBGaWxlKTogUHJvbWlzZTxVcGxvYWRlZEZpbGU+ID0+IHtcbiAgICBjb25zdCB1cGxvYWRJZCA9IGdlbmVyYXRlVXBsb2FkSWQoKTtcbiAgICBcbiAgICBzZXRVcGxvYWRTdGF0ZShVcGxvYWRTdGF0ZS5WQUxJREFUSU5HKTtcbiAgICB1cGRhdGVQcm9ncmVzcygndmFsaWRhdGlvbicsIDEwLCAnVmFsaWRhdGluZyBmaWxlLi4uJyk7XG5cbiAgICAvLyBWYWxpZGF0ZSBmaWxlXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHZhbGlkYXRlRmlsZShmaWxlKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb24uZXJyb3JzLmpvaW4oJywgJykpO1xuICAgIH1cblxuICAgIHVwZGF0ZVByb2dyZXNzKCdwcm9jZXNzaW5nJywgMzAsICdQcm9jZXNzaW5nIGltYWdlLi4uJyk7XG5cbiAgICAvLyBHZW5lcmF0ZSBwcmV2aWV3XG4gICAgY29uc3QgcHJldmlldyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG5cbiAgICB1cGRhdGVQcm9ncmVzcygndGh1bWJuYWlsJywgNjAsICdHZW5lcmF0aW5nIHRodW1ibmFpbHMuLi4nKTtcblxuICAgIC8vIEdlbmVyYXRlIHRodW1ibmFpbHNcbiAgICBjb25zdCB0aHVtYm5haWxzID0gYXdhaXQgZ2VuZXJhdGVUaHVtYm5haWxzKGZpbGUpO1xuXG4gICAgdXBkYXRlUHJvZ3Jlc3MoJ2NvbXBsZXRlJywgODAsICdGaW5hbGl6aW5nLi4uJyk7XG5cbiAgICAvLyBBdXRvLXByb2Nlc3MgaWYgZW5hYmxlZFxuICAgIGxldCBwcm9jZXNzZWRSZXN1bHQ6IEltYWdlUHJvY2Vzc2luZ1Jlc3VsdCB8IHVuZGVmaW5lZDtcbiAgICBpZiAoZmluYWxDb25maWcuYXV0b1Byb2Nlc3MpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHByb2Nlc3NlZFJlc3VsdCA9IGF3YWl0IHByb2Nlc3NJbWFnZUZvclRyeW9uKGZpbGUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdBdXRvLXByb2Nlc3NpbmcgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1cGxvYWRlZEZpbGU6IFVwbG9hZGVkRmlsZSA9IHtcbiAgICAgIGZpbGUsXG4gICAgICBwcmV2aWV3LFxuICAgICAgdGh1bWJuYWlscyxcbiAgICAgIG1ldGFkYXRhOiB2YWxpZGF0aW9uLm1ldGFkYXRhLFxuICAgICAgcHJvY2Vzc2VkUmVzdWx0LFxuICAgICAgdXBsb2FkSWQsXG4gICAgICB1cGxvYWRUaW1lOiBEYXRlLm5vdygpXG4gICAgfTtcblxuICAgIHVwZGF0ZVByb2dyZXNzKCdjb21wbGV0ZScsIDEwMCwgJ1VwbG9hZCBjb21wbGV0ZScpO1xuICAgIHNldFVwbG9hZFN0YXRlKFVwbG9hZFN0YXRlLkNPTVBMRVRFKTtcblxuICAgIHJldHVybiB1cGxvYWRlZEZpbGU7XG4gIH0sIFtnZW5lcmF0ZVVwbG9hZElkLCB1cGRhdGVQcm9ncmVzcywgdmFsaWRhdGVGaWxlLCBnZW5lcmF0ZVRodW1ibmFpbHMsIGZpbmFsQ29uZmlnLmF1dG9Qcm9jZXNzXSk7XG5cbiAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkXG4gIGNvbnN0IHVwbG9hZEZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAoZmlsZTogRmlsZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZSA9IGF3YWl0IHByb2Nlc3NGaWxlKGZpbGUpO1xuICAgICAgXG4gICAgICBzZXRVcGxvYWRlZEZpbGVzKHByZXYgPT4gWy4uLnByZXYsIHVwbG9hZGVkRmlsZV0pO1xuICAgICAgc2V0Q3VycmVudEZpbGUodXBsb2FkZWRGaWxlKTtcbiAgICAgIG9uVXBsb2FkPy4odXBsb2FkZWRGaWxlKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHVwbG9hZGVkRmlsZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsICdwcm9jZXNzaW5nJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFtwcm9jZXNzRmlsZSwgb25VcGxvYWQsIGhhbmRsZUVycm9yXSk7XG5cbiAgLy8gSGFuZGxlIG11bHRpcGxlIGZpbGUgdXBsb2Fkc1xuICBjb25zdCB1cGxvYWRGaWxlcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlczogRmlsZVtdKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogVXBsb2FkZWRGaWxlW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwbG9hZEZpbGUoZmlsZSk7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwbG9hZCBmaWxlOicsIGZpbGUubmFtZSwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSwgW3VwbG9hZEZpbGVdKTtcblxuICAvLyBSZW1vdmUgdXBsb2FkZWQgZmlsZVxuICBjb25zdCByZW1vdmVGaWxlID0gdXNlQ2FsbGJhY2soKHVwbG9hZElkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRVcGxvYWRlZEZpbGVzKHByZXYgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlZCA9IHByZXYuZmlsdGVyKGYgPT4gZi51cGxvYWRJZCAhPT0gdXBsb2FkSWQpO1xuICAgICAgY29uc3QgcmVtb3ZlZEZpbGUgPSBwcmV2LmZpbmQoZiA9PiBmLnVwbG9hZElkID09PSB1cGxvYWRJZCk7XG4gICAgICBcbiAgICAgIGlmIChyZW1vdmVkRmlsZSkge1xuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHJlbW92ZWRGaWxlLnByZXZpZXcpO1xuICAgICAgICBPYmplY3QudmFsdWVzKHJlbW92ZWRGaWxlLnRodW1ibmFpbHMpLmZvckVhY2godXJsID0+IHtcbiAgICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoY3VycmVudEZpbGU/LnVwbG9hZElkID09PSB1cGxvYWRJZCkge1xuICAgICAgc2V0Q3VycmVudEZpbGUobnVsbCk7XG4gICAgfVxuICB9LCBbY3VycmVudEZpbGVdKTtcblxuICAvLyBDbGVhciBhbGwgZmlsZXNcbiAgY29uc3QgY2xlYXJGaWxlcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICB1cGxvYWRlZEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGZpbGUucHJldmlldyk7XG4gICAgICBPYmplY3QudmFsdWVzKGZpbGUudGh1bWJuYWlscykuZm9yRWFjaCh1cmwgPT4ge1xuICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcbiAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHNldFVwbG9hZGVkRmlsZXMoW10pO1xuICAgIHNldEN1cnJlbnRGaWxlKG51bGwpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHNldFVwbG9hZFN0YXRlKFVwbG9hZFN0YXRlLklETEUpO1xuICAgIHNldFByb2dyZXNzKG51bGwpO1xuICB9LCBbdXBsb2FkZWRGaWxlc10pO1xuXG4gIC8vIFRyaWdnZXIgZmlsZSBwaWNrZXJcbiAgY29uc3Qgb3BlbkZpbGVQaWNrZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZmlsZUlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCk7XG4gIH0sIFtdKTtcblxuICAvLyBIYW5kbGUgZmlsZSBpbnB1dCBjaGFuZ2VcbiAgY29uc3QgaGFuZGxlRmlsZUlucHV0Q2hhbmdlID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQuZmlsZXMgfHwgW10pO1xuICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICB1cGxvYWRGaWxlcyhmaWxlcyk7XG4gICAgfVxuICAgIC8vIFJlc2V0IGlucHV0IHRvIGFsbG93IHNhbWUgZmlsZSBzZWxlY3Rpb25cbiAgICBldmVudC50YXJnZXQudmFsdWUgPSAnJztcbiAgfSwgW3VwbG9hZEZpbGVzXSk7XG5cbiAgLy8gRHJhZyBhbmQgZHJvcCBoYW5kbGVyc1xuICBjb25zdCBoYW5kbGVEcmFnRW50ZXIgPSB1c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgXG4gICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcyk7XG4gICAgY29uc3QgaGFzVmFsaWRGaWxlcyA9IGZpbGVzLnNvbWUoZmlsZSA9PiBmaW5hbENvbmZpZy5hbGxvd2VkVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSk7XG4gICAgXG4gICAgc2V0RHJhZ0Ryb3BTdGF0ZSh7XG4gICAgICBpc0RyYWdBY3RpdmU6IHRydWUsXG4gICAgICBpc0RyYWdBY2NlcHQ6IGhhc1ZhbGlkRmlsZXMsXG4gICAgICBpc0RyYWdSZWplY3Q6ICFoYXNWYWxpZEZpbGVzLFxuICAgICAgZHJhZ2dlZEZpbGVzOiBmaWxlc1xuICAgIH0pO1xuICB9LCBbZmluYWxDb25maWcuYWxsb3dlZFR5cGVzXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJhZ0xlYXZlID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIFxuICAgIHNldERyYWdEcm9wU3RhdGUoe1xuICAgICAgaXNEcmFnQWN0aXZlOiBmYWxzZSxcbiAgICAgIGlzRHJhZ0FjY2VwdDogZmFsc2UsXG4gICAgICBpc0RyYWdSZWplY3Q6IGZhbHNlLFxuICAgICAgZHJhZ2dlZEZpbGVzOiBbXVxuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJhZ092ZXIgPSB1c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVEcm9wID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShldmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpLmZpbHRlcihmaWxlID0+IFxuICAgICAgZmluYWxDb25maWcuYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSlcbiAgICApO1xuICAgIFxuICAgIHNldERyYWdEcm9wU3RhdGUoe1xuICAgICAgaXNEcmFnQWN0aXZlOiBmYWxzZSxcbiAgICAgIGlzRHJhZ0FjY2VwdDogZmFsc2UsXG4gICAgICBpc0RyYWdSZWplY3Q6IGZhbHNlLFxuICAgICAgZHJhZ2dlZEZpbGVzOiBbXVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICB1cGxvYWRGaWxlcyhmaWxlcyk7XG4gICAgfVxuICB9LCBbZmluYWxDb25maWcuYWxsb3dlZFR5cGVzLCB1cGxvYWRGaWxlc10pO1xuXG4gIC8vIENsZWFudXAgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1cGxvYWRlZEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoZmlsZS5wcmV2aWV3KTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhmaWxlLnRodW1ibmFpbHMpLmZvckVhY2godXJsID0+IHtcbiAgICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgLy8gU3RhdGVcbiAgICB1cGxvYWRTdGF0ZSxcbiAgICB1cGxvYWRlZEZpbGVzLFxuICAgIGN1cnJlbnRGaWxlLFxuICAgIHByb2dyZXNzLFxuICAgIGVycm9yLFxuICAgIGRyYWdEcm9wU3RhdGUsXG4gICAgXG4gICAgLy8gQWN0aW9uc1xuICAgIHVwbG9hZEZpbGUsXG4gICAgdXBsb2FkRmlsZXMsXG4gICAgcmVtb3ZlRmlsZSxcbiAgICBjbGVhckZpbGVzLFxuICAgIG9wZW5GaWxlUGlja2VyLFxuICAgIFxuICAgIC8vIEZpbGUgaW5wdXQgcHJvcHNcbiAgICBmaWxlSW5wdXRQcm9wczoge1xuICAgICAgcmVmOiBmaWxlSW5wdXRSZWYsXG4gICAgICB0eXBlOiAnZmlsZScsXG4gICAgICBhY2NlcHQ6IGZpbmFsQ29uZmlnLmFsbG93ZWRUeXBlcy5qb2luKCcsJyksXG4gICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVGaWxlSW5wdXRDaGFuZ2UsXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiAnbm9uZScgfVxuICAgIH0sXG4gICAgXG4gICAgLy8gRHJhZyBhbmQgZHJvcCBwcm9wcyAob25seSBpZiBlbmFibGVkKVxuICAgIC4uLihmaW5hbENvbmZpZy5lbmFibGVEcmFnRHJvcCA/IHtcbiAgICAgIGRyYWdEcm9wUHJvcHM6IHtcbiAgICAgICAgb25EcmFnRW50ZXI6IGhhbmRsZURyYWdFbnRlcixcbiAgICAgICAgb25EcmFnTGVhdmU6IGhhbmRsZURyYWdMZWF2ZSxcbiAgICAgICAgb25EcmFnT3ZlcjogaGFuZGxlRHJhZ092ZXIsXG4gICAgICAgIG9uRHJvcDogaGFuZGxlRHJvcFxuICAgICAgfVxuICAgIH0gOiB7fSksXG4gICAgXG4gICAgLy8gVXRpbHNcbiAgICB2YWxpZGF0ZUZpbGUsXG4gICAgZ2VuZXJhdGVUaHVtYm5haWxzXG4gIH07XG59XG5cbi8qKlxuICogU2ltcGxpZmllZCBob29rIGZvciBzaW5nbGUgZmlsZSB1cGxvYWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVNpbmdsZUltYWdlVXBsb2FkKFxuICBjb25maWc6IFVwbG9hZENvbmZpZyA9IHt9LFxuICBvblVwbG9hZD86IChmaWxlOiBVcGxvYWRlZEZpbGUpID0+IHZvaWQsXG4gIG9uRXJyb3I/OiAoZXJyb3I6IFVwbG9hZEVycm9yKSA9PiB2b2lkXG4pIHtcbiAgY29uc3QgdXBsb2FkID0gdXNlSW1hZ2VVcGxvYWQoY29uZmlnLCBvblVwbG9hZCwgb25FcnJvcik7XG4gIFxuICBjb25zdCB1cGxvYWRTaW5nbGVGaWxlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbGU6IEZpbGUpID0+IHtcbiAgICB1cGxvYWQuY2xlYXJGaWxlcygpOyAvLyBDbGVhciBwcmV2aW91cyBmaWxlc1xuICAgIHJldHVybiB1cGxvYWQudXBsb2FkRmlsZShmaWxlKTtcbiAgfSwgW3VwbG9hZF0pO1xuICBcbiAgcmV0dXJuIHtcbiAgICAuLi51cGxvYWQsXG4gICAgdXBsb2FkRmlsZTogdXBsb2FkU2luZ2xlRmlsZSxcbiAgICBmaWxlOiB1cGxvYWQuY3VycmVudEZpbGVcbiAgfTtcbn1cblxuLyoqXG4gKiBIb29rIGZvciBkcmFnIGFuZCBkcm9wIG9ubHkgdXBsb2FkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VEcm9wem9uZVVwbG9hZChcbiAgY29uZmlnOiBVcGxvYWRDb25maWcgPSB7fSxcbiAgb25VcGxvYWQ/OiAoZmlsZXM6IFVwbG9hZGVkRmlsZVtdKSA9PiB2b2lkLFxuICBvbkVycm9yPzogKGVycm9yOiBVcGxvYWRFcnJvcikgPT4gdm9pZFxuKSB7XG4gIGNvbnN0IHVwbG9hZCA9IHVzZUltYWdlVXBsb2FkKFxuICAgIHsgLi4uY29uZmlnLCBlbmFibGVEcmFnRHJvcDogdHJ1ZSB9LFxuICAgIHVuZGVmaW5lZCxcbiAgICBvbkVycm9yXG4gICk7XG4gIFxuICAvLyBIYW5kbGUgYmF0Y2ggdXBsb2FkIGNvbXBsZXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodXBsb2FkLnVwbG9hZGVkRmlsZXMubGVuZ3RoID4gMCAmJiB1cGxvYWQudXBsb2FkU3RhdGUgPT09IFVwbG9hZFN0YXRlLkNPTVBMRVRFKSB7XG4gICAgICBvblVwbG9hZD8uKHVwbG9hZC51cGxvYWRlZEZpbGVzKTtcbiAgICB9XG4gIH0sIFt1cGxvYWQudXBsb2FkZWRGaWxlcywgdXBsb2FkLnVwbG9hZFN0YXRlLCBvblVwbG9hZF0pO1xuICBcbiAgcmV0dXJuIHtcbiAgICBkcmFnRHJvcFN0YXRlOiB1cGxvYWQuZHJhZ0Ryb3BTdGF0ZSxcbiAgICBkcmFnRHJvcFByb3BzOiB1cGxvYWQuZHJhZ0Ryb3BQcm9wcyxcbiAgICB1cGxvYWRlZEZpbGVzOiB1cGxvYWQudXBsb2FkZWRGaWxlcyxcbiAgICBwcm9ncmVzczogdXBsb2FkLnByb2dyZXNzLFxuICAgIGVycm9yOiB1cGxvYWQuZXJyb3IsXG4gICAgY2xlYXJGaWxlczogdXBsb2FkLmNsZWFyRmlsZXMsXG4gICAgcmVtb3ZlRmlsZTogdXBsb2FkLnJlbW92ZUZpbGVcbiAgfTtcbn0iXSwibmFtZXMiOlsiVXBsb2FkU3RhdGUiLCJ1c2VEcm9wem9uZVVwbG9hZCIsInVzZUltYWdlVXBsb2FkIiwidXNlU2luZ2xlSW1hZ2VVcGxvYWQiLCJERUZBVUxUX0NPTkZJRyIsIm1heFNpemVCeXRlcyIsImFsbG93ZWRUeXBlcyIsImdlbmVyYXRlVGh1bWJuYWlscyIsInRodW1ibmFpbFNpemVzIiwiZW5hYmxlRHJhZ0Ryb3AiLCJhdXRvUHJvY2VzcyIsInZhbGlkYXRpb24iLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiYXNwZWN0UmF0aW8iLCJ1bmRlZmluZWQiLCJhc3BlY3RSYXRpb1RvbGVyYW5jZSIsImNvbmZpZyIsIm9uVXBsb2FkIiwib25FcnJvciIsImZpbmFsQ29uZmlnIiwidXBsb2FkU3RhdGUiLCJzZXRVcGxvYWRTdGF0ZSIsInVzZVN0YXRlIiwidXBsb2FkZWRGaWxlcyIsInNldFVwbG9hZGVkRmlsZXMiLCJjdXJyZW50RmlsZSIsInNldEN1cnJlbnRGaWxlIiwicHJvZ3Jlc3MiLCJzZXRQcm9ncmVzcyIsImVycm9yIiwic2V0RXJyb3IiLCJkcmFnRHJvcFN0YXRlIiwic2V0RHJhZ0Ryb3BTdGF0ZSIsImlzRHJhZ0FjdGl2ZSIsImlzRHJhZ0FjY2VwdCIsImlzRHJhZ1JlamVjdCIsImRyYWdnZWRGaWxlcyIsImZpbGVJbnB1dFJlZiIsInVzZVJlZiIsInVwbG9hZElkQ291bnRlciIsImRhdGEiLCJ2YWxpZGF0aW9uUmVzdWx0IiwidXNlSW1hZ2VWYWxpZGF0aW9uIiwiZmlsZSIsIm1ldGFkYXRhIiwidXNlSW1hZ2VNZXRhZGF0YSIsInRodW1ibmFpbCIsInVzZUltYWdlVGh1bWJuYWlsIiwiZ2VuZXJhdGVVcGxvYWRJZCIsInVzZUNhbGxiYWNrIiwiRGF0ZSIsIm5vdyIsImN1cnJlbnQiLCJ1cGRhdGVQcm9ncmVzcyIsInN0YWdlIiwicGVyY2VudGFnZSIsIm1lc3NhZ2UiLCJoYW5kbGVFcnJvciIsInR5cGUiLCJ1cGxvYWRFcnJvciIsIkVycm9yIiwiU3RyaW5nIiwib3JpZ2luYWxFcnJvciIsInZhbGlkYXRlRmlsZSIsImVycm9ycyIsIndhcm5pbmdzIiwiaW5jbHVkZXMiLCJwdXNoIiwiam9pbiIsInNpemUiLCJ0b0ZpeGVkIiwiaW1hZ2VNZXRhZGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJkaW1lbnNpb25zIiwid2lkdGgiLCJuYXR1cmFsV2lkdGgiLCJoZWlnaHQiLCJuYXR1cmFsSGVpZ2h0IiwiZm9ybWF0Iiwib25lcnJvciIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInRhcmdldFJhdGlvIiwidG9sZXJhbmNlIiwiTWF0aCIsImFicyIsImlzVmFsaWQiLCJsZW5ndGgiLCJ0aHVtYm5haWxzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsInRvRGF0YVVSTCIsInJldm9rZU9iamVjdFVSTCIsImNvbnNvbGUiLCJ3YXJuIiwicHJvY2Vzc0ZpbGUiLCJ1cGxvYWRJZCIsInByZXZpZXciLCJwcm9jZXNzZWRSZXN1bHQiLCJwcm9jZXNzSW1hZ2VGb3JUcnlvbiIsInVwbG9hZGVkRmlsZSIsInVwbG9hZFRpbWUiLCJ1cGxvYWRGaWxlIiwicHJldiIsInVwbG9hZEZpbGVzIiwiZmlsZXMiLCJyZXN1bHRzIiwicmVzdWx0IiwibmFtZSIsInJlbW92ZUZpbGUiLCJ1cGRhdGVkIiwiZmlsdGVyIiwiZiIsInJlbW92ZWRGaWxlIiwiZmluZCIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJ1cmwiLCJzdGFydHNXaXRoIiwiY2xlYXJGaWxlcyIsIm9wZW5GaWxlUGlja2VyIiwiY2xpY2siLCJoYW5kbGVGaWxlSW5wdXRDaGFuZ2UiLCJldmVudCIsIkFycmF5IiwiZnJvbSIsInRhcmdldCIsInZhbHVlIiwiaGFuZGxlRHJhZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJkYXRhVHJhbnNmZXIiLCJoYXNWYWxpZEZpbGVzIiwic29tZSIsImhhbmRsZURyYWdMZWF2ZSIsImhhbmRsZURyYWdPdmVyIiwiaGFuZGxlRHJvcCIsInVzZUVmZmVjdCIsImZpbGVJbnB1dFByb3BzIiwicmVmIiwiYWNjZXB0IiwibXVsdGlwbGUiLCJvbkNoYW5nZSIsInN0eWxlIiwiZGlzcGxheSIsImRyYWdEcm9wUHJvcHMiLCJvbkRyYWdFbnRlciIsIm9uRHJhZ0xlYXZlIiwib25EcmFnT3ZlciIsIm9uRHJvcCIsInVwbG9hZCIsInVwbG9hZFNpbmdsZUZpbGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7SUEyQllBLFdBQVc7ZUFBWEE7O0lBa2lCSUMsaUJBQWlCO2VBQWpCQTs7SUFwYkFDLGNBQWM7ZUFBZEE7O0lBOFpBQyxvQkFBb0I7ZUFBcEJBOzs7dUJBbGlCeUM7K0JBT2xEO0FBZUEsSUFBQSxBQUFLSCxxQ0FBQUE7Ozs7OztXQUFBQTs7QUF1Rlo7O0NBRUMsR0FDRCxNQUFNSSxpQkFBeUM7SUFDN0NDLGNBQWMsS0FBSyxPQUFPO0lBQzFCQyxjQUFjO1FBQUM7UUFBYztRQUFhO1FBQWM7S0FBWTtJQUNwRUMsb0JBQW9CO0lBQ3BCQyxnQkFBZ0I7UUFBQztRQUFLO1FBQUs7S0FBSTtJQUMvQkMsZ0JBQWdCO0lBQ2hCQyxhQUFhO0lBQ2JDLFlBQVk7UUFDVkMsVUFBVTtRQUNWQyxXQUFXO1FBQ1hDLFVBQVU7UUFDVkMsV0FBVztRQUNYQyxhQUFhQztRQUNiQyxzQkFBc0I7SUFDeEI7QUFDRjtBQUtPLFNBQVNoQixlQUNkaUIsU0FBdUIsQ0FBQyxDQUFDLEVBQ3pCQyxRQUF1QyxFQUN2Q0MsT0FBc0M7SUFFdEMsTUFBTUMsY0FBYztRQUFFLEdBQUdsQixjQUFjO1FBQUUsR0FBR2UsTUFBTTtJQUFDO0lBRW5ELFFBQVE7SUFDUixNQUFNLENBQUNJLGFBQWFDLGVBQWUsR0FBR0Ms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
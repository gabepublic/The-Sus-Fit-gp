{"version":3,"sources":["/Users/willstreeter/WebstormProjects/vibe-coding/those-people/The-Sus-Fit-gp/__tests__/api/tryon/route.test.ts"],"sourcesContent":["import { POST, OPTIONS } from '../../../src/app/api/tryon/route';\n\n// Mock Next.js server\njest.mock('next/server', () => {\n  const mockNextResponse = jest.fn((body, options) => ({\n    status: options?.status || 200,\n    headers: options?.headers || {}\n  }));\n  \n  (mockNextResponse as any).json = jest.fn((data, options) => ({\n    status: options?.status || 200,\n    json: jest.fn().mockResolvedValue(data),\n    headers: options?.headers || {}\n  }));\n  \n  return {\n    NextRequest: jest.fn(),\n    NextResponse: mockNextResponse\n  };\n});\n\n// Mock generateTryOn function\njest.mock('../../../src/lib/openaiClient', () => ({\n  generateTryOn: jest.fn()\n}));\n\ndescribe('/api/tryon POST route', () => {\n  const { generateTryOn } = require('../../../src/lib/openaiClient');\n\n  const createMockRequest = (body: any, origin?: string | null) => {\n    return {\n      json: jest.fn().mockResolvedValue(body),\n      headers: {\n        get: jest.fn().mockReturnValue(origin)\n      }\n    } as any;\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    // Reset environment variables\n    delete (process.env as any).NEXT_PUBLIC_BASE_URL;\n    delete (process.env as any).NODE_ENV;\n  });\n\n  describe('valid requests', () => {\n    it('should return 200 with generated image for valid payload', async () => {\n      const mockGeneratedImage = 'data:image/jpeg;base64,generatedImageData==';\n      (generateTryOn as jest.Mock).mockResolvedValue(mockGeneratedImage);\n\n      const validPayload = {\n        modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n        apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n      };\n\n      const request = createMockRequest(validPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(200);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        img_generated: mockGeneratedImage\n      });\n      expect(generateTryOn).toHaveBeenCalledWith({\n        modelImage: validPayload.modelImage,\n        apparelImages: validPayload.apparelImages\n      });\n    });\n\n    it('should return 200 for payload with multiple apparel images', async () => {\n      const mockGeneratedImage = 'data:image/jpeg;base64,generatedImageData==';\n      (generateTryOn as jest.Mock).mockResolvedValue(mockGeneratedImage);\n\n      const validPayload = {\n        modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n        apparelImages: [\n          'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n          'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='\n        ]\n      };\n\n      const request = createMockRequest(validPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(200);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        img_generated: mockGeneratedImage\n      });\n      expect(generateTryOn).toHaveBeenCalledWith({\n        modelImage: validPayload.modelImage,\n        apparelImages: validPayload.apparelImages\n      });\n    });\n  });\n\n  describe('invalid requests', () => {\n    it('should return 400 for missing modelImage', async () => {\n      const invalidPayload = {\n        apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n      };\n\n      const request = createMockRequest(invalidPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(400);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        error: 'Validation failed'\n      });\n      expect(responseData.details).toHaveLength(1);\n      expect(responseData.details[0].field).toBe('modelImage');\n    });\n\n    it('should return 400 for empty modelImage', async () => {\n      const invalidPayload = {\n        modelImage: '',\n        apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n      };\n\n      const request = createMockRequest(invalidPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(400);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        error: 'Validation failed'\n      });\n      expect(responseData.details).toHaveLength(1);\n      expect(responseData.details[0].field).toBe('modelImage');\n    });\n\n    it('should return 400 for missing apparelImages', async () => {\n      const invalidPayload = {\n        modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='\n      };\n\n      const request = createMockRequest(invalidPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(400);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        error: 'Validation failed'\n      });\n      expect(responseData.details).toHaveLength(1);\n      expect(responseData.details[0].field).toBe('apparelImages');\n    });\n\n    it('should return 400 for empty apparelImages array', async () => {\n      const invalidPayload = {\n        modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n        apparelImages: []\n      };\n\n      const request = createMockRequest(invalidPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(400);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        error: 'Validation failed'\n      });\n      expect(responseData.details).toHaveLength(1);\n      expect(responseData.details[0].field).toBe('apparelImages');\n    });\n\n    it('should return 500 when generateTryOn throws an error', async () => {\n      const validPayload = {\n        modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n        apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n      };\n\n      (generateTryOn as jest.Mock).mockRejectedValue(new Error('OpenAI API error'));\n\n      const request = createMockRequest(validPayload);\n      const response = await POST(request);\n\n      expect(response.status).toBe(500);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        error: 'Internal Server Error'\n      });\n    });\n\n    it('should return 500 for malformed JSON', async () => {\n      const request = {\n        json: jest.fn().mockRejectedValue(new Error('Invalid JSON')),\n        headers: {\n          get: jest.fn().mockReturnValue('http://localhost:3000')\n        }\n      } as any;\n\n      const response = await POST(request);\n\n      expect(response.status).toBe(500);\n      const responseData = await response.json();\n      expect(responseData).toMatchObject({\n        error: 'Internal Server Error'\n      });\n    });\n\n    // New test cases for improved branch coverage\n    describe('error handling with different NODE_ENV values', () => {\n      it('should return detailed error message in development environment', async () => {\n        (process.env as any).NODE_ENV = 'development';\n        \n        const validPayload = {\n          modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n          apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n        };\n\n        (generateTryOn as jest.Mock).mockRejectedValue(new Error('Development error message'));\n\n        const request = createMockRequest(validPayload);\n        const response = await POST(request);\n\n        expect(response.status).toBe(500);\n        const responseData = await response.json();\n        expect(responseData).toMatchObject({\n          error: 'Development error message'\n        });\n      });\n\n      it('should return generic error message in production environment', async () => {\n        (process.env as any).NODE_ENV = 'production';\n        \n        const validPayload = {\n          modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n          apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n        };\n\n        (generateTryOn as jest.Mock).mockRejectedValue(new Error('Production error message'));\n\n        const request = createMockRequest(validPayload);\n        const response = await POST(request);\n\n        expect(response.status).toBe(500);\n        const responseData = await response.json();\n        expect(responseData).toMatchObject({\n          error: 'Internal Server Error'\n        });\n      });\n\n      it('should return \"Unknown error occurred\" when error is not an Error instance in development', async () => {\n        (process.env as any).NODE_ENV = 'development';\n        \n        const validPayload = {\n          modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n          apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n        };\n\n        (generateTryOn as jest.Mock).mockRejectedValue('String error');\n\n        const request = createMockRequest(validPayload);\n        const response = await POST(request);\n\n        expect(response.status).toBe(500);\n        const responseData = await response.json();\n        expect(responseData).toMatchObject({\n          error: 'Unknown error occurred'\n        });\n      });\n\n      it('should return \"Unknown error occurred\" when error is null in development', async () => {\n        (process.env as any).NODE_ENV = 'development';\n        \n        const validPayload = {\n          modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',\n          apparelImages: ['data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==']\n        };\n\n        (generateTryOn as jest.Mock).mockRejectedValue(null);\n\n        const request = createMockRequest(validPayload);\n        const response = await POST(request);\n\n        expect(response.status).toBe(500);\n        const responseData = await response.json();\n        expect(responseData).toMatchObject({\n          error: 'Unknown error occurred'\n        });\n      });\n    });\n  });\n\n  describe('CORS origin handling', () => {\n    it('should use NEXT_PUBLIC_BASE_URL when origin header is null', async () => {\n      (process.env as any).NEXT_PUBLIC_BASE_URL = 'https://example.com';\n      \n      const request = createMockRequest({}, null);\n      const response = await POST(request);\n\n      expect(response.headers).toMatchObject({\n        'Access-Control-Allow-Origin': 'https://example.com'\n      });\n    });\n\n    it('should use empty string when both origin header and NEXT_PUBLIC_BASE_URL are null/undefined', async () => {\n      const request = createMockRequest({}, null);\n      const response = await POST(request);\n\n      expect(response.headers).toMatchObject({\n        'Access-Control-Allow-Origin': ''\n      });\n    });\n\n    it('should use origin header when available', async () => {\n      const request = createMockRequest({}, 'https://custom-origin.com');\n      const response = await POST(request);\n\n      expect(response.headers).toMatchObject({\n        'Access-Control-Allow-Origin': 'https://custom-origin.com'\n      });\n    });\n  });\n\n  describe('OPTIONS requests', () => {\n    it('should return 200 for OPTIONS preflight request', async () => {\n      const request = createMockRequest({}, 'http://localhost:3000');\n      const response = await OPTIONS(request);\n\n      expect(response.status).toBe(200);\n      expect(response.headers).toMatchObject({\n        'Access-Control-Allow-Origin': 'http://localhost:3000',\n        'Access-Control-Allow-Methods': 'POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      });\n    });\n\n    it('should use NEXT_PUBLIC_BASE_URL when origin header is null in OPTIONS', async () => {\n      (process.env as any).NEXT_PUBLIC_BASE_URL = 'https://example.com';\n      \n      const request = createMockRequest({}, null);\n      const response = await OPTIONS(request);\n\n      expect(response.status).toBe(200);\n      expect(response.headers).toMatchObject({\n        'Access-Control-Allow-Origin': 'https://example.com',\n        'Access-Control-Allow-Methods': 'POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      });\n    });\n\n    it('should use empty string when both origin header and NEXT_PUBLIC_BASE_URL are null/undefined in OPTIONS', async () => {\n      const request = createMockRequest({}, null);\n      const response = await OPTIONS(request);\n\n      expect(response.status).toBe(200);\n      expect(response.headers).toMatchObject({\n        'Access-Control-Allow-Origin': '',\n        'Access-Control-Allow-Methods': 'POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      });\n    });\n  });\n}); "],"names":["jest","mock","mockNextResponse","fn","body","options","status","headers","json","data","mockResolvedValue","NextRequest","NextResponse","generateTryOn","describe","require","createMockRequest","origin","get","mockReturnValue","beforeEach","clearAllMocks","process","env","NEXT_PUBLIC_BASE_URL","NODE_ENV","it","mockGeneratedImage","validPayload","modelImage","apparelImages","request","response","POST","expect","toBe","responseData","toMatchObject","img_generated","toHaveBeenCalledWith","invalidPayload","error","details","toHaveLength","field","mockRejectedValue","Error","OPTIONS"],"mappings":"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"}
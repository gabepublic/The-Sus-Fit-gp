427fbf6ffacc956d6daee437453dc598
"use strict";
// Mock Next.js server
jest.mock('next/server', ()=>{
    const mockNextResponse = jest.fn((body, options)=>({
            status: options?.status || 200,
            headers: options?.headers || {}
        }));
    mockNextResponse.json = jest.fn((data, options)=>({
            status: options?.status || 200,
            json: jest.fn().mockResolvedValue(data),
            headers: options?.headers || {}
        }));
    return {
        NextRequest: jest.fn(),
        NextResponse: mockNextResponse
    };
});
// Mock generateTryOn function
jest.mock('../../../src/lib/openaiClient', ()=>({
        generateTryOn: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _route = require("../../../src/app/api/tryon/route");
describe('/api/tryon POST route', ()=>{
    const { generateTryOn } = require('../../../src/lib/openaiClient');
    const createMockRequest = (body, origin)=>{
        return {
            json: jest.fn().mockResolvedValue(body),
            headers: {
                get: jest.fn().mockReturnValue(origin)
            }
        };
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset environment variables
        delete process.env.NEXT_PUBLIC_BASE_URL;
        delete process.env.NODE_ENV;
    });
    describe('valid requests', ()=>{
        it('should return 200 with generated image for valid payload', async ()=>{
            const mockGeneratedImage = 'data:image/jpeg;base64,generatedImageData==';
            generateTryOn.mockResolvedValue(mockGeneratedImage);
            const validPayload = {
                modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                apparelImages: [
                    'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                ]
            };
            const request = createMockRequest(validPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                img_generated: mockGeneratedImage
            });
            expect(generateTryOn).toHaveBeenCalledWith({
                modelImage: validPayload.modelImage,
                apparelImages: validPayload.apparelImages
            });
        });
        it('should return 200 for payload with multiple apparel images', async ()=>{
            const mockGeneratedImage = 'data:image/jpeg;base64,generatedImageData==';
            generateTryOn.mockResolvedValue(mockGeneratedImage);
            const validPayload = {
                modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                apparelImages: [
                    'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                    'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                ]
            };
            const request = createMockRequest(validPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                img_generated: mockGeneratedImage
            });
            expect(generateTryOn).toHaveBeenCalledWith({
                modelImage: validPayload.modelImage,
                apparelImages: validPayload.apparelImages
            });
        });
    });
    describe('invalid requests', ()=>{
        it('should return 400 for missing modelImage', async ()=>{
            const invalidPayload = {
                apparelImages: [
                    'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                ]
            };
            const request = createMockRequest(invalidPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(400);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                error: 'Validation failed'
            });
            expect(responseData.details).toHaveLength(1);
            expect(responseData.details[0].field).toBe('modelImage');
        });
        it('should return 400 for empty modelImage', async ()=>{
            const invalidPayload = {
                modelImage: '',
                apparelImages: [
                    'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                ]
            };
            const request = createMockRequest(invalidPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(400);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                error: 'Validation failed'
            });
            expect(responseData.details).toHaveLength(1);
            expect(responseData.details[0].field).toBe('modelImage');
        });
        it('should return 400 for missing apparelImages', async ()=>{
            const invalidPayload = {
                modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
            };
            const request = createMockRequest(invalidPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(400);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                error: 'Validation failed'
            });
            expect(responseData.details).toHaveLength(1);
            expect(responseData.details[0].field).toBe('apparelImages');
        });
        it('should return 400 for empty apparelImages array', async ()=>{
            const invalidPayload = {
                modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                apparelImages: []
            };
            const request = createMockRequest(invalidPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(400);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                error: 'Validation failed'
            });
            expect(responseData.details).toHaveLength(1);
            expect(responseData.details[0].field).toBe('apparelImages');
        });
        it('should return 500 when generateTryOn throws an error', async ()=>{
            const validPayload = {
                modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                apparelImages: [
                    'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                ]
            };
            generateTryOn.mockRejectedValue(new Error('OpenAI API error'));
            const request = createMockRequest(validPayload);
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(500);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                error: 'Internal Server Error'
            });
        });
        it('should return 500 for malformed JSON', async ()=>{
            const request = {
                json: jest.fn().mockRejectedValue(new Error('Invalid JSON')),
                headers: {
                    get: jest.fn().mockReturnValue('http://localhost:3000')
                }
            };
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(500);
            const responseData = await response.json();
            expect(responseData).toMatchObject({
                error: 'Internal Server Error'
            });
        });
        // New test cases for improved branch coverage
        describe('error handling with different NODE_ENV values', ()=>{
            it('should return detailed error message in development environment', async ()=>{
                process.env.NODE_ENV = 'development';
                const validPayload = {
                    modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                    apparelImages: [
                        'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                    ]
                };
                generateTryOn.mockRejectedValue(new Error('Development error message'));
                const request = createMockRequest(validPayload);
                const response = await (0, _route.POST)(request);
                expect(response.status).toBe(500);
                const responseData = await response.json();
                expect(responseData).toMatchObject({
                    error: 'Development error message'
                });
            });
            it('should return generic error message in production environment', async ()=>{
                process.env.NODE_ENV = 'production';
                const validPayload = {
                    modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                    apparelImages: [
                        'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                    ]
                };
                generateTryOn.mockRejectedValue(new Error('Production error message'));
                const request = createMockRequest(validPayload);
                const response = await (0, _route.POST)(request);
                expect(response.status).toBe(500);
                const responseData = await response.json();
                expect(responseData).toMatchObject({
                    error: 'Internal Server Error'
                });
            });
            it('should return "Unknown error occurred" when error is not an Error instance in development', async ()=>{
                process.env.NODE_ENV = 'development';
                const validPayload = {
                    modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                    apparelImages: [
                        'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                    ]
                };
                generateTryOn.mockRejectedValue('String error');
                const request = createMockRequest(validPayload);
                const response = await (0, _route.POST)(request);
                expect(response.status).toBe(500);
                const responseData = await response.json();
                expect(responseData).toMatchObject({
                    error: 'Unknown error occurred'
                });
            });
            it('should return "Unknown error occurred" when error is null in development', async ()=>{
                process.env.NODE_ENV = 'development';
                const validPayload = {
                    modelImage: 'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                    apparelImages: [
                        'data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                    ]
                };
                generateTryOn.mockRejectedValue(null);
                const request = createMockRequest(validPayload);
                const response = await (0, _route.POST)(request);
                expect(response.status).toBe(500);
                const responseData = await response.json();
                expect(responseData).toMatchObject({
                    error: 'Unknown error occurred'
                });
            });
        });
    });
    describe('CORS origin handling', ()=>{
        it('should use NEXT_PUBLIC_BASE_URL when origin header is null', async ()=>{
            process.env.NEXT_PUBLIC_BASE_URL = 'https://example.com';
            const request = createMockRequest({}, null);
            const response = await (0, _route.POST)(request);
            expect(response.headers).toMatchObject({
                'Access-Control-Allow-Origin': 'https://example.com'
            });
        });
        it('should use empty string when both origin header and NEXT_PUBLIC_BASE_URL are null/undefined', async ()=>{
            const request = createMockRequest({}, null);
            const response = await (0, _route.POST)(request);
            expect(response.headers).toMatchObject({
                'Access-Control-Allow-Origin': ''
            });
        });
        it('should use origin header when available', async ()=>{
            const request = createMockRequest({}, 'https://custom-origin.com');
            const response = await (0, _route.POST)(request);
            expect(response.headers).toMatchObject({
                'Access-Control-Allow-Origin': 'https://custom-origin.com'
            });
        });
    });
    describe('OPTIONS requests', ()=>{
        it('should return 200 for OPTIONS preflight request', async ()=>{
            const request = createMockRequest({}, 'http://localhost:3000');
            const response = await (0, _route.OPTIONS)(request);
            expect(response.status).toBe(200);
            expect(response.headers).toMatchObject({
                'Access-Control-Allow-Origin': 'http://localhost:3000',
                'Access-Control-Allow-Methods': 'POST, OPTIONS',
                'Access-Control-Allow-Headers': 'Content-Type'
            });
        });
        it('should use NEXT_PUBLIC_BASE_URL when origin header is null in OPTIONS', async ()=>{
            process.env.NEXT_PUBLIC_BASE_URL = 'https://example.com';
            const request = createMockRequest({}, null);
            const response = await (0, _route.OPTIONS)(request);
            expect(response.status).toBe(200);
            expect(response.headers).toMatchObject({
                'Access-Control-Allow-Origin': 'https://example.com',
                'Access-Control-Allow-Methods': 'POST, OPTIONS',
                'Access-Control-Allow-Headers': 'Content-Type'
            });
        });
        it('should use empty string when both origin header and NEXT_PUBLIC_BASE_URL are null/undefined in OPTIONS', async ()=>{
            const request = createMockRequest({}, null);
            const response = await (0, _route.OPTIONS)(request);
            expect(response.status).toBe(200);
            expect(response.headers).toMatchObject({
                'Access-Control-Allow-Origin': '',
                'Access-Control-Allow-Methods': 'POST, OPTIONS',
                'Access-Control-Allow-Headers': 'Content-Type'
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3AvX190ZXN0c19fL2FwaS90cnlvbi9yb3V0ZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBPU1QsIE9QVElPTlMgfSBmcm9tICcuLi8uLi8uLi9zcmMvYXBwL2FwaS90cnlvbi9yb3V0ZSc7XG5cbi8vIE1vY2sgTmV4dC5qcyBzZXJ2ZXJcbmplc3QubW9jaygnbmV4dC9zZXJ2ZXInLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tOZXh0UmVzcG9uc2UgPSBqZXN0LmZuKChib2R5LCBvcHRpb25zKSA9PiAoe1xuICAgIHN0YXR1czogb3B0aW9ucz8uc3RhdHVzIHx8IDIwMCxcbiAgICBoZWFkZXJzOiBvcHRpb25zPy5oZWFkZXJzIHx8IHt9XG4gIH0pKTtcbiAgXG4gIChtb2NrTmV4dFJlc3BvbnNlIGFzIGFueSkuanNvbiA9IGplc3QuZm4oKGRhdGEsIG9wdGlvbnMpID0+ICh7XG4gICAgc3RhdHVzOiBvcHRpb25zPy5zdGF0dXMgfHwgMjAwLFxuICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShkYXRhKSxcbiAgICBoZWFkZXJzOiBvcHRpb25zPy5oZWFkZXJzIHx8IHt9XG4gIH0pKTtcbiAgXG4gIHJldHVybiB7XG4gICAgTmV4dFJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgICBOZXh0UmVzcG9uc2U6IG1vY2tOZXh0UmVzcG9uc2VcbiAgfTtcbn0pO1xuXG4vLyBNb2NrIGdlbmVyYXRlVHJ5T24gZnVuY3Rpb25cbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2xpYi9vcGVuYWlDbGllbnQnLCAoKSA9PiAoe1xuICBnZW5lcmF0ZVRyeU9uOiBqZXN0LmZuKClcbn0pKTtcblxuZGVzY3JpYmUoJy9hcGkvdHJ5b24gUE9TVCByb3V0ZScsICgpID0+IHtcbiAgY29uc3QgeyBnZW5lcmF0ZVRyeU9uIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvbGliL29wZW5haUNsaWVudCcpO1xuXG4gIGNvbnN0IGNyZWF0ZU1vY2tSZXF1ZXN0ID0gKGJvZHk6IGFueSwgb3JpZ2luPzogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoYm9keSksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShvcmlnaW4pXG4gICAgICB9XG4gICAgfSBhcyBhbnk7XG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgLy8gUmVzZXQgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgZGVsZXRlIChwcm9jZXNzLmVudiBhcyBhbnkpLk5FWFRfUFVCTElDX0JBU0VfVVJMO1xuICAgIGRlbGV0ZSAocHJvY2Vzcy5lbnYgYXMgYW55KS5OT0RFX0VOVjtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkIHJlcXVlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDIwMCB3aXRoIGdlbmVyYXRlZCBpbWFnZSBmb3IgdmFsaWQgcGF5bG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tHZW5lcmF0ZWRJbWFnZSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGdlbmVyYXRlZEltYWdlRGF0YT09JztcbiAgICAgIChnZW5lcmF0ZVRyeU9uIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0dlbmVyYXRlZEltYWdlKTtcblxuICAgICAgY29uc3QgdmFsaWRQYXlsb2FkID0ge1xuICAgICAgICBtb2RlbEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybU5rWVBoZkR3QUNod0dBNjBlNmtnQUFBQUJKUlU1RXJrSmdnZz09J11cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh2YWxpZFBheWxvYWQpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgaW1nX2dlbmVyYXRlZDogbW9ja0dlbmVyYXRlZEltYWdlXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChnZW5lcmF0ZVRyeU9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIG1vZGVsSW1hZ2U6IHZhbGlkUGF5bG9hZC5tb2RlbEltYWdlLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiB2YWxpZFBheWxvYWQuYXBwYXJlbEltYWdlc1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiAyMDAgZm9yIHBheWxvYWQgd2l0aCBtdWx0aXBsZSBhcHBhcmVsIGltYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tHZW5lcmF0ZWRJbWFnZSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGdlbmVyYXRlZEltYWdlRGF0YT09JztcbiAgICAgIChnZW5lcmF0ZVRyeU9uIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0dlbmVyYXRlZEltYWdlKTtcblxuICAgICAgY29uc3QgdmFsaWRQYXlsb2FkID0ge1xuICAgICAgICBtb2RlbEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbXG4gICAgICAgICAgJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybU5rWVBoZkR3QUNod0dBNjBlNmtnQUFBQUJKUlU1RXJrSmdnZz09JyxcbiAgICAgICAgICAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh2YWxpZFBheWxvYWQpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgaW1nX2dlbmVyYXRlZDogbW9ja0dlbmVyYXRlZEltYWdlXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChnZW5lcmF0ZVRyeU9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIG1vZGVsSW1hZ2U6IHZhbGlkUGF5bG9hZC5tb2RlbEltYWdlLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiB2YWxpZFBheWxvYWQuYXBwYXJlbEltYWdlc1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbnZhbGlkIHJlcXVlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgbWlzc2luZyBtb2RlbEltYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFBheWxvYWQgPSB7XG4gICAgICAgIGFwcGFyZWxJbWFnZXM6IFsnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KGludmFsaWRQYXlsb2FkKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZGV0YWlscykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5kZXRhaWxzWzBdLmZpZWxkKS50b0JlKCdtb2RlbEltYWdlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIGVtcHR5IG1vZGVsSW1hZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUGF5bG9hZCA9IHtcbiAgICAgICAgbW9kZWxJbWFnZTogJycsXG4gICAgICAgIGFwcGFyZWxJbWFnZXM6IFsnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KGludmFsaWRQYXlsb2FkKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZGV0YWlscykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5kZXRhaWxzWzBdLmZpZWxkKS50b0JlKCdtb2RlbEltYWdlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIG1pc3NpbmcgYXBwYXJlbEltYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRQYXlsb2FkID0ge1xuICAgICAgICBtb2RlbEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QoaW52YWxpZFBheWxvYWQpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCdcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5kZXRhaWxzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLmRldGFpbHNbMF0uZmllbGQpLnRvQmUoJ2FwcGFyZWxJbWFnZXMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgZW1wdHkgYXBwYXJlbEltYWdlcyBhcnJheScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRQYXlsb2FkID0ge1xuICAgICAgICBtb2RlbEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nLFxuICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KGludmFsaWRQYXlsb2FkKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZGV0YWlscykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5kZXRhaWxzWzBdLmZpZWxkKS50b0JlKCdhcHBhcmVsSW1hZ2VzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgd2hlbiBnZW5lcmF0ZVRyeU9uIHRocm93cyBhbiBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkUGF5bG9hZCA9IHtcbiAgICAgICAgbW9kZWxJbWFnZTogJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybU5rWVBoZkR3QUNod0dBNjBlNmtnQUFBQUJKUlU1RXJrSmdnZz09JyxcbiAgICAgICAgYXBwYXJlbEltYWdlczogWydkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQURVbEVRVlI0Mm1Oa1lQaGZEd0FDaHdHQTYwZTZrZ0FBQUFCSlJVNUVya0pnZ2c9PSddXG4gICAgICB9O1xuXG4gICAgICAoZ2VuZXJhdGVUcnlPbiBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignT3BlbkFJIEFQSSBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHZhbGlkUGF5bG9hZCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcidcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIGZvciBtYWxmb3JtZWQgSlNPTicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ludmFsaWQgSlNPTicpKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnaHR0cDovL2xvY2FsaG9zdDozMDAwJylcbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBOZXcgdGVzdCBjYXNlcyBmb3IgaW1wcm92ZWQgYnJhbmNoIGNvdmVyYWdlXG4gICAgZGVzY3JpYmUoJ2Vycm9yIGhhbmRsaW5nIHdpdGggZGlmZmVyZW50IE5PREVfRU5WIHZhbHVlcycsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGRldGFpbGVkIGVycm9yIG1lc3NhZ2UgaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIChwcm9jZXNzLmVudiBhcyBhbnkpLk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZhbGlkUGF5bG9hZCA9IHtcbiAgICAgICAgICBtb2RlbEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nLFxuICAgICAgICAgIGFwcGFyZWxJbWFnZXM6IFsnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nXVxuICAgICAgICB9O1xuXG4gICAgICAgIChnZW5lcmF0ZVRyeU9uIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEZXZlbG9wbWVudCBlcnJvciBtZXNzYWdlJykpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh2YWxpZFBheWxvYWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAgIGVycm9yOiAnRGV2ZWxvcG1lbnQgZXJyb3IgbWVzc2FnZSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZ2VuZXJpYyBlcnJvciBtZXNzYWdlIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIChwcm9jZXNzLmVudiBhcyBhbnkpLk5PREVfRU5WID0gJ3Byb2R1Y3Rpb24nO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdmFsaWRQYXlsb2FkID0ge1xuICAgICAgICAgIG1vZGVsSW1hZ2U6ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQURVbEVRVlI0Mm1Oa1lQaGZEd0FDaHdHQTYwZTZrZ0FBQUFCSlJVNUVya0pnZ2c9PScsXG4gICAgICAgICAgYXBwYXJlbEltYWdlczogWydkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQURVbEVRVlI0Mm1Oa1lQaGZEd0FDaHdHQTYwZTZrZ0FBQUFCSlJVNUVya0pnZ2c9PSddXG4gICAgICAgIH07XG5cbiAgICAgICAgKGdlbmVyYXRlVHJ5T24gYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1Byb2R1Y3Rpb24gZXJyb3IgbWVzc2FnZScpKTtcblxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3QodmFsaWRQYXlsb2FkKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgICBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcidcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gXCJVbmtub3duIGVycm9yIG9jY3VycmVkXCIgd2hlbiBlcnJvciBpcyBub3QgYW4gRXJyb3IgaW5zdGFuY2UgaW4gZGV2ZWxvcG1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIChwcm9jZXNzLmVudiBhcyBhbnkpLk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZhbGlkUGF5bG9hZCA9IHtcbiAgICAgICAgICBtb2RlbEltYWdlOiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nLFxuICAgICAgICAgIGFwcGFyZWxJbWFnZXM6IFsnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0nXVxuICAgICAgICB9O1xuXG4gICAgICAgIChnZW5lcmF0ZVRyeU9uIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWUoJ1N0cmluZyBlcnJvcicpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh2YWxpZFBheWxvYWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAgIGVycm9yOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gXCJVbmtub3duIGVycm9yIG9jY3VycmVkXCIgd2hlbiBlcnJvciBpcyBudWxsIGluIGRldmVsb3BtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAocHJvY2Vzcy5lbnYgYXMgYW55KS5OT0RFX0VOViA9ICdkZXZlbG9wbWVudCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2YWxpZFBheWxvYWQgPSB7XG4gICAgICAgICAgbW9kZWxJbWFnZTogJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybU5rWVBoZkR3QUNod0dBNjBlNmtnQUFBQUJKUlU1RXJrSmdnZz09JyxcbiAgICAgICAgICBhcHBhcmVsSW1hZ2VzOiBbJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybU5rWVBoZkR3QUNod0dBNjBlNmtnQUFBQUJKUlU1RXJrSmdnZz09J11cbiAgICAgICAgfTtcblxuICAgICAgICAoZ2VuZXJhdGVUcnlPbiBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG51bGwpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh2YWxpZFBheWxvYWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAgIGVycm9yOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NPUlMgb3JpZ2luIGhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIE5FWFRfUFVCTElDX0JBU0VfVVJMIHdoZW4gb3JpZ2luIGhlYWRlciBpcyBudWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHByb2Nlc3MuZW52IGFzIGFueSkuTkVYVF9QVUJMSUNfQkFTRV9VUkwgPSAnaHR0cHM6Ly9leGFtcGxlLmNvbSc7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7fSwgbnVsbCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICdodHRwczovL2V4YW1wbGUuY29tJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBlbXB0eSBzdHJpbmcgd2hlbiBib3RoIG9yaWdpbiBoZWFkZXIgYW5kIE5FWFRfUFVCTElDX0JBU0VfVVJMIGFyZSBudWxsL3VuZGVmaW5lZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7fSwgbnVsbCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIG9yaWdpbiBoZWFkZXIgd2hlbiBhdmFpbGFibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe30sICdodHRwczovL2N1c3RvbS1vcmlnaW4uY29tJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICdodHRwczovL2N1c3RvbS1vcmlnaW4uY29tJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPUFRJT05TIHJlcXVlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDIwMCBmb3IgT1BUSU9OUyBwcmVmbGlnaHQgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7fSwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBPUFRJT05TKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9NYXRjaE9iamVjdCh7XG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnUE9TVCwgT1BUSU9OUycsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSdcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgTkVYVF9QVUJMSUNfQkFTRV9VUkwgd2hlbiBvcmlnaW4gaGVhZGVyIGlzIG51bGwgaW4gT1BUSU9OUycsIGFzeW5jICgpID0+IHtcbiAgICAgIChwcm9jZXNzLmVudiBhcyBhbnkpLk5FWFRfUFVCTElDX0JBU0VfVVJMID0gJ2h0dHBzOi8vZXhhbXBsZS5jb20nO1xuICAgICAgXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe30sIG51bGwpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBPUFRJT05TKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9NYXRjaE9iamVjdCh7XG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIE9QVElPTlMnLFxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIGVtcHR5IHN0cmluZyB3aGVuIGJvdGggb3JpZ2luIGhlYWRlciBhbmQgTkVYVF9QVUJMSUNfQkFTRV9VUkwgYXJlIG51bGwvdW5kZWZpbmVkIGluIE9QVElPTlMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe30sIG51bGwpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBPUFRJT05TKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycykudG9NYXRjaE9iamVjdCh7XG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnJyxcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnUE9TVCwgT1BUSU9OUycsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyAiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJtb2NrTmV4dFJlc3BvbnNlIiwiZm4iLCJib2R5Iiwib3B0aW9ucyIsInN0YXR1cyIsImhlYWRlcnMiLCJqc29uIiwiZGF0YSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiTmV4dFJlcXVlc3QiLCJOZXh0UmVzcG9uc2UiLCJnZW5lcmF0ZVRyeU9uIiwiZGVzY3JpYmUiLCJyZXF1aXJlIiwiY3JlYXRlTW9ja1JlcXVlc3QiLCJvcmlnaW4iLCJnZXQiLCJtb2NrUmV0dXJuVmFsdWUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19CQVNFX1VSTCIsIk5PREVfRU5WIiwiaXQiLCJtb2NrR2VuZXJhdGVkSW1hZ2UiLCJ2YWxpZFBheWxvYWQiLCJtb2RlbEltYWdlIiwiYXBwYXJlbEltYWdlcyIsInJlcXVlc3QiLCJyZXNwb25zZSIsIlBPU1QiLCJleHBlY3QiLCJ0b0JlIiwicmVzcG9uc2VEYXRhIiwidG9NYXRjaE9iamVjdCIsImltZ19nZW5lcmF0ZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImludmFsaWRQYXlsb2FkIiwiZXJyb3IiLCJkZXRhaWxzIiwidG9IYXZlTGVuZ3RoIiwiZmllbGQiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwiT1BUSU9OUyJdLCJtYXBwaW5ncyI6IjtBQUVBLHNCQUFzQjtBQUN0QkEsS0FBS0MsSUFBSSxDQUFDLGVBQWU7SUFDdkIsTUFBTUMsbUJBQW1CRixLQUFLRyxFQUFFLENBQUMsQ0FBQ0MsTUFBTUMsVUFBYSxDQUFBO1lBQ25EQyxRQUFRRCxTQUFTQyxVQUFVO1lBQzNCQyxTQUFTRixTQUFTRSxXQUFXLENBQUM7UUFDaEMsQ0FBQTtJQUVDTCxpQkFBeUJNLElBQUksR0FBR1IsS0FBS0csRUFBRSxDQUFDLENBQUNNLE1BQU1KLFVBQWEsQ0FBQTtZQUMzREMsUUFBUUQsU0FBU0MsVUFBVTtZQUMzQkUsTUFBTVIsS0FBS0csRUFBRSxHQUFHTyxpQkFBaUIsQ0FBQ0Q7WUFDbENGLFNBQVNGLFNBQVNFLFdBQVcsQ0FBQztRQUNoQyxDQUFBO0lBRUEsT0FBTztRQUNMSSxhQUFhWCxLQUFLRyxFQUFFO1FBQ3BCUyxjQUFjVjtJQUNoQjtBQUNGO0FBRUEsOEJBQThCO0FBQzlCRixLQUFLQyxJQUFJ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
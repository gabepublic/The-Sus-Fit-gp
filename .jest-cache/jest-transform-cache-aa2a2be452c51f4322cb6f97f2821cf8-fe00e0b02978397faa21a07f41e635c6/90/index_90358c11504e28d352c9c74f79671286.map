{"version":3,"sources":["/Users/willstreeter/WebstormProjects/vibe-coding/those-people/The-Sus-Fit-gp/src/business-layer/index.ts"],"sourcesContent":["// Business Layer Main Export\n// Public API for the business layer - only export what should be consumed by other layers\n\n// Configuration and setup\nexport { \n  queryClient,\n  createImageProcessingQueryConfig,\n  createApiQueryConfig,\n  createMutationConfig,\n  invalidateQueries,\n  clearQueryCache\n} from './config';\n\n// Providers\nexport { \n  ReactQueryProvider,\n  ErrorBoundary,\n  type ReactQueryProviderProps,\n  FeatureFlagProvider,\n  type FeatureFlagProviderProps,\n  FeatureFlagContext,\n  useFeatureFlagContext,\n  useFeatureFlagContextOptional\n} from './providers';\n\n// Essential types that bridge and UI layers need\nexport type { \n  // Mutation types\n  TryonMutationData,\n  TryonMutationVariables,\n  TryonMutationVariablesWithFiles,\n  ImageUploadData,\n  ImageUploadVariables,\n  MutationState,\n  // Try-on specific types\n  TryonMutationOptions,\n  TryonMutationResponse,\n  TryonResponseMetadata,\n  TryonMutationError,\n  TryonMutationContext,\n  UseTryonMutationReturn,\n  UseTryonMutationConfig,\n  // API types\n  TryonRequest,\n  TryonResponse,\n  ApiResponse,\n  ProcessedImage,\n  // Error types\n  BusinessLayerError,\n  ApiError,\n  ValidationError,\n  NetworkError,\n  TimeoutError,\n  // Query configuration types\n  QueryConfig,\n  MutationConfig,\n  // Feature flag types\n  FeatureFlag,\n  FeatureFlagConfig,\n  FeatureFlagValue,\n  FeatureFlagCategory,\n  Environment,\n  FeatureFlagCollection,\n  FeatureFlagProviderConfig,\n  FeatureFlagContextValue,\n  UseFeatureFlagReturn,\n  // History types\n  TryonHistoryEntry,\n  TryonHistoryCollection,\n  TryonHistoryQueryOptions,\n  CreateTryonHistoryEntryOptions,\n  TryonHistoryStorageConfig,\n  TryonHistoryService,\n  UseTryonHistoryReturn,\n  TryonHistoryContextValue\n} from './types';\n\n// Error utilities\nexport {\n  createBusinessLayerError,\n  createApiError,\n  createValidationError,\n  createNetworkError,\n  createTimeoutError\n} from './types';\n\n// Feature flag hooks\nexport {\n  useFeatureFlag,\n  useFeatureFlagEnabled,\n  useFeatureFlagString,\n  useFeatureFlagNumber,\n  useFeatureFlags,\n  useAnyFeatureFlagEnabled,\n  useAllFeatureFlagsEnabled,\n  useFeatureFlagValue,\n  useFeatureFlagRefresh,\n  useAllFeatureFlags,\n  useExperimentVariant,\n} from './hooks';\n\n// Core business logic hooks\nexport { useTryonMutation } from './mutations';\n\n// History management hooks\nexport { \n  useTryonHistory, \n  useTryonHistoryEntry, \n  useTryonHistoryStats,\n  HISTORY_QUERY_KEYS \n} from './hooks/useTryonHistory';\n\n// Image processing utilities\nexport {\n  resizeImageTo1024x1536,\n  processImageForTryon,\n  processTryonImages,\n  validateImageDimensions,\n  getImageDimensions,\n  getBase64Size,\n  ImageProcessingError,\n  ImageDimensionError,\n  DEFAULT_PROCESSING_OPTIONS,\n  type ImageProcessingOptions,\n  type ImageProcessingResult\n} from './utils';\n\n// Error handling utilities\nexport {\n  classifyTryonError,\n  logAndClassifyError,\n  getUserFriendlyErrorMessage,\n  isErrorRetryable,\n  getErrorRecoveryActions,\n  formatErrorForDisplay,\n  setErrorLogger,\n  getErrorLogger,\n  ConsoleErrorLogger,\n  ErrorCategory,\n  ErrorSeverity,\n  type ClassifiedError,\n  type ErrorRecoveryAction,\n  type ErrorLogger\n} from './utils';\n\n// History services and utilities\nexport {\n  LocalStorageTryonHistoryService,\n  defaultHistoryService\n} from './services/tryonHistoryService';\n\nexport {\n  createHistoryIntegratedCallbacks,\n  useHistoryIntegratedMutationConfig,\n  createHistoryEntryFromMutation,\n  createShareableHistoryEntry\n} from './utils/historyIntegration';\n\n// Image processing queries\nexport {\n  useImageProcessing,\n  useImageMetadata,\n  useImageThumbnail,\n  useImageValidation,\n  useFormatConversion,\n  useBatchImageProcessing,\n  useProcessingStats,\n  useImageProcessingCache,\n  imageProcessingKeys,\n  ImageProcessingOperation,\n  type ProcessingQueueItem,\n  type BatchProcessingConfig,\n  type ProcessingStats,\n  type ProcessingQueueState\n} from './queries';\n\n// Image export utilities\nexport {\n  ImageExporter,\n  BatchExportManager,\n  createImageExporter,\n  createBatchExportManager,\n  ExportFormat,\n  QualityPreset,\n  getOptimalFormat,\n  estimateFileSize,\n  DEFAULT_EXPORT_CONFIG,\n  type ExportConfig,\n  type ExportResult,\n  type ExportMetadata,\n  type WatermarkConfig,\n  type CompressionConfig,\n  type BatchExportConfig\n} from './utils/imageExport';\n\n// Image export hooks\nexport {\n  useImageExport,\n  useBatchImageExport,\n  useSimpleImageExport,\n  type UseImageExportOptions,\n  type ExportState\n} from './hooks/useImageExport';"],"names":["BatchExportManager","ConsoleErrorLogger","DEFAULT_EXPORT_CONFIG","DEFAULT_PROCESSING_OPTIONS","ErrorBoundary","ErrorCategory","ErrorSeverity","ExportFormat","FeatureFlagContext","FeatureFlagProvider","HISTORY_QUERY_KEYS","ImageDimensionError","ImageExporter","ImageProcessingError","ImageProcessingOperation","LocalStorageTryonHistoryService","QualityPreset","ReactQueryProvider","classifyTryonError","clearQueryCache","createApiError","createApiQueryConfig","createBatchExportManager","createBusinessLayerError","createHistoryEntryFromMutation","createHistoryIntegratedCallbacks","createImageExporter","createImageProcessingQueryConfig","createMutationConfig","createNetworkError","createShareableHistoryEntry","createTimeoutError","createValidationError","defaultHistoryService","estimateFileSize","formatErrorForDisplay","getBase64Size","getErrorLogger","getErrorRecoveryActions","getImageDimensions","getOptimalFormat","getUserFriendlyErrorMessage","imageProcessingKeys","invalidateQueries","isErrorRetryable","logAndClassifyError","processImageForTryon","processTryonImages","queryClient","resizeImageTo1024x1536","setErrorLogger","useAllFeatureFlags","useAllFeatureFlagsEnabled","useAnyFeatureFlagEnabled","useBatchImageExport","useBatchImageProcessing","useExperimentVariant","useFeatureFlag","useFeatureFlagContext","useFeatureFlagContextOptional","useFeatureFlagEnabled","useFeatureFlagNumber","useFeatureFlagRefresh","useFeatureFlagString","useFeatureFlagValue","useFeatureFlags","useFormatConversion","useHistoryIntegratedMutationConfig","useImageExport","useImageMetadata","useImageProcessing","useImageProcessingCache","useImageThumbnail","useImageValidation","useProcessingStats","useSimpleImageExport","useTryonHistory","useTryonHistoryEntry","useTryonHistoryStats","useTryonMutation","validateImageDimensions"],"mappings":"AAAA,6BAA6B;AAC7B,0FAA0F;AAE1F,0BAA0B;;;;;;;;;;;;IAgLxBA,kBAAkB;eAAlBA,+BAAkB;;IA1ClBC,kBAAkB;eAAlBA,yBAAkB;;IAiDlBC,qBAAqB;eAArBA,kCAAqB;;IAhErBC,0BAA0B;eAA1BA,iCAA0B;;IA1G1BC,aAAa;eAAbA,wBAAa;;IA0HbC,aAAa;eAAbA,oBAAa;;IACbC,aAAa;eAAbA,oBAAa;;IA2CbC,YAAY;eAAZA,yBAAY;;IAlKZC,kBAAkB;eAAlBA,6BAAkB;;IAFlBC,mBAAmB;eAAnBA,8BAAmB;;IA2FnBC,kBAAkB;eAAlBA,mCAAkB;;IAYlBC,mBAAmB;eAAnBA,0BAAmB;;IAyDnBC,aAAa;eAAbA,0BAAa;;IA1DbC,oBAAoB;eAApBA,2BAAoB;;IAiDpBC,wBAAwB;eAAxBA,iCAAwB;;IAtBxBC,+BAA+B;eAA/BA,oDAA+B;;IAoC/BC,aAAa;eAAbA,0BAAa;;IAxKbC,kBAAkB;eAAlBA,6BAAkB;;IAkHlBC,kBAAkB;eAAlBA,yBAAkB;;IAvHlBC,eAAe;eAAfA,uBAAe;;IAsEfC,cAAc;eAAdA,qBAAc;;IAzEdC,oBAAoB;eAApBA,4BAAoB;;IA8KpBC,wBAAwB;eAAxBA,qCAAwB;;IAtGxBC,wBAAwB;eAAxBA,+BAAwB;;IA2ExBC,8BAA8B;eAA9BA,kDAA8B;;IAF9BC,gCAAgC;eAAhCA,oDAAgC;;IA4BhCC,mBAAmB;eAAnBA,gCAAmB;;IA9KnBC,gCAAgC;eAAhCA,wCAAgC;;IAEhCC,oBAAoB;eAApBA,4BAAoB;;IA0EpBC,kBAAkB;eAAlBA,yBAAkB;;IAyElBC,2BAA2B;eAA3BA,+CAA2B;;IAxE3BC,kBAAkB;eAAlBA,yBAAkB;;IAFlBC,qBAAqB;eAArBA,4BAAqB;;IAmErBC,qBAAqB;eAArBA,0CAAqB;;IAqCrBC,gBAAgB;eAAhBA,6BAAgB;;IAnDhBC,qBAAqB;eAArBA,4BAAqB;;IAfrBC,aAAa;eAAbA,oBAAa;;IAiBbC,cAAc;eAAdA,qBAAc;;IAHdC,uBAAuB;eAAvBA,8BAAuB;;IAfvBC,kBAAkB;eAAlBA,yBAAkB;;IAkElBC,gBAAgB;eAAhBA,6BAAgB;;IArDhBC,2BAA2B;eAA3BA,kCAA2B;;IAqC3BC,mBAAmB;eAAnBA,4BAAmB;;IA/JnBC,iBAAiB;eAAjBA,yBAAiB;;IA2HjBC,gBAAgB;eAAhBA,uBAAgB;;IAFhBC,mBAAmB;eAAnBA,0BAAmB;;IAfnBC,oBAAoB;eAApBA,2BAAoB;;IACpBC,kBAAkB;eAAlBA,yBAAkB;;IA/GlBC,WAAW;eAAXA,mBAAW;;IA6GXC,sBAAsB;eAAtBA,6BAAsB;;IAqBtBC,cAAc;eAAdA,qBAAc;;IAtCdC,kBAAkB;eAAlBA,yBAAkB;;IAHlBC,yBAAyB;eAAzBA,gCAAyB;;IADzBC,wBAAwB;eAAxBA,+BAAwB;;IAyGxBC,mBAAmB;eAAnBA,mCAAmB;;IAjCnBC,uBAAuB;eAAvBA,gCAAuB;;IAnEvBC,oBAAoB;eAApBA,2BAAoB;;IAVpBC,cAAc;eAAdA,qBAAc;;IAnEdC,qBAAqB;eAArBA,gCAAqB;;IACrBC,6BAA6B;eAA7BA,wCAA6B;;IAmE7BC,qBAAqB;eAArBA,4BAAqB;;IAErBC,oBAAoB;eAApBA,2BAAoB;;IAKpBC,qBAAqB;eAArBA,4BAAqB;;IANrBC,oBAAoB;eAApBA,2BAAoB;;IAKpBC,mBAAmB;eAAnBA,0BAAmB;;IAHnBC,eAAe;eAAfA,sBAAe;;IAwEfC,mBAAmB;eAAnBA,4BAAmB;;IAXnBC,kCAAkC;eAAlCA,sDAAkC;;IA4ClCC,cAAc;eAAdA,8BAAc;;IApCdC,gBAAgB;eAAhBA,yBAAgB;;IADhBC,kBAAkB;eAAlBA,2BAAkB;;IAOlBC,uBAAuB;eAAvBA,gCAAuB;;IALvBC,iBAAiB;eAAjBA,0BAAiB;;IACjBC,kBAAkB;eAAlBA,2BAAkB;;IAGlBC,kBAAkB;eAAlBA,2BAAkB;;IAiClBC,oBAAoB;eAApBA,oCAAoB;;IA7FpBC,eAAe;eAAfA,gCAAe;;IACfC,oBAAoB;eAApBA,qCAAoB;;IACpBC,oBAAoB;eAApBA,qCAAoB;;IANbC,gBAAgB;eAAhBA,2BAAgB;;IAevBC,uBAAuB;eAAvBA,8BAAuB;;;wBA1GlB;2BAYA;uBA6DA;uBAeA;2BAG0B;iCAQ1B;uBAeA;qCAwBA;oCAOA;yBAkBA;6BAmBA;gCASA"}
8c3ed8b71ea8336bf0121f462115fa21
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    useInteractiveTextEditor: function() {
        return useInteractiveTextEditor;
    },
    useTextOverlay: function() {
        return useTextOverlay;
    },
    useTextPresets: function() {
        return useTextPresets;
    }
});
const _react = require("react");
const _CanvasProvider = require("../providers/CanvasProvider");
const _textOverlay = require("../utils/textOverlay");
function useTextOverlay(canvasWidth, canvasHeight, canvasId) {
    const canvas = (0, _CanvasProvider.useManagedCanvas)(canvasWidth, canvasHeight, canvasId);
    const [state, setState] = (0, _react.useState)({
        overlays: [],
        activeOverlayId: null,
        isEditing: false
    });
    const rendererRef = (0, _react.useRef)((0, _textOverlay.createTextOverlayRenderer)(canvas));
    const generateId = (0, _react.useCallback)(()=>{
        return `text-overlay-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
    }, []);
    const addTextOverlay = (0, _react.useCallback)((config)=>{
        const id = generateId();
        const now = new Date();
        const newOverlay = {
            id,
            config: config,
            visible: true,
            locked: false,
            createdAt: now,
            updatedAt: now
        };
        setState((prev)=>({
                ...prev,
                overlays: [
                    ...prev.overlays,
                    newOverlay
                ],
                activeOverlayId: id
            }));
        return id;
    }, [
        generateId
    ]);
    const updateTextOverlay = (0, _react.useCallback)((id, configUpdate)=>{
        setState((prev)=>({
                ...prev,
                overlays: prev.overlays.map((overlay)=>overlay.id === id ? {
                        ...overlay,
                        config: {
                            ...overlay.config,
                            ...configUpdate
                        },
                        updatedAt: new Date()
                    } : overlay)
            }));
    }, []);
    const removeTextOverlay = (0, _react.useCallback)((id)=>{
        setState((prev)=>({
                ...prev,
                overlays: prev.overlays.filter((overlay)=>overlay.id !== id),
                activeOverlayId: prev.activeOverlayId === id ? null : prev.activeOverlayId
            }));
    }, []);
    const setActiveOverlay = (0, _react.useCallback)((id)=>{
        setState((prev)=>({
                ...prev,
                activeOverlayId: id
            }));
    }, []);
    const setOverlayVisibility = (0, _react.useCallback)((id, visible)=>{
        setState((prev)=>({
                ...prev,
                overlays: prev.overlays.map((overlay)=>overlay.id === id ? {
                        ...overlay,
                        visible,
                        updatedAt: new Date()
                    } : overlay)
            }));
    }, []);
    const setOverlayLocked = (0, _react.useCallback)((id, locked)=>{
        setState((prev)=>({
                ...prev,
                overlays: prev.overlays.map((overlay)=>overlay.id === id ? {
                        ...overlay,
                        locked,
                        updatedAt: new Date()
                    } : overlay)
            }));
    }, []);
    const renderAllOverlays = (0, _react.useCallback)(()=>{
        // Clear previous overlays
        canvas.context.clearRect(0, 0, canvas.canvas.width, canvas.canvas.height);
        // Render visible overlays in order
        const visibleOverlays = state.overlays.filter((overlay)=>overlay.visible).sort((a, b)=>a.createdAt.getTime() - b.createdAt.getTime());
        visibleOverlays.forEach((overlay)=>{
            const measurement = rendererRef.current.renderText(overlay.config);
            // Update overlay with measurement
            setState((prev)=>({
                    ...prev,
                    overlays: prev.overlays.map((o)=>o.id === overlay.id ? {
                            ...o,
                            measurement
                        } : o)
                }));
        });
    }, [
        canvas,
        state.overlays
    ]);
    const clearAllOverlays = (0, _react.useCallback)(()=>{
        canvas.context.clearRect(0, 0, canvas.canvas.width, canvas.canvas.height);
        setState((prev)=>({
                ...prev,
                overlays: [],
                activeOverlayId: null
            }));
    }, [
        canvas
    ]);
    const getOverlayById = (0, _react.useCallback)((id)=>{
        return state.overlays.find((overlay)=>overlay.id === id);
    }, [
        state.overlays
    ]);
    const duplicateOverlay = (0, _react.useCallback)((id)=>{
        const overlay = getOverlayById(id);
        if (!overlay) return null;
        const newId = generateId();
        const now = new Date();
        // Offset position slightly
        const newConfig = {
            ...overlay.config,
            position: {
                ...overlay.config.position,
                x: overlay.config.position.x + 20,
                y: overlay.config.position.y + 20
            }
        };
        const duplicatedOverlay = {
            id: newId,
            config: newConfig,
            visible: true,
            locked: false,
            createdAt: now,
            updatedAt: now
        };
        setState((prev)=>({
                ...prev,
                overlays: [
                    ...prev.overlays,
                    duplicatedOverlay
                ],
                activeOverlayId: newId
            }));
        return newId;
    }, [
        getOverlayById,
        generateId
    ]);
    const moveOverlay = (0, _react.useCallback)((id, newPosition)=>{
        setState((prev)=>({
                ...prev,
                overlays: prev.overlays.map((overlay)=>overlay.id === id ? {
                        ...overlay,
                        config: {
                            ...overlay.config,
                            position: {
                                ...overlay.config.position,
                                ...newPosition
                            }
                        },
                        updatedAt: new Date()
                    } : overlay)
            }));
    }, []);
    const exportOverlays = (0, _react.useCallback)(()=>{
        return JSON.parse(JSON.stringify(state.overlays));
    }, [
        state.overlays
    ]);
    const importOverlays = (0, _react.useCallback)((overlays)=>{
        setState((prev)=>({
                ...prev,
                overlays: overlays.map((overlay)=>({
                        ...overlay,
                        id: generateId(),
                        createdAt: new Date(overlay.createdAt),
                        updatedAt: new Date(overlay.updatedAt)
                    })),
                activeOverlayId: null
            }));
    }, [
        generateId
    ]);
    const startEditing = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                isEditing: true
            }));
    }, []);
    const stopEditing = (0, _react.useCallback)(()=>{
        setState((prev)=>({
                ...prev,
                isEditing: false
            }));
    }, []);
    return {
        canvas,
        renderer: rendererRef.current,
        overlays: state.overlays,
        activeOverlayId: state.activeOverlayId,
        isEditing: state.isEditing,
        addTextOverlay,
        updateTextOverlay,
        removeTextOverlay,
        setActiveOverlay,
        setOverlayVisibility,
        setOverlayLocked,
        renderAllOverlays,
        clearAllOverlays,
        getOverlayById,
        duplicateOverlay,
        moveOverlay,
        exportOverlays,
        importOverlays,
        startEditing,
        stopEditing
    };
}
function useTextPresets() {
    const [customPresets, setCustomPresets] = (0, _react.useState)({});
    const presets = _textOverlay.TextOverlayUtils.createPresets();
    const calculateOptimalFontSize = (0, _react.useCallback)((text, maxWidth, maxHeight, style, canvas)=>{
        return _textOverlay.TextOverlayUtils.calculateOptimalFontSize(text, maxWidth, maxHeight, style, canvas);
    }, []);
    const createCustomPreset = (0, _react.useCallback)((name, style)=>{
        setCustomPresets((prev)=>({
                ...prev,
                [name]: {
                    style
                }
            }));
    }, []);
    const getCustomPresets = (0, _react.useCallback)(()=>{
        return customPresets;
    }, [
        customPresets
    ]);
    const removeCustomPreset = (0, _react.useCallback)((name)=>{
        setCustomPresets((prev)=>{
            const { [name]: removed, ...rest } = prev;
            return rest;
        });
    }, []);
    return {
        presets,
        calculateOptimalFontSize,
        createCustomPreset,
        getCustomPresets,
        removeCustomPreset
    };
}
function useInteractiveTextEditor(canvas, overlayId, onUpdate) {
    const [isEditing, setIsEditing] = (0, _react.useState)(false);
    const startEditing = (0, _react.useCallback)(()=>{
        setIsEditing(true);
    }, []);
    const stopEditing = (0, _react.useCallback)(()=>{
        setIsEditing(false);
    }, []);
    const updateText = (0, _react.useCallback)((text)=>{
        onUpdate({
            text
        });
    }, [
        onUpdate
    ]);
    const updateStyle = (0, _react.useCallback)((style)=>{
        onUpdate({
            style
        });
    }, [
        onUpdate
    ]);
    const updatePosition = (0, _react.useCallback)((position)=>{
        onUpdate({
            position
        });
    }, [
        onUpdate
    ]);
    return {
        isEditing,
        startEditing,
        stopEditing,
        updateText,
        updateStyle,
        updatePosition
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsc3RyZWV0ZXIvV2Vic3Rvcm1Qcm9qZWN0cy92aWJlLWNvZGluZy90aG9zZS1wZW9wbGUvVGhlLVN1cy1GaXQtZ3Avc3JjL2J1c2luZXNzLWxheWVyL2hvb2tzL3VzZVRleHRPdmVybGF5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuLy8gVGV4dCBPdmVybGF5IFJlYWN0IEhvb2tzXG4vLyBSZWFjdCBob29rcyBmb3IgbWFuYWdpbmcgdGV4dCBvdmVybGF5cyBvbiBjYW52YXNcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VNYW5hZ2VkQ2FudmFzLCB0eXBlIE1hbmFnZWRDYW52YXMgfSBmcm9tICcuLi9wcm92aWRlcnMvQ2FudmFzUHJvdmlkZXInO1xuaW1wb3J0IHtcbiAgVGV4dE92ZXJsYXlSZW5kZXJlcixcbiAgVGV4dE92ZXJsYXlVdGlscyxcbiAgY3JlYXRlVGV4dE92ZXJsYXlSZW5kZXJlcixcbiAgdHlwZSBUZXh0T3ZlcmxheUNvbmZpZyxcbiAgdHlwZSBUZXh0TWVhc3VyZW1lbnQsXG4gIHR5cGUgVGV4dFN0eWxlLFxuICB0eXBlIFRleHRQb3NpdGlvblxufSBmcm9tICcuLi91dGlscy90ZXh0T3ZlcmxheSc7XG5cbi8qKlxuICogVGV4dCBvdmVybGF5IGl0ZW0gd2l0aCB1bmlxdWUgSURcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUZXh0T3ZlcmxheUl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBjb25maWc6IFRleHRPdmVybGF5Q29uZmlnO1xuICBtZWFzdXJlbWVudD86IFRleHRNZWFzdXJlbWVudDtcbiAgdmlzaWJsZTogYm9vbGVhbjtcbiAgbG9ja2VkOiBib29sZWFuO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuLyoqXG4gKiBUZXh0IG92ZXJsYXkgbWFuYWdlciBzdGF0ZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRleHRPdmVybGF5U3RhdGUge1xuICBvdmVybGF5czogVGV4dE92ZXJsYXlJdGVtW107XG4gIGFjdGl2ZU92ZXJsYXlJZDogc3RyaW5nIHwgbnVsbDtcbiAgaXNFZGl0aW5nOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEhvb2sgZm9yIG1hbmFnaW5nIHRleHQgb3ZlcmxheXMgb24gYSBjYW52YXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVRleHRPdmVybGF5KFxuICBjYW52YXNXaWR0aDogbnVtYmVyLFxuICBjYW52YXNIZWlnaHQ6IG51bWJlcixcbiAgY2FudmFzSWQ/OiBzdHJpbmdcbik6IHtcbiAgY2FudmFzOiBNYW5hZ2VkQ2FudmFzO1xuICByZW5kZXJlcjogVGV4dE92ZXJsYXlSZW5kZXJlcjtcbiAgb3ZlcmxheXM6IFRleHRPdmVybGF5SXRlbVtdO1xuICBhY3RpdmVPdmVybGF5SWQ6IHN0cmluZyB8IG51bGw7XG4gIGlzRWRpdGluZzogYm9vbGVhbjtcbiAgYWRkVGV4dE92ZXJsYXk6IChjb25maWc6IE9taXQ8VGV4dE92ZXJsYXlDb25maWcsICd0ZXh0Jz4gJiB7IHRleHQ6IHN0cmluZyB9KSA9PiBzdHJpbmc7XG4gIHVwZGF0ZVRleHRPdmVybGF5OiAoaWQ6IHN0cmluZywgY29uZmlnOiBQYXJ0aWFsPFRleHRPdmVybGF5Q29uZmlnPikgPT4gdm9pZDtcbiAgcmVtb3ZlVGV4dE92ZXJsYXk6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzZXRBY3RpdmVPdmVybGF5OiAoaWQ6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gIHNldE92ZXJsYXlWaXNpYmlsaXR5OiAoaWQ6IHN0cmluZywgdmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0T3ZlcmxheUxvY2tlZDogKGlkOiBzdHJpbmcsIGxvY2tlZDogYm9vbGVhbikgPT4gdm9pZDtcbiAgcmVuZGVyQWxsT3ZlcmxheXM6ICgpID0+IHZvaWQ7XG4gIGNsZWFyQWxsT3ZlcmxheXM6ICgpID0+IHZvaWQ7XG4gIGdldE92ZXJsYXlCeUlkOiAoaWQ6IHN0cmluZykgPT4gVGV4dE92ZXJsYXlJdGVtIHwgdW5kZWZpbmVkO1xuICBkdXBsaWNhdGVPdmVybGF5OiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nIHwgbnVsbDtcbiAgbW92ZU92ZXJsYXk6IChpZDogc3RyaW5nLCBuZXdQb3NpdGlvbjogUGFydGlhbDxUZXh0UG9zaXRpb24+KSA9PiB2b2lkO1xuICBleHBvcnRPdmVybGF5czogKCkgPT4gVGV4dE92ZXJsYXlJdGVtW107XG4gIGltcG9ydE92ZXJsYXlzOiAob3ZlcmxheXM6IFRleHRPdmVybGF5SXRlbVtdKSA9PiB2b2lkO1xuICBzdGFydEVkaXRpbmc6ICgpID0+IHZvaWQ7XG4gIHN0b3BFZGl0aW5nOiAoKSA9PiB2b2lkO1xufSB7XG4gIGNvbnN0IGNhbnZhcyA9IHVzZU1hbmFnZWRDYW52YXMoY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgY2FudmFzSWQpO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPFRleHRPdmVybGF5U3RhdGU+KHtcbiAgICBvdmVybGF5czogW10sXG4gICAgYWN0aXZlT3ZlcmxheUlkOiBudWxsLFxuICAgIGlzRWRpdGluZzogZmFsc2VcbiAgfSk7XG5cbiAgY29uc3QgcmVuZGVyZXJSZWYgPSB1c2VSZWY8VGV4dE92ZXJsYXlSZW5kZXJlcj4oY3JlYXRlVGV4dE92ZXJsYXlSZW5kZXJlcihjYW52YXMpKTtcblxuICBjb25zdCBnZW5lcmF0ZUlkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBgdGV4dC1vdmVybGF5LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGFkZFRleHRPdmVybGF5ID0gdXNlQ2FsbGJhY2soKGNvbmZpZzogT21pdDxUZXh0T3ZlcmxheUNvbmZpZywgJ3RleHQnPiAmIHsgdGV4dDogc3RyaW5nIH0pOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IGlkID0gZ2VuZXJhdGVJZCgpO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgY29uc3QgbmV3T3ZlcmxheTogVGV4dE92ZXJsYXlJdGVtID0ge1xuICAgICAgaWQsXG4gICAgICBjb25maWc6IGNvbmZpZyBhcyBUZXh0T3ZlcmxheUNvbmZpZyxcbiAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICBsb2NrZWQ6IGZhbHNlLFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vd1xuICAgIH07XG5cbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgb3ZlcmxheXM6IFsuLi5wcmV2Lm92ZXJsYXlzLCBuZXdPdmVybGF5XSxcbiAgICAgIGFjdGl2ZU92ZXJsYXlJZDogaWRcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gaWQ7XG4gIH0sIFtnZW5lcmF0ZUlkXSk7XG5cbiAgY29uc3QgdXBkYXRlVGV4dE92ZXJsYXkgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZywgY29uZmlnVXBkYXRlOiBQYXJ0aWFsPFRleHRPdmVybGF5Q29uZmlnPikgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBvdmVybGF5czogcHJldi5vdmVybGF5cy5tYXAob3ZlcmxheSA9PiBcbiAgICAgICAgb3ZlcmxheS5pZCA9PT0gaWQgXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIC4uLm92ZXJsYXksXG4gICAgICAgICAgICAgIGNvbmZpZzogeyAuLi5vdmVybGF5LmNvbmZpZywgLi4uY29uZmlnVXBkYXRlIH0sXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIDogb3ZlcmxheVxuICAgICAgKVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlbW92ZVRleHRPdmVybGF5ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgb3ZlcmxheXM6IHByZXYub3ZlcmxheXMuZmlsdGVyKG92ZXJsYXkgPT4gb3ZlcmxheS5pZCAhPT0gaWQpLFxuICAgICAgYWN0aXZlT3ZlcmxheUlkOiBwcmV2LmFjdGl2ZU92ZXJsYXlJZCA9PT0gaWQgPyBudWxsIDogcHJldi5hY3RpdmVPdmVybGF5SWRcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzZXRBY3RpdmVPdmVybGF5ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBhY3RpdmVPdmVybGF5SWQ6IGlkIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHNldE92ZXJsYXlWaXNpYmlsaXR5ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcsIHZpc2libGU6IGJvb2xlYW4pID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgb3ZlcmxheXM6IHByZXYub3ZlcmxheXMubWFwKG92ZXJsYXkgPT5cbiAgICAgICAgb3ZlcmxheS5pZCA9PT0gaWQgPyB7IC4uLm92ZXJsYXksIHZpc2libGUsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9IDogb3ZlcmxheVxuICAgICAgKVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHNldE92ZXJsYXlMb2NrZWQgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZywgbG9ja2VkOiBib29sZWFuKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIG92ZXJsYXlzOiBwcmV2Lm92ZXJsYXlzLm1hcChvdmVybGF5ID0+XG4gICAgICAgIG92ZXJsYXkuaWQgPT09IGlkID8geyAuLi5vdmVybGF5LCBsb2NrZWQsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9IDogb3ZlcmxheVxuICAgICAgKVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlbmRlckFsbE92ZXJsYXlzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIENsZWFyIHByZXZpb3VzIG92ZXJsYXlzXG4gICAgY2FudmFzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy5jYW52YXMud2lkdGgsIGNhbnZhcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIFJlbmRlciB2aXNpYmxlIG92ZXJsYXlzIGluIG9yZGVyXG4gICAgY29uc3QgdmlzaWJsZU92ZXJsYXlzID0gc3RhdGUub3ZlcmxheXNcbiAgICAgIC5maWx0ZXIob3ZlcmxheSA9PiBvdmVybGF5LnZpc2libGUpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5jcmVhdGVkQXQuZ2V0VGltZSgpIC0gYi5jcmVhdGVkQXQuZ2V0VGltZSgpKTtcblxuICAgIHZpc2libGVPdmVybGF5cy5mb3JFYWNoKG92ZXJsYXkgPT4ge1xuICAgICAgY29uc3QgbWVhc3VyZW1lbnQgPSByZW5kZXJlclJlZi5jdXJyZW50LnJlbmRlclRleHQob3ZlcmxheS5jb25maWcpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgb3ZlcmxheSB3aXRoIG1lYXN1cmVtZW50XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIG92ZXJsYXlzOiBwcmV2Lm92ZXJsYXlzLm1hcChvID0+IFxuICAgICAgICAgIG8uaWQgPT09IG92ZXJsYXkuaWQgPyB7IC4uLm8sIG1lYXN1cmVtZW50IH0gOiBvXG4gICAgICAgIClcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfSwgW2NhbnZhcywgc3RhdGUub3ZlcmxheXNdKTtcblxuICBjb25zdCBjbGVhckFsbE92ZXJsYXlzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNhbnZhcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMuY2FudmFzLndpZHRoLCBjYW52YXMuY2FudmFzLmhlaWdodCk7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBvdmVybGF5czogW10sIGFjdGl2ZU92ZXJsYXlJZDogbnVsbCB9KSk7XG4gIH0sIFtjYW52YXNdKTtcblxuICBjb25zdCBnZXRPdmVybGF5QnlJZCA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKTogVGV4dE92ZXJsYXlJdGVtIHwgdW5kZWZpbmVkID0+IHtcbiAgICByZXR1cm4gc3RhdGUub3ZlcmxheXMuZmluZChvdmVybGF5ID0+IG92ZXJsYXkuaWQgPT09IGlkKTtcbiAgfSwgW3N0YXRlLm92ZXJsYXlzXSk7XG5cbiAgY29uc3QgZHVwbGljYXRlT3ZlcmxheSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGdldE92ZXJsYXlCeUlkKGlkKTtcbiAgICBpZiAoIW92ZXJsYXkpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgbmV3SWQgPSBnZW5lcmF0ZUlkKCk7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICAvLyBPZmZzZXQgcG9zaXRpb24gc2xpZ2h0bHlcbiAgICBjb25zdCBuZXdDb25maWcgPSB7XG4gICAgICAuLi5vdmVybGF5LmNvbmZpZyxcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIC4uLm92ZXJsYXkuY29uZmlnLnBvc2l0aW9uLFxuICAgICAgICB4OiBvdmVybGF5LmNvbmZpZy5wb3NpdGlvbi54ICsgMjAsXG4gICAgICAgIHk6IG92ZXJsYXkuY29uZmlnLnBvc2l0aW9uLnkgKyAyMFxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBkdXBsaWNhdGVkT3ZlcmxheTogVGV4dE92ZXJsYXlJdGVtID0ge1xuICAgICAgaWQ6IG5ld0lkLFxuICAgICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgbG9ja2VkOiBmYWxzZSxcbiAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgdXBkYXRlZEF0OiBub3dcbiAgICB9O1xuXG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIG92ZXJsYXlzOiBbLi4ucHJldi5vdmVybGF5cywgZHVwbGljYXRlZE92ZXJsYXldLFxuICAgICAgYWN0aXZlT3ZlcmxheUlkOiBuZXdJZFxuICAgIH0pKTtcblxuICAgIHJldHVybiBuZXdJZDtcbiAgfSwgW2dldE92ZXJsYXlCeUlkLCBnZW5lcmF0ZUlkXSk7XG5cbiAgY29uc3QgbW92ZU92ZXJsYXkgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZywgbmV3UG9zaXRpb246IFBhcnRpYWw8VGV4dFBvc2l0aW9uPikgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBvdmVybGF5czogcHJldi5vdmVybGF5cy5tYXAob3ZlcmxheSA9PlxuICAgICAgICBvdmVybGF5LmlkID09PSBpZFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAuLi5vdmVybGF5LFxuICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAuLi5vdmVybGF5LmNvbmZpZyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogeyAuLi5vdmVybGF5LmNvbmZpZy5wb3NpdGlvbiwgLi4ubmV3UG9zaXRpb24gfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IG92ZXJsYXlcbiAgICAgIClcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBleHBvcnRPdmVybGF5cyA9IHVzZUNhbGxiYWNrKCgpOiBUZXh0T3ZlcmxheUl0ZW1bXSA9PiB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUub3ZlcmxheXMpKTtcbiAgfSwgW3N0YXRlLm92ZXJsYXlzXSk7XG5cbiAgY29uc3QgaW1wb3J0T3ZlcmxheXMgPSB1c2VDYWxsYmFjaygob3ZlcmxheXM6IFRleHRPdmVybGF5SXRlbVtdKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIG92ZXJsYXlzOiBvdmVybGF5cy5tYXAob3ZlcmxheSA9PiAoe1xuICAgICAgICAuLi5vdmVybGF5LFxuICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLCAvLyBHZW5lcmF0ZSBuZXcgSURzIHRvIGF2b2lkIGNvbmZsaWN0c1xuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKG92ZXJsYXkuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShvdmVybGF5LnVwZGF0ZWRBdClcbiAgICAgIH0pKSxcbiAgICAgIGFjdGl2ZU92ZXJsYXlJZDogbnVsbFxuICAgIH0pKTtcbiAgfSwgW2dlbmVyYXRlSWRdKTtcblxuICBjb25zdCBzdGFydEVkaXRpbmcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0VkaXRpbmc6IHRydWUgfSkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc3RvcEVkaXRpbmcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0VkaXRpbmc6IGZhbHNlIH0pKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgY2FudmFzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJlclJlZi5jdXJyZW50LFxuICAgIG92ZXJsYXlzOiBzdGF0ZS5vdmVybGF5cyxcbiAgICBhY3RpdmVPdmVybGF5SWQ6IHN0YXRlLmFjdGl2ZU92ZXJsYXlJZCxcbiAgICBpc0VkaXRpbmc6IHN0YXRlLmlzRWRpdGluZyxcbiAgICBhZGRUZXh0T3ZlcmxheSxcbiAgICB1cGRhdGVUZXh0T3ZlcmxheSxcbiAgICByZW1vdmVUZXh0T3ZlcmxheSxcbiAgICBzZXRBY3RpdmVPdmVybGF5LFxuICAgIHNldE92ZXJsYXlWaXNpYmlsaXR5LFxuICAgIHNldE92ZXJsYXlMb2NrZWQsXG4gICAgcmVuZGVyQWxsT3ZlcmxheXMsXG4gICAgY2xlYXJBbGxPdmVybGF5cyxcbiAgICBnZXRPdmVybGF5QnlJZCxcbiAgICBkdXBsaWNhdGVPdmVybGF5LFxuICAgIG1vdmVPdmVybGF5LFxuICAgIGV4cG9ydE92ZXJsYXlzLFxuICAgIGltcG9ydE92ZXJsYXlzLFxuICAgIHN0YXJ0RWRpdGluZyxcbiAgICBzdG9wRWRpdGluZ1xuICB9O1xufVxuXG4vKipcbiAqIEhvb2sgZm9yIHRleHQgc3R5bGUgcHJlc2V0cyBhbmQgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VUZXh0UHJlc2V0cygpOiB7XG4gIHByZXNldHM6IFJldHVyblR5cGU8dHlwZW9mIFRleHRPdmVybGF5VXRpbHMuY3JlYXRlUHJlc2V0cz47XG4gIGNhbGN1bGF0ZU9wdGltYWxGb250U2l6ZTogKFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBtYXhXaWR0aDogbnVtYmVyLFxuICAgIG1heEhlaWdodDogbnVtYmVyLFxuICAgIHN0eWxlOiBUZXh0U3R5bGUsXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudFxuICApID0+IG51bWJlcjtcbiAgY3JlYXRlQ3VzdG9tUHJlc2V0OiAobmFtZTogc3RyaW5nLCBzdHlsZTogVGV4dFN0eWxlKSA9PiB2b2lkO1xuICBnZXRDdXN0b21QcmVzZXRzOiAoKSA9PiBSZWNvcmQ8c3RyaW5nLCB7IHN0eWxlOiBUZXh0U3R5bGUgfT47XG4gIHJlbW92ZUN1c3RvbVByZXNldDogKG5hbWU6IHN0cmluZykgPT4gdm9pZDtcbn0ge1xuICBjb25zdCBbY3VzdG9tUHJlc2V0cywgc2V0Q3VzdG9tUHJlc2V0c10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCB7IHN0eWxlOiBUZXh0U3R5bGUgfT4+KHt9KTtcblxuICBjb25zdCBwcmVzZXRzID0gVGV4dE92ZXJsYXlVdGlscy5jcmVhdGVQcmVzZXRzKCk7XG5cbiAgY29uc3QgY2FsY3VsYXRlT3B0aW1hbEZvbnRTaXplID0gdXNlQ2FsbGJhY2soKFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBtYXhXaWR0aDogbnVtYmVyLFxuICAgIG1heEhlaWdodDogbnVtYmVyLFxuICAgIHN0eWxlOiBUZXh0U3R5bGUsXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudFxuICApID0+IHtcbiAgICByZXR1cm4gVGV4dE92ZXJsYXlVdGlscy5jYWxjdWxhdGVPcHRpbWFsRm9udFNpemUodGV4dCwgbWF4V2lkdGgsIG1heEhlaWdodCwgc3R5bGUsIGNhbnZhcyk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjcmVhdGVDdXN0b21QcmVzZXQgPSB1c2VDYWxsYmFjaygobmFtZTogc3RyaW5nLCBzdHlsZTogVGV4dFN0eWxlKSA9PiB7XG4gICAgc2V0Q3VzdG9tUHJlc2V0cyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW25hbWVdOiB7IHN0eWxlIH1cbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBnZXRDdXN0b21QcmVzZXRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBjdXN0b21QcmVzZXRzO1xuICB9LCBbY3VzdG9tUHJlc2V0c10pO1xuXG4gIGNvbnN0IHJlbW92ZUN1c3RvbVByZXNldCA9IHVzZUNhbGxiYWNrKChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBzZXRDdXN0b21QcmVzZXRzKHByZXYgPT4ge1xuICAgICAgY29uc3QgeyBbbmFtZV06IHJlbW92ZWQsIC4uLnJlc3QgfSA9IHByZXY7XG4gICAgICByZXR1cm4gcmVzdDtcbiAgICB9KTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgcHJlc2V0cyxcbiAgICBjYWxjdWxhdGVPcHRpbWFsRm9udFNpemUsXG4gICAgY3JlYXRlQ3VzdG9tUHJlc2V0LFxuICAgIGdldEN1c3RvbVByZXNldHMsXG4gICAgcmVtb3ZlQ3VzdG9tUHJlc2V0XG4gIH07XG59XG5cbi8qKlxuICogSG9vayBmb3IgaW50ZXJhY3RpdmUgdGV4dCBlZGl0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VJbnRlcmFjdGl2ZVRleHRFZGl0b3IoXG4gIGNhbnZhczogTWFuYWdlZENhbnZhcyxcbiAgb3ZlcmxheUlkOiBzdHJpbmcsXG4gIG9uVXBkYXRlOiAoY29uZmlnOiBQYXJ0aWFsPFRleHRPdmVybGF5Q29uZmlnPikgPT4gdm9pZFxuKToge1xuICBpc0VkaXRpbmc6IGJvb2xlYW47XG4gIHN0YXJ0RWRpdGluZzogKCkgPT4gdm9pZDtcbiAgc3RvcEVkaXRpbmc6ICgpID0+IHZvaWQ7XG4gIHVwZGF0ZVRleHQ6ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHVwZGF0ZVN0eWxlOiAoc3R5bGU6IFBhcnRpYWw8VGV4dFN0eWxlPikgPT4gdm9pZDtcbiAgdXBkYXRlUG9zaXRpb246IChwb3NpdGlvbjogUGFydGlhbDxUZXh0UG9zaXRpb24+KSA9PiB2b2lkO1xufSB7XG4gIGNvbnN0IFtpc0VkaXRpbmcsIHNldElzRWRpdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3Qgc3RhcnRFZGl0aW5nID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzRWRpdGluZyh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHN0b3BFZGl0aW5nID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzRWRpdGluZyhmYWxzZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCB1cGRhdGVUZXh0ID0gdXNlQ2FsbGJhY2soKHRleHQ6IHN0cmluZykgPT4ge1xuICAgIG9uVXBkYXRlKHsgdGV4dCB9KTtcbiAgfSwgW29uVXBkYXRlXSk7XG5cbiAgY29uc3QgdXBkYXRlU3R5bGUgPSB1c2VDYWxsYmFjaygoc3R5bGU6IFBhcnRpYWw8VGV4dFN0eWxlPikgPT4ge1xuICAgIG9uVXBkYXRlKHsgc3R5bGUgfSk7XG4gIH0sIFtvblVwZGF0ZV0pO1xuXG4gIGNvbnN0IHVwZGF0ZVBvc2l0aW9uID0gdXNlQ2FsbGJhY2soKHBvc2l0aW9uOiBQYXJ0aWFsPFRleHRQb3NpdGlvbj4pID0+IHtcbiAgICBvblVwZGF0ZSh7IHBvc2l0aW9uIH0pO1xuICB9LCBbb25VcGRhdGVdKTtcblxuICByZXR1cm4ge1xuICAgIGlzRWRpdGluZyxcbiAgICBzdGFydEVkaXRpbmcsXG4gICAgc3RvcEVkaXRpbmcsXG4gICAgdXBkYXRlVGV4dCxcbiAgICB1cGRhdGVTdHlsZSxcbiAgICB1cGRhdGVQb3NpdGlvblxuICB9O1xufSJdLCJuYW1lcyI6WyJ1c2VJbnRlcmFjdGl2ZVRleHRFZGl0b3IiLCJ1c2VUZXh0T3ZlcmxheSIsInVzZVRleHRQcmVzZXRzIiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJjYW52YXNJZCIsImNhbnZhcyIsInVzZU1hbmFnZWRDYW52YXMiLCJzdGF0ZSIsInNldFN0YXRlIiwidXNlU3RhdGUiLCJvdmVybGF5cyIsImFjdGl2ZU92ZXJsYXlJZCIsImlzRWRpdGluZyIsInJlbmRlcmVyUmVmIiwidXNlUmVmIiwiY3JlYXRlVGV4dE92ZXJsYXlSZW5kZXJlciIsImdlbmVyYXRlSWQiLCJ1c2VDYWxsYmFjayIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJhZGRUZXh0T3ZlcmxheSIsImNvbmZpZyIsImlkIiwibmV3T3ZlcmxheSIsInZpc2libGUiLCJsb2NrZWQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJwcmV2IiwidXBkYXRlVGV4dE92ZXJsYXkiLCJjb25maWdVcGRhdGUiLCJtYXAiLCJvdmVybGF5IiwicmVtb3ZlVGV4dE92ZXJsYXkiLCJmaWx0ZXIiLCJzZXRBY3RpdmVPdmVybGF5Iiwic2V0T3ZlcmxheVZpc2liaWxpdHkiLCJzZXRPdmVybGF5TG9ja2VkIiwicmVuZGVyQWxsT3ZlcmxheXMiLCJjb250ZXh0IiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJ2aXNpYmxlT3ZlcmxheXMiLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwiZm9yRWFjaCIsIm1lYXN1cmVtZW50IiwiY3VycmVudCIsInJlbmRlclRleHQiLCJvIiwiY2xlYXJBbGxPdmVybGF5cyIsImdldE92ZXJsYXlCeUlkIiwiZmluZCIsImR1cGxpY2F0ZU92ZXJsYXkiLCJuZXdJZCIsIm5ld0NvbmZpZyIsInBvc2l0aW9uIiwieCIsInkiLCJkdXBsaWNhdGVkT3ZlcmxheSIsIm1vdmVPdmVybGF5IiwibmV3UG9zaXRpb24iLCJleHBvcnRPdmVybGF5cyIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImltcG9ydE92ZXJsYXlzIiwic3RhcnRFZGl0aW5nIiwic3RvcEVkaXRpbmciLCJyZW5kZXJlciIsImN1c3RvbVByZXNldHMiLCJzZXRDdXN0b21QcmVzZXRzIiwicHJlc2V0cyIsIlRleHRPdmVybGF5VXRpbHMiLCJjcmVhdGVQcmVzZXRzIiwiY2FsY3VsYXRlT3B0aW1hbEZvbnRTaXplIiwidGV4dCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0Iiwic3R5bGUiLCJjcmVhdGVDdXN0b21QcmVzZXQiLCJuYW1lIiwiZ2V0Q3VzdG9tUHJlc2V0cyIsInJlbW92ZUN1c3RvbVByZXNldCIsInJlbW92ZWQiLCJyZXN0Iiwib3ZlcmxheUlkIiwib25VcGRhdGUiLCJzZXRJc0VkaXRpbmciLCJ1cGRhdGVUZXh0IiwidXBkYXRlU3R5bGUiLCJ1cGRhdGVQb3NpdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztJQXFWZ0JBLHdCQUF3QjtlQUF4QkE7O0lBM1NBQyxjQUFjO2VBQWRBOztJQWtQQUMsY0FBYztlQUFkQTs7O3VCQXZSOEI7Z0NBQ087NkJBUzlDO0FBMkJBLFNBQVNELGVBQ2RFLFdBQW1CLEVBQ25CQyxZQUFvQixFQUNwQkMsUUFBaUI7SUF1QmpCLE1BQU1DLFNBQVNDLElBQUFBLGdDQUFnQixFQUFDSixhQUFhQyxjQUFjQztJQUMzRCxNQUFNLENBQUNHLE9BQU9DLFNBQVMsR0FBR0MsSUFBQUEsZUFBUSxFQUFtQjtRQUNuREMsVUFBVSxFQUFFO1FB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
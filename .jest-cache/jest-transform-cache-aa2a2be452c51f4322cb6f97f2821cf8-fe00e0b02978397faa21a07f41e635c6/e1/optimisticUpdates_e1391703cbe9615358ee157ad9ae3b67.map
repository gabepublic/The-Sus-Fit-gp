{"version":3,"names":["OptimisticUpdatesManager","cov_1j8tkiv89d","f","s","defaultOptimisticManager","getOptimisticUpdatesManager","initializeOptimisticUpdates","DEFAULT_OPTIMISTIC_CONFIG","showPreview","updateHistory","showProgress","previewPlaceholder","estimatedProcessingTime","constructor","queryClient","activeOptimisticUpdates","Map","startOptimisticUpdate","variables","config","b","mergedConfig","optimisticId","Date","now","Math","random","toString","substr","context","startTime","rollbackFunctions","applyOptimisticUpdates","set","addOptimisticHistoryEntry","setupProgressIndicator","setupResultCaching","optimisticHistoryId","optimisticEntry","id","timestamp","toISOString","generatedImage","modelImage","apparelImages","processingTime","undefined","metadata","processingConfig","imageProcessing","options","requestOptions","timeout","quality","tags","notes","isFavorite","historyQueryKey","_useTryonHistory","HISTORY_QUERY_KEYS","entries","setQueryData","oldData","totalCount","currentPage","pageSize","hasMore","lastUpdated","push","filter","entry","max","progressQueryKey","initialProgress","status","progress","stage","estimatedTimeRemaining","progressInterval","setInterval","elapsed","min","progressData","clearInterval","removeQueries","queryKey","resultQueryKey","pendingResult","completeOptimisticUpdate","result","mutationContext","get","map","img_generated","modelVersion","appliedQuality","imageProcessingResults","tag","toFixed","completedAt","cleanupOptimisticUpdate","rollbackOptimisticUpdate","error","forEach","rollback","rollbackError","console","Error","message","String","delete","setTimeout","getOptimisticProgress","getQueryData","isOptimisticUpdateActive","has","getActiveOptimisticUpdates","Array","from","values"],"sources":["/Users/willstreeter/WebstormProjects/vibe-coding/those-people/The-Sus-Fit-gp/src/business-layer/utils/optimisticUpdates.ts"],"sourcesContent":["// Optimistic Updates Manager\n// Handles immediate UI feedback and rollback mechanisms for try-on mutations\n\nimport { QueryClient } from '@tanstack/react-query';\nimport type {\n  TryonMutationVariables,\n  TryonMutationResponse,\n  TryonMutationContext\n} from '../types/tryon.types';\nimport type {\n  TryonHistoryEntry,\n  TryonHistoryCollection\n} from '../types/history.types';\nimport { HISTORY_QUERY_KEYS } from '../hooks/useTryonHistory';\n\n/**\n * Configuration for optimistic updates\n */\nexport interface OptimisticUpdateConfig {\n  /** Whether to show immediate preview of generated image */\n  showPreview?: boolean;\n  /** Whether to add optimistic entry to history */\n  updateHistory?: boolean;\n  /** Whether to show loading progress indicators */\n  showProgress?: boolean;\n  /** Custom preview image to show during processing */\n  previewPlaceholder?: string;\n  /** Estimated processing time for progress calculation */\n  estimatedProcessingTime?: number;\n}\n\n/**\n * Default optimistic update configuration\n */\nconst DEFAULT_OPTIMISTIC_CONFIG: Required<OptimisticUpdateConfig> = {\n  showPreview: true,\n  updateHistory: true,\n  showProgress: true,\n  previewPlaceholder: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxNTM2IiB2aWV3Qm94PSIwIDAgMTAyNCAxNTM2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxNTM2IiBmaWxsPSIjZjNmNGY2Ii8+CjxjaXJjbGUgY3g9IjUxMiIgY3k9Ijc2OCIgcj0iNjQiIGZpbGw9IiNkMWQ1ZGIiLz4KPHN2ZyBpZD0ic3Bpbm5lciIgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiB2aWV3Qm94PSIwIDAgNjQgNjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjMyIiBjeT0iMzIiIHI9IjI0IiBzdHJva2U9IiM2MzY2ZjEiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtZGFzaGFycmF5PSIxNTAuNzk2NDQ3MzcyMTAwMiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1MC43OTY0NDczNzIxMDAwMiI+CjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMzIgMzI7MzYwIDMyIDMyIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPgo8L2NpcmNsZT4KPC9zdmc+', // Loading spinner SVG\n  estimatedProcessingTime: 8000 // 8 seconds\n};\n\n/**\n * Context for tracking optimistic updates\n */\nexport interface OptimisticUpdateContext {\n  /** Unique identifier for this optimistic update */\n  optimisticId: string;\n  /** Original mutation variables */\n  variables: TryonMutationVariables;\n  /** Configuration used */\n  config: OptimisticUpdateConfig;\n  /** Start time for progress calculation */\n  startTime: number;\n  /** Optimistic history entry ID if created */\n  optimisticHistoryId?: string;\n  /** Rollback functions */\n  rollbackFunctions: Array<() => void>;\n}\n\n/**\n * Optimistic updates manager class\n */\nexport class OptimisticUpdatesManager {\n  private queryClient: QueryClient;\n  private activeOptimisticUpdates = new Map<string, OptimisticUpdateContext>();\n\n  constructor(queryClient: QueryClient) {\n    this.queryClient = queryClient;\n  }\n\n  /**\n   * Start optimistic updates for a try-on mutation\n   */\n  startOptimisticUpdate(\n    variables: TryonMutationVariables,\n    config: OptimisticUpdateConfig = {}\n  ): OptimisticUpdateContext {\n    const mergedConfig = { ...DEFAULT_OPTIMISTIC_CONFIG, ...config };\n    const optimisticId = `optimistic_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    const context: OptimisticUpdateContext = {\n      optimisticId,\n      variables,\n      config: mergedConfig,\n      startTime: Date.now(),\n      rollbackFunctions: []\n    };\n\n    // Apply optimistic updates\n    this.applyOptimisticUpdates(context);\n    \n    // Store context for potential rollback\n    this.activeOptimisticUpdates.set(optimisticId, context);\n\n    return context;\n  }\n\n  /**\n   * Apply optimistic updates to the cache\n   */\n  private applyOptimisticUpdates(context: OptimisticUpdateContext): void {\n    const { variables, config, optimisticId } = context;\n\n    // 1. Add optimistic history entry if enabled\n    if (config.updateHistory) {\n      this.addOptimisticHistoryEntry(context);\n    }\n\n    // 2. Set up progress indicator data if enabled\n    if (config.showProgress) {\n      this.setupProgressIndicator(context);\n    }\n\n    // 3. Pre-cache expected result structure\n    this.setupResultCaching(context);\n  }\n\n  /**\n   * Add optimistic history entry\n   */\n  private addOptimisticHistoryEntry(context: OptimisticUpdateContext): void {\n    const { variables, config, optimisticId } = context;\n    \n    const optimisticHistoryId = `optimistic_history_${optimisticId}`;\n    context.optimisticHistoryId = optimisticHistoryId;\n\n    // Create optimistic history entry\n    const optimisticEntry: TryonHistoryEntry = {\n      id: optimisticHistoryId,\n      timestamp: new Date().toISOString(),\n      generatedImage: config.previewPlaceholder || DEFAULT_OPTIMISTIC_CONFIG.previewPlaceholder,\n      modelImage: variables.modelImage,\n      apparelImages: variables.apparelImages,\n      processingTime: undefined, // Will be updated on completion\n      metadata: {\n        processingConfig: {\n          imageProcessing: variables.options?.imageProcessing,\n          requestOptions: {\n            timeout: variables.options?.timeout,\n            quality: variables.options?.quality\n          }\n        }\n      },\n      tags: ['processing', 'optimistic'],\n      notes: 'Processing...',\n      isFavorite: false\n    };\n\n    // Update history cache optimistically\n    const historyQueryKey = HISTORY_QUERY_KEYS.entries();\n    this.queryClient.setQueryData<TryonHistoryCollection>(\n      historyQueryKey,\n      (oldData) => {\n        if (!oldData) {\n          return {\n            entries: [optimisticEntry],\n            totalCount: 1,\n            currentPage: 0,\n            pageSize: 20,\n            hasMore: false,\n            lastUpdated: new Date().toISOString()\n          };\n        }\n\n        return {\n          ...oldData,\n          entries: [optimisticEntry, ...oldData.entries],\n          totalCount: oldData.totalCount + 1,\n          lastUpdated: new Date().toISOString()\n        };\n      }\n    );\n\n    // Add rollback function\n    context.rollbackFunctions.push(() => {\n      this.queryClient.setQueryData<TryonHistoryCollection>(\n        historyQueryKey,\n        (oldData) => {\n          if (!oldData) return oldData;\n          \n          return {\n            ...oldData,\n            entries: oldData.entries.filter(entry => entry.id !== optimisticHistoryId),\n            totalCount: Math.max(0, oldData.totalCount - 1),\n            lastUpdated: new Date().toISOString()\n          };\n        }\n      );\n    });\n  }\n\n  /**\n   * Set up progress indicator data\n   */\n  private setupProgressIndicator(context: OptimisticUpdateContext): void {\n    const { optimisticId, config } = context;\n    const progressQueryKey = ['tryon-progress', optimisticId];\n\n    // Initialize progress data\n    const initialProgress = {\n      id: optimisticId,\n      status: 'processing' as const,\n      progress: 0,\n      stage: 'image-processing' as const,\n      estimatedTimeRemaining: config.estimatedProcessingTime,\n      startTime: context.startTime\n    };\n\n    this.queryClient.setQueryData(progressQueryKey, initialProgress);\n\n    // Simulate progress updates\n    const progressInterval = setInterval(() => {\n      const elapsed = Date.now() - context.startTime;\n      const progress = Math.min(90, (elapsed / (config.estimatedProcessingTime || 8000)) * 100);\n      \n      let stage: string = 'image-processing';\n      if (progress > 20) stage = 'ai-generation';\n      if (progress > 60) stage = 'post-processing';\n      if (progress > 80) stage = 'finalizing';\n\n      const progressData = {\n        id: optimisticId,\n        status: 'processing' as const,\n        progress,\n        stage,\n        estimatedTimeRemaining: Math.max(0, (config.estimatedProcessingTime || 8000) - elapsed),\n        startTime: context.startTime\n      };\n\n      this.queryClient.setQueryData(progressQueryKey, progressData);\n    }, 500);\n\n    // Add rollback function to clear progress\n    context.rollbackFunctions.push(() => {\n      clearInterval(progressInterval);\n      this.queryClient.removeQueries({ queryKey: progressQueryKey });\n    });\n  }\n\n  /**\n   * Set up result caching structure\n   */\n  private setupResultCaching(context: OptimisticUpdateContext): void {\n    // Pre-populate the cache structure for the expected result\n    const resultQueryKey = ['tryon-result', context.optimisticId];\n    \n    const pendingResult = {\n      id: context.optimisticId,\n      status: 'pending' as const,\n      variables: context.variables,\n      startTime: context.startTime\n    };\n\n    this.queryClient.setQueryData(resultQueryKey, pendingResult);\n\n    // Add rollback function\n    context.rollbackFunctions.push(() => {\n      this.queryClient.removeQueries({ queryKey: resultQueryKey });\n    });\n  }\n\n  /**\n   * Complete optimistic update with actual result\n   */\n  completeOptimisticUpdate(\n    optimisticId: string,\n    result: TryonMutationResponse,\n    mutationContext: TryonMutationContext\n  ): void {\n    const context = this.activeOptimisticUpdates.get(optimisticId);\n    if (!context) return;\n\n    const processingTime = Date.now() - context.startTime;\n\n    // Update history entry if it was created optimistically\n    if (context.optimisticHistoryId) {\n      const historyQueryKey = HISTORY_QUERY_KEYS.entries();\n      this.queryClient.setQueryData<TryonHistoryCollection>(\n        historyQueryKey,\n        (oldData) => {\n          if (!oldData) return oldData;\n\n          return {\n            ...oldData,\n            entries: oldData.entries.map(entry => \n              entry.id === context.optimisticHistoryId\n                ? {\n                    ...entry,\n                    id: `completed_${Date.now()}`, // Generate new real ID\n                    generatedImage: result.img_generated,\n                    processingTime,\n                    metadata: {\n                      ...entry.metadata,\n                      modelVersion: result.metadata?.modelVersion,\n                      appliedQuality: result.metadata?.appliedQuality,\n                      imageProcessingResults: mutationContext.imageProcessingResults\n                    },\n                    tags: entry.tags?.filter(tag => tag !== 'processing' && tag !== 'optimistic') || [],\n                    notes: `Completed in ${(processingTime / 1000).toFixed(1)}s`\n                  }\n                : entry\n            ),\n            lastUpdated: new Date().toISOString()\n          };\n        }\n      );\n    }\n\n    // Update progress to completion\n    const progressQueryKey = ['tryon-progress', optimisticId];\n    this.queryClient.setQueryData(progressQueryKey, {\n      id: optimisticId,\n      status: 'completed' as const,\n      progress: 100,\n      stage: 'completed',\n      estimatedTimeRemaining: 0,\n      startTime: context.startTime,\n      completedAt: Date.now(),\n      result\n    });\n\n    // Update result cache\n    const resultQueryKey = ['tryon-result', optimisticId];\n    this.queryClient.setQueryData(resultQueryKey, {\n      id: optimisticId,\n      status: 'completed' as const,\n      variables: context.variables,\n      startTime: context.startTime,\n      completedAt: Date.now(),\n      processingTime,\n      result\n    });\n\n    // Clean up\n    this.cleanupOptimisticUpdate(optimisticId);\n  }\n\n  /**\n   * Rollback optimistic update on failure\n   */\n  rollbackOptimisticUpdate(optimisticId: string, error?: unknown): void {\n    const context = this.activeOptimisticUpdates.get(optimisticId);\n    if (!context) return;\n\n    // Execute all rollback functions\n    context.rollbackFunctions.forEach(rollback => {\n      try {\n        rollback();\n      } catch (rollbackError) {\n        console.error('Error during optimistic update rollback:', rollbackError);\n      }\n    });\n\n    // Update progress to error state\n    const progressQueryKey = ['tryon-progress', optimisticId];\n    this.queryClient.setQueryData(progressQueryKey, {\n      id: optimisticId,\n      status: 'error' as const,\n      progress: 0,\n      stage: 'error',\n      estimatedTimeRemaining: 0,\n      startTime: context.startTime,\n      error: error instanceof Error ? error.message : String(error)\n    });\n\n    // Clean up\n    this.cleanupOptimisticUpdate(optimisticId);\n  }\n\n  /**\n   * Clean up optimistic update context\n   */\n  private cleanupOptimisticUpdate(optimisticId: string): void {\n    this.activeOptimisticUpdates.delete(optimisticId);\n    \n    // Schedule cleanup of progress and result caches after a delay\n    setTimeout(() => {\n      this.queryClient.removeQueries({ \n        queryKey: ['tryon-progress', optimisticId] \n      });\n      this.queryClient.removeQueries({ \n        queryKey: ['tryon-result', optimisticId] \n      });\n    }, 5000); // Keep for 5 seconds for UI transitions\n  }\n\n  /**\n   * Get current progress for an optimistic update\n   */\n  getOptimisticProgress(optimisticId: string) {\n    const progressQueryKey = ['tryon-progress', optimisticId];\n    return this.queryClient.getQueryData(progressQueryKey);\n  }\n\n  /**\n   * Check if an optimistic update is active\n   */\n  isOptimisticUpdateActive(optimisticId: string): boolean {\n    return this.activeOptimisticUpdates.has(optimisticId);\n  }\n\n  /**\n   * Get all active optimistic updates\n   */\n  getActiveOptimisticUpdates(): OptimisticUpdateContext[] {\n    return Array.from(this.activeOptimisticUpdates.values());\n  }\n}\n\n/**\n * Default optimistic updates manager instance\n */\nexport let defaultOptimisticManager: OptimisticUpdatesManager | null = null;\n\n/**\n * Initialize the default optimistic updates manager\n */\nexport function initializeOptimisticUpdates(queryClient: QueryClient): OptimisticUpdatesManager {\n  defaultOptimisticManager = new OptimisticUpdatesManager(queryClient);\n  return defaultOptimisticManager;\n}\n\n/**\n * Get the default optimistic updates manager\n */\nexport function getOptimisticUpdatesManager(): OptimisticUpdatesManager {\n  if (!defaultOptimisticManager) {\n    throw new Error('OptimisticUpdatesManager not initialized. Call initializeOptimisticUpdates first.');\n  }\n  return defaultOptimisticManager;\n}"],"mappings":"AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}